var mobileEvt={webpage_mobile:function(d){var c=window.open(d.url,"_blank","location=yes,closebuttoncaption=关闭,transitionstyle=crossdissolve,presentationstyle=pagesheet");c.addEventListener("loaderror",function(a){d.showAlert("提 示","error: "+a.message)})}};var operatingDatabaseEvent={crateTable:function(){if(localStorage.getItem(publicParameterObj.parameters.userName)==undefined){var b=[];localStorage.setItem(publicParameterObj.parameters.userName,JSON.stringify(b))}else{}},insertData:function(m,h,i){var n=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));var k=n.length;for(var j=0,l=n.length;j<l;j++){if(n[j].myid==m){i.showAlert("提 示","这件商品已存在购物车中!");return}}n.push({myid:m,mynumber:h});localStorage.setItem(publicParameterObj.parameters.userName,JSON.stringify(n));if(n.length>k){i.viewStates.setShoppingCarState(false);i.showAlert("提 示","添加成功!")}else{i.showAlert("提 示","添加失败!")}},selectData:function(){var b=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));return b},updateData:function(j,g){var f=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));for(var h=0,i=f.length;h<i;h++){if(f[h].myid===j){if(f[h].mynumber!=g){f[h].mynumber=g;localStorage.setItem(publicParameterObj.parameters.userName,JSON.stringify(f));return}return}}},deleteItemData:function(e){var f=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));for(var g=0,h=f.length;g<h;g++){if(f[g].myid===e){f.splice(g,1);localStorage.setItem(publicParameterObj.parameters.userName,JSON.stringify(f));return}}},deleteallData:function(){localStorage.removeItem(publicParameterObj.parameters.userName);publicEventsObj.operatingDatabaseEvent.crateTable()}};var publicEventsClass={mobileEvent:Object.create(mobileEvt),operatingDatabaseEvent:Object.create(operatingDatabaseEvent)};var publicEventsObj=Object.create(publicEventsClass);var indexModule=angular.module("ionicApp",["ionic"]);var iconfig=function(c,d){publicEventsObj.operatingDatabaseEvent.crateTable();c.state("detailed",{url:"/detailed",templateUrl:"detailed.html",controller:"detailed"}).state("adminMenu",{url:"/adminMenu",templateUrl:"adminMenu.html",controller:"adminMenu"}).state("adminModifyPass",{url:"/adminModifyPass",templateUrl:"adminModifyPass.html",controller:"adminModifyPass"}).state("adminClient",{url:"/adminClient",templateUrl:"adminClientSearch.html",controller:"adminClient"}).state("adminProManage",{url:"/adminProManage",templateUrl:"adminProManage.html",controller:"adminProManage"}).state("adminSelectOrder",{url:"/adminSelectOrder",templateUrl:"adminSelectOrder.html",controller:"adminSelectOrder"}).state("historyOrder",{url:"/historyOrder",templateUrl:"historyOrder.html",controller:"historyOrder"}).state("adminOrderInfo",{url:"/adminOrderInfo",templateUrl:"adminOrderInfo.html",controller:"adminOrderInfo"});d.otherwise("/adminMenu")};var imainCtrl=function(J,C,T,G,S,E,W,O){J.cancelHide=false;J.acancelHide=false;J.abackHide=true;J.tabHide=true;J.tabBarHide=false;J.search={};J.navStyle={"border-bottom":"none","box-shadow":"0 2px 3px rgba(0,0,0,.15)"};J.sendMessageIsLogin=true;J.iMessageDatas="";J.indexIsShow=false;J.categoryIsShow=false;J.shoppingCarIsShow=false;if(localStorage.getItem("perSpCar")==undefined){localStorage.setItem("perSpCar",0)}J.perSpCar=localStorage.getItem("perSpCar")>>0;J.viewStates={};var H=false;var X=false;var ab=false;var I=false;var V=false;var R=false;var N=false;var K=false;var D=false;var P=false;var Q=false;var Y=false;var F=false;var M=false;var aa=false;var B=false;var L=false;var Z=false;var U=false;J.viewStates.getIndexState=function(){return H};J.viewStates.setIndexState=function(a){H=a};J.viewStates.getProductState=function(){return X};J.viewStates.setProductState=function(a){X=a};J.viewStates.getProListState=function(){return ab};J.viewStates.setProListState=function(a){ab=a};J.viewStates.getAboutState=function(){return I};J.viewStates.setAboutState=function(a){I=a};J.viewStates.getContactState=function(){return V};J.viewStates.setContactState=function(a){V=a};J.viewStates.getMessageState=function(){return R};J.viewStates.setMessageState=function(a){R=a};J.viewStates.getShoppingCarState=function(){return D};J.viewStates.setShoppingCarState=function(a){D=a};J.viewStates.getCategoryState=function(){return N};J.viewStates.setCategoryState=function(a){N=a};J.viewStates.getSearchResListState=function(){return K};J.viewStates.setSearchResListState=function(a){K=a};J.viewStates.getPersonalState=function(){return P};J.viewStates.setPersonalState=function(a){P=a};J.viewStates.getModifyState=function(){return Q};J.viewStates.setModifyState=function(a){Q=a};J.viewStates.getMyOrderState=function(){return Y};J.viewStates.setMyOrderState=function(a){Y=a};J.viewStates.getSuperProState=function(){return F};J.viewStates.setSuperProState=function(a){F=a};J.viewStates.getWaitingState=function(){return M};J.viewStates.setWaitingState=function(a){M=a};J.viewStates.getAdmMenuState=function(){return aa};J.viewStates.setAdmMenuState=function(a){aa=a};J.viewStates.getAdmSelOrderState=function(){return B};J.viewStates.setAdmSelOrderState=function(a){B=a};J.viewStates.getAdmProManageState=function(){return L};J.viewStates.setAdmProManageState=function(a){L=a};J.viewStates.getAdmClientState=function(){return Z};J.viewStates.setAdmClientState=function(a){Z=a};J.viewStates.getHistoryOrderState=function(){return U};J.viewStates.setHistoryOrderState=function(a){U=a};getOrPostRequestObj.detailedConnect.isCom(J,C);J.showAlert=function(a,b){S.alert({title:a,content:b,buttons:[{text:"确 定",type:"alertCancel"}]}).then(function(c){})};J.backdropClick=function(){J.closeBackdrop()};J.tabBarToPage=function(a){J.isSpNewPage=false;switch(a){case 0:if(J.indexIsShow===false){if(J.perSpCar!=0){if(J.getIsIndex()>0||parseInt(J.getIsDetailed())>0){J.back(-(J.perSpCar+J.getIsIndex()+parseInt(J.getIsDetailed())))}else{J.back(-J.perSpCar)}}else{if(J.getIsIndex()>0||parseInt(J.getIsDetailed())>0){J.back(-(J.perSpCar+J.getIsIndex()+parseInt(J.getIsDetailed())))}else{T.path("/index").replace()}}}break;case 1:if(J.categoryIsShow===false){if(J.isIndex===true){T.path("/category");J.setIsIndex(1)}else{if(J.perSpCar>0){T.path("/category");var b=J.perSpCar+1;J.setPerSpCar(b)}else{T.path("/category").replace()}}}break;case 2:if(J.shoppingCarIsShow===false){if(J.isIndex===true){T.path("/shoppingCar");J.setIsIndex(1)}else{if(J.perSpCar>=3){J.back()}else{T.path("/shoppingCar").replace()}}}break}};J.setPerSpCar=function(a){J.perSpCar=a;localStorage.setItem("perSpCar",a)};J.getPerSpCar=function(){return J.perSpCar};J.setIsIndex=function(a){localStorage.setItem("isIndex",a)};J.getIsIndex=function(){return localStorage.getItem("isIndex")>>0};J.setIsDetailed=function(a){if(a==0){localStorage.setItem("isDetailed",a)}else{if(J.getIsDetailed()!==undefined&&J.getIsDetailed()>0&&J.getIsDetailed()!==null){var b=parseInt(J.getIsDetailed())+parseInt(a);localStorage.setItem("isDetailed",b)}else{localStorage.setItem("isDetailed",a)}}};J.getIsDetailed=function(){return localStorage.getItem("isDetailed")};J.OpenMenus=function(){O.retain();J.openMenu=true};J.toPerson=function(){J.closeBackdrop()};J.closeBackdrop=function(){O.release();J.openMenu=false;J.closeMenu=true};J.getMessage=function(){return J.iMessageDatas};J.setMessage=function(a){J.iMessageDatas=a};J.back=function(a){if(a!==undefined&&a!==null){window.history.go(a)}else{if(J.perSpCar>0){var b=J.perSpCar-1;J.setPerSpCar(b)}window.history.back()}};J.admLoginLode=function(){G(function(){J.adminLoginShowHide(true)},500)};J.userLoginLoad=function(){G(function(){J.userLoginShowHide(true)},500)};J.pageHide=function(){if(J.userLogin){J.userLoginShowHide(false)}if(J.iregister){J.userRegisterShowHide(false)}};J.$on("$stateChangeStart",function(){publicParameterObj.parameters.loadingPage=0;J.isIndex=T.url().split("?")[0]==="/index";J.indexIsShow=false;J.categoryIsShow=false;J.shoppingCarIsShow=false;J.navBarIsHide=false;var a=T.url().split("?")[0];J.isSpNewPage=true;if(a==="/index"||a==="/category"||a==="/shoppingCar"){if(a==="/index"){J.setPerSpCar(0);J.setIsIndex(0);J.setIsDetailed(0)}if(a==="/category"){J.navBarIsHide=true}if(J.tabBarHide){G(function(){J.tabBarHide=false},300)}}else{if(a==="/personal"){J.tabBarHide=true}else{J.tabBarHide=true}}if(J.openMenu===true){J.toPerson()}J.pageHide();if(J.adminLogin){J.adminLoginShowHide(false)}});J.toAdminMenu=function(){J.closeBackdrop();T.path("/adminMenu")};J.toPersonal=function(){if(J.perSpCar!==0){J.back(-(J.perSpCar-1));J.setPerSpCar(0)}else{T.path("/personal")}};J.indexBarIconState=function(){J.indexIsShow=!J.indexIsShow};J.categoryBarIconState=function(){J.categoryIsShow=!J.categoryIsShow};J.shoppingCarIconState=function(){J.shoppingCarIsShow=!J.shoppingCarIsShow};W.fromTemplateUrl("userLogin.html",function(a){J.userLogin=a},{scope:J,animation:"slide-in-up"});W.fromTemplateUrl("register.html",function(a){J.iregister=a},{scope:J,animation:"slide-in-up"});W.fromTemplateUrl("adminLogin.html",function(a){J.adminLogin=a},{scope:J,animation:"slide-in-up"});W.fromTemplateUrl("editMessage.html",function(a){J.editContent=a},{scope:J,animation:"slide-in-up"});J.userLoginShowHide=function(a){a?J.userLogin.show():J.userLogin.hide()};J.userRegisterShowHide=function(a){a?J.iregister.show():J.iregister.hide()};J.adminLoginShowHide=function(a){a?J.adminLogin.show():J.adminLogin.hide()};J.editMessageShowHide=function(a){if(a===true){getOrPostRequestObj.userAndAdminSignIn.isUserLogin(J,C);T.search({page:"editMessage"}).replace();J.editContent.show()}else{T.search("").replace();J.editContent.hide()}};J.getSendMessageState=function(){return J.sendMessageIsLogin};J.isLogin_CallBack=function(a){J.sendMessageIsLogin=!!a};J.loadingImg=function(){function a(){if(window.navigator.userAgent.toLowerCase().indexOf("msie")>=1){return true}else{return false}}var b=a();(function(){var d=$$("mainContent");if(d!==undefined&&d!==null&&d.getElementsByTagName("img")!==undefined&&d.getElementsByTagName("img")!==null){var e=d.getElementsByTagName("img").length,h=[];for(var f=0,c=e;f<c;f++){var i=d.getElementsByTagName("img")[f];if(i){i.setAttribute("_lazysrc",i.getAttribute("_lazysrc")+"?"+Math.random());h.push(i)}}var g=new ImagesLazyLoad({container:window,mode:"vertical",holder:"img/nopic.jpg",onLoad:function(k){k.onload=function(){j(this)}}});function j(l){var k=setInterval(function(){var m=b?l.filters.alpha.opacity:l.style.opacity*100;if(m<100){b?l.filters.alpha.opacity+=10:l.style.opacity=(m+10)/100}else{clearInterval(k)}},15)}}})()}};iconfig.$inject=["$stateProvider","$urlRouterProvider"];indexModule.config(iconfig);indexModule.service("indexService",function(){var q={};var k=[];var o=[];var p=true;var l=true;var i=true;var j=false;var h=1;var n={};q.getMoreHide=function(){return i};q.setMoreHide=function(a){i=a};q.getLoadingHide=function(){return j};q.setLoadingHide=function(a){j=a};q.getPageNum=function(){return h};q.setPageNum=function(a){h=a};q.getProData=function(){return n};q.setProData=function(a){n=a};q.getSlider=function(){return k};q.setSlider=function(a){k=a};q.getNewProData=function(){return o};q.setNewProData=function(a){o=a};q.getNewProHide=function(){return p};q.setNewProHide=function(a){p=a};q.getProBtnHide=function(){return l};q.setProBtnHide=function(a){l=a};return q});var indexCtrl=function(t,x,v,q,o){t.newProIsHide=v.getNewProHide();t.proBtnHide=v.getProBtnHide();t.myInterval=5000;t.bodyHide=true;t.detailedId="";t.setPerSpCar(0);t.bodyHide=true;t.noMoreHide=v.getMoreHide();t.loadingHide=v.getLoadingHide();t.pageNum=v.getPageNum();var n=true;t.indexBarIconState();t.$on("$stateChangeStart",function(){q.cancel(t.loadHttp)});t.indexRefresh=function(){q(function(){getOrPostRequestObj.indexConnect.getIndexBanner(t,x);getOrPostRequestObj.indexConnect.getIndexNewProduct(t,x);t.proRefresh();t.$broadcast("scroll.refreshComplete")},2000)};t.bannerInit_CallBack=function(j){v.setSlider(t.bannerReturnData(j));var e=v.getSlider();var d=[];if(document.querySelector("#indexSwiperView").querySelector("ul")){var a=document.getElementById("indexSwiperView");a.removeChild(a.getElementsByTagName("ul").item(1))}document.getElementById("indexSwiper").innerHTML="";for(var h=0,g=e.length;h<g;h++){d.push({content:"<div class='bannerImg'><img src='"+e[h].iSlideImg+"' onerror=this.src=errImg></div>"})}var b={type:"dom",data:d,dom:document.getElementById("indexSwiper"),duration:3000,isLooping:true,isAutoplay:true,onslidechange:function(k){f.changeIndexDot()}};if(e.length>0){var f=new iSlider(b);var c={top:"105px",width:"100%",diameter:"0.8em",borderColor:"#365b88"};f.renderDot(c)}};t.toBannerDetailed=function(a){if(t.islides[a].isToUrl===0){try{window.device.version.substr(0,1);publicEventsObj.mobileEvent.webpage_mobile(t.islides[a].content)}catch(b){window.open(t.islides[a].content)}}else{t.showDetailed(t.islides[a].content)}};t.bannerReturnData=function(b){var f=[];var c=b.respData;var a={};for(var d=0,e=c.length;d<e;d++){a={iSlideImg:privateVerifictionObj.verifiction.imgLink(c[d].imgUrl),isToUrl:c[d].linkType,content:c[d].linkContent};f.push(a)}return f};t.newProInit_CallBack=function(a){v.setNewProData(t.newProReturnData(a));t.newProDatas=v.getNewProData();t.newProDatas.length===0?v.setNewProHide(true):v.setNewProHide(false);t.newProIsHide=v.getNewProHide();t.proBtnHide=false;v.setProBtnHide(false);q(function(){t.loadingImg()},500)};t.newProReturnData=function(c){var e=c.respData.dataList;var h;var b=[];var a=[];var f=[];var g=e.length;for(var d=0;d<g;d++){a.push({newProNum:e[d].prodNum,newProImg:privateVerifictionObj.verifiction.imgLink(e[d].firstProdImg)});if(d===1||g<2){f=a;a=[]}else{if((d-1)%3===0||d!==0&&d===g-1&&(g-2)%3!==0){b.push(a);a=[]}}}h={newIndexImgs:f,newProImgs:b};return h};t.morePro=function(){o.path("/product")};t.aboutBack=function(){if(o.url()==="/contact"){window.history.back(-1)}};t.showDetailed=function(a){if(a){o.path("/detailed").search({proNum:a,dNum:2})}};if(t.viewStates.getIndexState()===false){getOrPostRequestObj.indexConnect.getIndexBanner(t,x);getOrPostRequestObj.indexConnect.getIndexNewProduct(t,x);getOrPostRequestObj.productConnect.getProduct(t,x);t.viewStates.setIndexState(true)}else{t.newProDatas=v.getNewProData();var w=v.getSlider();var u=[];for(var p=0,n=w.length;p<n;p++){u.push({content:"<div class='bannerImg' ><img src='"+w[p].iSlideImg+"' onerror=this.src=errImg></div>"})}var r={type:"dom",data:u,dom:document.getElementById("indexSwiper"),duration:3000,isLooping:true,isDebug:false,isAutoplay:true,onslidechange:function(a){i.changeIndexDot()}};if(w.length>0){var i=new iSlider(r);var s={top:"105px",width:"100%",diameter:"0.8em",borderColor:"#00407a"};i.renderDot(s)}t.proDatas=v.getProData();n=false;q(function(){t.loadingImg()},500)}t.productInit_CallBack=function(a){v.setProData(t.productReturnData(a));t.proDatas=v.getProData();t.pageNum=2;v.setPageNum(2);q(function(){n=false},1000);q(function(){t.loadingImg()},500)};t.productLoadMore_CallBack=function(b){var a=t.productReturnData(b);t.proDatas.proLeftInfos=t.proDatas.proLeftInfos.concat(a.proLeftInfos);t.proDatas.proRightInfos=t.proDatas.proRightInfos.concat(a.proRightInfos);b.setProData(t.proDatas);t.pageNum++;b.setPageNum(t.pageNum);q(function(){n=false},1000);q(function(){t.loadingImg()},500)};t.productLoadMore=function(){if(t.noMoreHide&&n===false){n=true;t.loadHttp=o(function(){getOrPostRequestObj.productConnect.getProductMore(t,x);t.$broadcast("scroll.infiniteScrollComplete")},2000)}else{t.$broadcast("scroll.infiniteScrollComplete")}};t.proRefresh=function(){getOrPostRequestObj.productConnect.getProduct(t,x);t.noMoreHide=true;t.loadingHide=false;v.setMoreHide(true);v.setLoadingHide(false);t.pageNum=1;v.setPageNum(1)};t.productReturnData=function(g){var c,g,d=[],b=[],e=g.respData.dataList;for(var h=0,f=e.length;h<f;h+=2){c={proLeftNum:e[h].prodNum,proLeftImg:privateVerifictionObj.verifiction.imgLink(e[h].firstProdImg),proLeftName:e[h].prodName,proLeftPrice:"¥"+e[h].stdPrice};d.push(c);if(h+1<f){g={proRightNum:e[h+1].prodNum,proRightImg:privateVerifictionObj.verifiction.imgLink(e[h+1].firstProdImg),proRightName:e[h+1].prodName,proRightPrice:"¥"+e[h+1].stdPrice};b.push(g)}}var a={proLeftInfos:d,proRightInfos:b};if(e.length<14){t.noMoreHide=false;t.loadingHide=true;v.setMoreHide(false);v.setLoadingHide(true)}return a};t.proLeftClick=function(a){o.path("/detailed").search({proNum:t.proDatas.proLeftInfos[a].proLeftNum,dNum:2})};t.proRightClick=function(a){o.path("/detailed").search({proNum:t.proDatas.proRightInfos[a].proRightNum,dNum:2})}};imainCtrl.$inject=["$scope","$http","$location","$timeout","$ionicPopup","$ionicPopover","$ionicModal","$ionicBackdrop"];indexModule.controller("mainCtrl",imainCtrl);indexModule.service("aboutService",function(){var f={};var d="";var e="";f.getAboutImg=function(){return d};f.setAboutImg=function(a){d=a};f.getAboutText=function(){return e};f.setAboutText=function(a){e=a};return f});var aboutCtrt=function(h,e,f,g){h.aboutInit_CallBack=function(a){var b=h.aboutReturnData(a);h.iAboutImg=b.img;h.iAboutText=b.contentText;f.setAboutImg(b.img);f.setAboutText(b.contentText);g(function(){h.loadingImg()},500)};h.aboutReturnData=function(d){var l=d.respData,b="",c=l.introduction.replace(/\./g,"。").split("。");for(var a=0,i=c.length;a<i;a++){b+="<p>"+c[a]+"</p>"}return{contentText:b,img:privateVerifictionObj.verifiction.imgLink(l.ownerImg)}};if(h.viewStates.getAboutState()===false){getOrPostRequestObj.orderInfoConnect.getAboutInfo(h,e);h.viewStates.setAboutState(true)}else{h.iAboutImg=f.getAboutImg();h.iAboutText=f.getAboutText()}};indexCtrl.$inject=["$scope","$http","indexService","$timeout","$location"];var indexCtrlarr=["$scope","$http","indexService","$timeout","$location",indexCtrl];indexModule.controller("index",indexCtrlarr);indexModule.service("admClientService",function(){var o={};var p=false;var n=true;var j=true;var l=false;var i="";var k="";var m=2;o.getNameClick=function(){return p};o.setNameClick=function(a){p=a};o.getPhoneClick=function(){return n};o.setPhoneClick=function(a){n=a};o.getMoreHide=function(){return j};o.setMoreHide=function(a){j=a};o.getLoadingHide=function(){return l};o.setLoadingHide=function(a){l=a};o.getSearchKey=function(){return i};o.setSearchKey=function(a){i=a};o.getClients=function(){return k};o.setClients=function(a){k=a};o.getPageNum=function(){return m};o.setPageNum=function(a){m=a};return o});var adminClientCtrl=function(l,m,k,n,j){l.keyColor="keyColor-link";l.keyColors="keyColor-active";l.isNameClick=k.getNameClick();l.isPhoneClick=k.getPhoneClick();l.noMoreHide=k.getMoreHide();l.loadingHide=k.getLoadingHide();l.clientSearchEvt=null;l.pageNum=k.getPageNum();l.aClient={searchKey:k.getSearchKey()};var h=k.getSearchKey();var i=true;l.$on("$stateChangeStart",function(){j.cancel(l.loadHttp)});l.adminClientInit_CallBack=function(a){k.setClients(l.adminClientReturnData(a));l.iClients=k.getClients();l.pageNum=2;k.setPageNum(2);j(function(){i=false},1000)};l.adminClientLoadMore_CallBack=function(a){var b=l.adminClientReturnData(a);l.iClients=l.iClients.concat(b);k.setClients(l.iClients);l.pageNum++;k.setPageNum(l.pageNum);j(function(){i=false},1000)};l.adminClientLoadMore=function(){if(l.noMoreHide&&i===false){i=true;l.loadHttp=j(function(){getOrPostRequestObj.adminClientSearchConnect.adminUserInfoLoadMore(l,m);l.$broadcast("scroll.infiniteScrollComplete")},2000)}else{l.$broadcast("scroll.infiniteScrollComplete")}};l.adminClientReturnData=function(a){if(a.respData.dataList.length<9){l.noMoreHide=false;l.loadingHide=true;k.setMoreHide(false);k.setLoadingHide(true)}return a.respData.dataList};l.searchTextChange=function(){k.setSearchKey(l.aClient.searchKey)};l.searchUser=function(){if(h!==l.aClient.searchKey){getOrPostRequestObj.adminClientSearchConnect.searchName="";getOrPostRequestObj.adminClientSearchConnect.searchPhone="";l.pageNum=1;k.setPageNum(1);l.noMoreHide=true;l.loadingHide=false;if(l.isNameClick===false){getOrPostRequestObj.adminClientSearchConnect.searchName=l.aClient.searchKey}else{if(l.isPhoneClick===false){getOrPostRequestObj.adminClientSearchConnect.searchPhone=l.aClient.searchKey}}getOrPostRequestObj.adminClientSearchConnect.adminSearchUserInfo(l,m);i=true}h=l.aClient.searchKey};l.clickKey=function(a){l.isNameClick=true;l.isPhoneClick=true;switch(a){case 1:l.isNameClick=!l.isNameClick;break;case 2:l.isPhoneClick=!l.isPhoneClick;break;default:break}k.setNameClick(l.isNameClick);k.setPhoneClick(l.isPhoneClick)};l.searchUserOrder=function(a){l.viewStates.setHistoryOrderState(false);n.path("/historyOrder").search({custNum:l.iClients[a].custNum,custName:l.iClients[a].companyName})};if(l.viewStates.getAdmClientState()===false){getOrPostRequestObj.adminClientSearchConnect.adminSearchUserInfo(l,m);l.viewStates.setAdmClientState(true)}else{l.iClients=k.getClients();i=false}};aboutCtrt.$inject=["$scope","$http","aboutService","$timeout"];var aboutCtrlarr=["$scope","$http","aboutService","$timeout",aboutCtrt];indexModule.controller("about",aboutCtrlarr);var adminLoginCtrl=function(d,e,f){d.cancelHide=false;d.backHide=true;d.alogin={};d.adminloginStyle={"border-bottom":"none","box-shadow":"0 2px 3px rgba(0,0,0,.15)"};d.adminNameFocus=function(){d.anameStyle={color:"#ef575c"}};d.adminNameBlur=function(){d.anameStyle={color:"#294775"}};d.adminPassFocus=function(){d.apassStyle={color:"#ef575c"}};d.adminPassBlur=function(){d.apassStyle={color:"#294775"}};d.hideAdminLogin=function(){var a=f.url().split("?")[0];switch(a){case"/adminMenu":d.back();break;case"/adminModifyPass":case"/adminClient":case"/adminSelectOrder":case"/adminProManage":d.back(-2);break;case"/adminOrderInfo":case"/historyOrder":d.back(-3);break;default:d.adminLoginShowHide(false)}};d.toAdminMenu=function(){switch(f.url().split("?")[0]){case"/adminMenu":case"/adminModifyPass":case"/adminClient":case"/adminSelectOrder":case"/adminProManage":case"/adminOrderInfo":location.reload();break;default:f.path("/adminMenu");break}};d.adminLoginBtnEvt=function(){if(d.alogin.adminName===""||d.alogin.adminName===undefined){d.showAlert("提 示","账号不能为空!")}else{if(d.alogin.adminPass===""||d.alogin.adminPass===undefined){d.showAlert("提 示","密码不能为空!")}else{getOrPostRequestObj.userAndAdminSignIn.adminLogin(d,e)}}};d.adminLoginDone_CallBack=function(){d.toAdminMenu();d.alogin.adminPass=""}};adminClientCtrl.$inject=["$scope","$http","admClientService","$location","$timeout"];var adminClientarr=["$scope","$http","admClientService","$location","$timeout",adminClientCtrl];indexModule.controller("adminClient",adminClientarr);indexModule.service("adminMenuService",function(){var d={};var e="未登录";var f="";d.getCompany=function(){return e;0};d.setCompany=function(a){e=a};d.getName=function(){return f};d.setName=function(a){f=a};return d});var adminMenuCtrl=function(j,k,l,h,g,i){j.adminCompany=l.getCompany();j.adminName=l.getName();j.showConfirm=function(){h.confirm({title:"提 示",content:"您确定要退出登录吗?",buttons:[{text:"取 消",type:"alertCancel",onTap:function(a){return false}},{text:"确 定",type:"alertComfirm",onTap:function(a){return true}}]}).then(function(a){if(a){getOrPostRequestObj.userAndAdminSignIn.adminLoginOut(j,k);j.viewStates.setAdmMenuState(false);l.setCompany("未登录");l.setName("")}else{}})};j.adminInfo_CallBack=function(a){j.adminCompany=a.respData.companyName;j.adminName=a.respData.adminName;l.setCompany(a.respData.companyName);l.setName(a.respData.adminName);j.viewStates.setAdmMenuState(true)};j.adminOutLogin=function(){j.showConfirm()};j.admList=function(a){switch(a){case 0:g.path("/adminSelectOrder");break;case 1:g.path("/adminProManage");break;case 2:g.path("/adminClient");break;case 3:g.path("/adminModifyPass");break}};j.refresh=function(){i(function(){getOrPostRequestObj.adminInfoConnect.getAdminInfo(j,k)},500)};if(j.viewStates.getAdmMenuState()===false){i(function(){getOrPostRequestObj.adminInfoConnect.getAdminInfo(j,k)},500)}};adminLoginCtrl.$inject=["$scope","$http","$location"];indexModule.controller("adminLoginCtrl",adminLoginCtrl);var adminModifyPassCtrl=function(h,j,f){var g={color:"#ef575c"};var i={color:"#294775"};h.aupdatePass={};h.aoldPassFocus=function(){h.aoldPassStyle=g};h.aoldPassBlur=function(){h.aoldPassStyle=i};h.anewPassFocus=function(){h.anewPassStyle=g};h.anewPassBlur=function(){h.anewPassStyle=i};h.anewPassCFocus=function(){h.anewPassCStyle=g};h.anewPassCBlur=function(){h.anewPassCStyle=i};h.clearData=function(){h.aupdatePass.oldPass="";h.aupdatePass.newPass="";h.aupdatePass.newPassC=""};h.amodifyPassDone=function(){f.show({template:"<div>密码修改成功!</div>",delay:100,duration:1000})};h.amodifyPassDone_CallBack=function(){h.amodifyPassDone();window.history.back()};h.asendNewPass=function(){if(privateVerifictionObj.verifiction.isLetterAndNum(h.aupdatePass.oldPass)===false){h.showAlert("提 示","旧密码输入错误，只能由数字或字母组成!")}else{if(privateVerifictionObj.verifiction.isLetterAndNum(h.aupdatePass.newPass)===false||h.aupdatePass.newPass===undefined){h.showAlert("提 示","新密码输入错误，只能由数字或字母组成!")}else{if(h.aupdatePass.newPass!==h.aupdatePass.newPassC){h.showAlert("提 示","新密码两次输入不一致!")}else{getOrPostRequestObj.userAndAdminSignIn.isAdminLegality(h,j,h.aupdatePass.oldPass,h.aupdatePass.newPass)}}}}};adminMenuCtrl.$inject=["$scope","$http","adminMenuService","$ionicPopup","$location","$timeout"];var adminMenuCtrlarr=["$scope","$http","adminMenuService","$ionicPopup","$location","$timeout",adminMenuCtrl];indexModule.controller("adminMenu",adminMenuCtrlarr);var adminOrderInfoCtrl=function(h,e,f,g){h.iOrderId=f.search().orderId;h.toDetailed=function(a){f.path("/detailed").search({proNum:a,hisPage:1})};h.aOrderInfoInit_CallBack=function(a){var j=[],d={},c=[],m;for(var n=0,b=a.orderItemList.length;n<b;n++){d={proId:a.orderItemList[n].prodNum,img:privateVerifictionObj.verifiction.imgLink(a.orderItemList[n].whereimg),name:a.orderItemList[n].prodName,num:"订购数量 : "+a.orderItemList[n].cases,price:"¥"+a.orderItemList[n].custProdPrice};c.push(d)}m={orderNum:a.orderNum,userName:a.custName,proCount:a.orderItemList.length,proPrices:"¥"+a.custPriceTotal,cashState:a.cashStatusName,cashType:a.cashTypeName,deliveryState:a.deliverStatusName,date:a.createDate,iPros:c};j.push(m);h.aOrderInfos=j;g(function(){h.loadingImg()},500)};getOrPostRequestObj.adminSelectOrderConnect.adminGetOrderInfo(h,e)};adminModifyPassCtrl.$inject=["$scope","$http","$ionicLoading"];indexModule.controller("adminModifyPass",adminModifyPassCtrl);indexModule.service("admProManageService",function(){var l={};var h="";var i={};var m=true;var j=false;var n="";var k=2;l.getSearchText=function(){return h};l.setSearchText=function(a){h=a};l.getData=function(){return i};l.setData=function(a){i=a};l.getMoreHide=function(){return m};l.setMoreHide=function(a){m=a};l.getLoadingHide=function(){return j};l.setLoadingHide=function(a){j=a};l.getaEditPros=function(){return n};l.setaEditPros=function(a){n=a};l.getPageNum=function(){return k};l.setPageNum=function(a){k=a};return l});var adminProManageCtrl=function(o,p,l,i,j,n){o.aProManage={searchVal:l.getSearchText()};o.iProId="";o.iProVlaue="";o.pricePrompt="";o.numPrompt="";o.index=0;o.data=l.getData();o.noMoreHide=l.getMoreHide();o.loadingHide=l.getLoadingHide();o.manageSearchEvt=null;o.pageNum=l.getPageNum();var m=l.getSearchText();var k=true;o.$on("$stateChangeStart",function(){n.cancel(o.loadHttp)});o.toDetailed=function(a){i.path("/detailed").search({proNum:a,hisPage:1})};o.updatePrice=function(a){o.index=a;o.data.price=o.aEditPros[a].price.replace("¥","");j.prompt({title:"修改产品价格",template:"<div class='item-input-inset alertInputView'><label class='item-input-wrapper alertInput'><input ng-model='data.price' type='text' class='ng-pristine ng-valid text-center'></label></div><h3 class='text-center assertive errText' ng-bind='pricePrompt'></h3>",scope:o,buttons:[{text:"取 消",type:"alertCancel",onTap:function(b){return false}},{text:"确 定",type:"alertComfirm",onTap:function(b){if(o.data.price===""||o.data.price===undefined){o.pricePrompt="价格不能为空!";b.preventDefault()}else{if(privateVerifictionObj.verifiction.isFloat(o.data.price)===false){o.pricePrompt="价格输入有误!";b.preventDefault()}else{return true}}}}]}).then(function(b){if(b){o.iProId=o.aEditPros[a].proId;o.iProVlaue=o.data.price;getOrPostRequestObj.adminProManageConnect.updatePrice(o,p)}else{}o.pricePrompt=""});l.setData(o.data)};o.updateNum=function(a){o.index=a;o.data.num=o.aEditPros[a].num;j.prompt({title:"修改产品数量",template:"<div class='item-input-inset alertInputView'><label class='item-input-wrapper alertInput'><input ng-model='data.num' type='text' class='ng-pristine ng-valid text-center'></label></div><h3 class='text-center assertive errText' ng-bind='numPrompt'></h3>",scope:o,buttons:[{text:"取 消",type:"alertCancel",onTap:function(b){return false}},{text:"确 定",type:"alertComfirm",onTap:function(b){if(o.data.num===""||o.data.num===undefined){o.numPrompt="数量不能为空!";b.preventDefault()}else{if(privateVerifictionObj.verifiction.isInt(o.data.num)===false){o.numPrompt="数量输入有误!";b.preventDefault()}else{return true}}}}]}).then(function(b){if(b){o.iProId=o.aEditPros[a].proId;o.iProVlaue=o.data.num;getOrPostRequestObj.adminProManageConnect.updateNum(o,p)}else{}o.numPrompt=""});l.setData(o.data)};o.searchChange=function(){l.setSearchText(o.aProManage.searchVal)};o.aProManageSearch=function(){if(o.aProManage.searchVal!==m){getOrPostRequestObj.adminProManageConnect.adminGetProList(o,p);o.pageNum=1;l.setPageNum(1);o.noMoreHide=true;o.loadingHide=false;l.setMoreHide(true);l.setLoadingHide(false);k=true}m=o.aProManage.searchVal};o.adminProManageInit_CallBack=function(a){l.setaEditPros(o.adminProManageRetrunData(a));o.aEditPros=l.getaEditPros();o.pageNum=2;l.setPageNum(2);n(function(){k=false},1000);n(function(){o.loadingImg()},500)};o.adminProManageLoadMore_CallBack=function(a){var b=o.adminProManageRetrunData(a);o.aEditPros=o.aEditPros.concat(b);l.setaEditPros(o.aEditPros);o.pageNum++;l.setPageNum(o.pageNum);n(function(){k=false},1000);n(function(){o.loadingImg()},500)};o.adminProManageLoadMore=function(){if(o.noMoreHide&&k===false){k=true;o.loadHttp=n(function(){getOrPostRequestObj.adminProManageConnect.adminProListLoadMore(o,p);o.$broadcast("scroll.infiniteScrollComplete")},2000)}else{o.$broadcast("scroll.infiniteScrollComplete")}};o.adminProManageRetrunData=function(d){var b=[],e=d.respData.dataList,c={};for(var f=0,a=e.length;f<a;f++){c={name:e[f].prodName,proId:e[f].prodNum,img:privateVerifictionObj.verifiction.imgLink(e[f].firstProdImg),price:"¥"+e[f].stdPrice,num:e[f].dispStockBalance,date:"上架日期: "+e[f].createDate};b.push(c)}if(e.length<9){o.noMoreHide=false;o.loadingHide=true;l.setMoreHide(false);l.setLoadingHide(true)}return b};o.updatePriceDone_CallBack=function(){o.aEditPros[o.index].price="¥"+o.data.price.replace(/\b(0+)/gi,"")};o.updateNumDone_CallBack=function(){o.aEditPros[o.index].num=o.data.num.replace(/\b(0+)/gi,"")};if(o.viewStates.getAdmProManageState()===false){getOrPostRequestObj.adminProManageConnect.adminGetProList(o,p);o.viewStates.setAdmProManageState(true)}else{o.aEditPros=l.getaEditPros();k=false;n(function(){o.loadingImg()},500)}};adminOrderInfoCtrl.$inject=["$scope","$http","$location","$timeout"];indexModule.controller("adminOrderInfo",adminOrderInfoCtrl);var adminSelectOrderCtrl=function(j,k,l,i){j.adminOrder={searchVal:""};j.iCustNum="";j.keyColor="keyColor-link";j.keyColors="keyColor-active";j.isCompanyClick=false;j.isPhoneClick=true;j.noMoreHide=true;j.loadingHide=false;j.selSearchEvt=null;j.pageNum=2;var h="";var g=true;j.$on("$stateChangeStart",function(){i.cancel(j.loadHttp)});j.admSelRefresh=function(){i(function(){getOrPostRequestObj.adminSelectOrderConnect.adminShowOrderList(j,k);j.$broadcast("scroll.refreshComplete")},2000)};j.adminOrderInit_CallBack=function(a){j.aOrders=j.adminOrderReturnData(a);j.pageNum=2;i(function(){g=false},1000);i(function(){j.loadingImg()},500)};j.adminOrderLoadMore_CallBack=function(a){var b=j.adminOrderReturnData(a);j.aOrders=j.aOrders.concat(b);j.pageNum++;i(function(){g=false},1000);i(function(){j.loadingImg()},500)};j.adminOrderLoadMore=function(){if(j.noMoreHide&&g===false){g=true;j.loadHttp=i(function(){getOrPostRequest.adminSelectOrderConnect.adminSelOrderLoadMore(j,k);j.$broadcast("scroll.infiniteScrollComplete")},2000)}else{j.$broadcast("scroll.infiniteScrollComplete")}};j.adminOrderReturnData=function(w){var c=[],e=w.respData.dataList,s,d=[],f=[],t,b=true;for(var x=0,u=e.length;x<u;x++){for(var a=0,v=e[x].orderItemList.length;a<v;a++){s={proId:e[x].orderItemList[a].prodNum,img:privateVerifictionObj.verifiction.imgLink(e[x].orderItemList[a].whereimg),name:e[x].orderItemList[a].prodName,num:e[x].orderItemList[a].cases,price:"¥"+e[x].orderItemList[a].custProdPrice};if(a<3){d.push(s)}else{f.push(s);b=false}}t={orderNum:e[x].orderNum,userName:e[x].custName,proCount:e[x].orderItemList.length,proPrices:"¥"+e[x].custPriceTotal,cashState:e[x].cashStatusName,deliveryState:e[x].deliverStatusName,date:e[x].createDate,iPros:d,isHidePro:true,iHidePros:f,isHide:b,btnText:"显示全部"};b=true;f=[];d=[];c.push(t)}if(e.length<9){j.noMoreHide=false;j.loadingHide=true}return c};j.toDetailed=function(a){l.path("/detailed").search({proNum:a,hisPage:1})};j.toOrderDetailed=function(a){l.path("/adminOrderInfo").search({orderId:j.aOrders[a].orderNum})};j.clickKey=function(a){j.isCompanyClick=true;j.isPhoneClick=true;if(a===1){j.isCompanyClick=!j.isCompanyClick}else{j.isPhoneClick=!j.isPhoneClick}};j.hideShowPro=function(a){j.aOrders[a].isHidePro=!j.aOrders[a].isHidePro;j.aOrders[a].isHidePro?j.aOrders[a].btnText="显示全部":j.aOrders[a].btnText="隐藏部分"};j.orderSearch=function(){if(j.adminOrder.searchVal!==h){getOrPostRequestObj.adminSelectOrderConnect.aUserCompany="";getOrPostRequestObj.adminSelectOrderConnect.aUserPhoneNum="";j.pageNum=1;j.noMoreHide=true;j.loadingHide=false;if(j.isCompanyClick===false){getOrPostRequestObj.adminSelectOrderConnect.aUserCompany=j.adminOrder.searchVal}else{getOrPostRequestObj.adminSelectOrderConnect.aUserPhoneNum=j.adminOrder.searchVal}getOrPostRequestObj.adminSelectOrderConnect.adminShowOrderList(j,k);g=true}h=j.adminOrder.searchVal};getOrPostRequestObj.adminSelectOrderConnect.adminShowOrderList(j,k)};adminProManageCtrl.$inject=["$scope","$http","admProManageService","$location","$ionicPopup","$timeout"];var adminProManagearr=["$scope","$http","admProManageService","$location","$ionicPopup","$timeout",adminProManageCtrl];indexModule.controller("adminProManage",adminProManagearr);indexModule.service("categoryService",function(){var h={};var g="";var f="";var e=true;h.getMenuDatas=function(){return g};h.setMenuDatas=function(a){g=a};h.getCateSearchText=function(){return f};h.setCateSearchText=function(a){f=a};h.getClearBtnShow=function(){return e};h.setClearBtnShow=function(a){e=a};return h});var categoryCtrl=function(h,e,g,f){h.clearBtnShow=g.getClearBtnShow();h.catePro={searchText:g.getCateSearchText()};h.bodyHide=true;h.categoryBarIconState();h.$on("$stateChangeStart",function(){var a=f.url().split("?")[0];if(a==="/shoppingCar"&&(h.getPerSpCar()==3||h.getPerSpCar()==5)){var b=h.getPerSpCar()-1;h.setPerSpCar(b)}});h.OpenOrCloseMenu=function(a){if(h.menuDatas[a].menuBarOff===false&&h.menuDatas[a].menuBarOn===false){h.viewStates.setSearchResListState(false);f.path("/searchRes").search({name:h.menuDatas[a].itemDatas[0].itemData,id:h.menuDatas[a].itemDatas[0].itemId,type:0})}else{h.menuDatas[a].itemHide=!h.menuDatas[a].itemHide;h.menuDatas[a].menuBarOff=!h.menuDatas[a].menuBarOff;h.menuDatas[a].menuBarOn=!h.menuDatas[a].menuBarOn;if(h.menuDatas[a].itemDatas.length>0){h.menuDatas[a].menuHeaderShow=!h.menuDatas[a].menuHeaderShow;h.menuDatas[a].menuHeaderHide=!h.menuDatas[a].menuHeaderHide}}};h.cateSearchChange=function(){h.clearBtnShow=!(h.catePro.searchText!==""&&h.catePro.searchText!==undefined);g.setCateSearchText(h.catePro.searchText);g.setClearBtnShow(h.clearBtnShow)};h.clearData=function(){h.catePro.searchText="";h.clearBtnShow=true;g.setCateSearchText(h.catePro.searchText);g.setClearBtnShow(h.clearBtnShow)};h.searchPro=function(){if(h.catePro.searchText!==""&&h.catePro.searchText!==undefined){h.viewStates.setSearchResListState(false);f.path("/searchRes").search({name:h.catePro.searchText,id:"",type:"1"})}};h.searchCate=function(a,b){h.viewStates.setSearchResListState(false);f.path("/searchRes").search({name:a,id:b,type:0})};h.categoryInit_CallBack=function(a){h.menuDatas=h.categoryReturnData(a);g.setMenuDatas(h.menuDatas)};h.categoryReturnData=function(u){var x=[];var j=u.respData;var d={};var c="";var w=[];for(var t=0,m=j.length;t<m;t++){if(j[t].childProdCatHiers.length>0){for(var v=0,b=j[t].childProdCatHiers.length;v<b;v++){if(j[t].childProdCatHiers[v].childProdCatHiers.length>0){for(var a=0,i=j[t].childProdCatHiers[v].childProdCatHiers.length;a<i;a++){if(a===0){c=j[t].childProdCatHiers[v].prodCat.prodCatName}w.push({itemId:j[t].childProdCatHiers[v].childProdCatHiers[a].prodCat.prodCatId,itemData:j[t].childProdCatHiers[v].childProdCatHiers[a].prodCat.prodCatName})}d={itemHead:c,itemDatas:w,menuBarOff:true,menuBarOn:false,menuHeaderShow:false,menuHeaderHide:true,itemHide:true};x.push(d);c="";w=[];d={}}else{if(v===0){c=j[t].prodCat.prodCatName}w.push({itemId:j[t].childProdCatHiers[v].prodCat.prodCatId,itemData:j[t].childProdCatHiers[v].prodCat.prodCatName})}}d={itemHead:c,itemDatas:w,menuBarOff:true,menuBarOn:false,menuHeaderShow:false,menuHeaderHide:true,itemHide:true};x.push(d);c="";w=[];d={}}else{c=j[t].prodCat.prodCatName;d={itemHead:c,itemDatas:[{itemId:j[t].prodCat.prodCatId,itemData:j[t].prodCat.prodCatName}],menuBarOff:false,menuBarOn:false,menuHeaderShow:false,menuHeaderHide:true,itemHide:true};x.push(d)}}return x};if(h.viewStates.getCategoryState()===false){getOrPostRequestObj.proSearchConnec.proMenuIconLayout(h,e);h.viewStates.setCategoryState(true)}else{h.menuDatas=g.getMenuDatas()}};adminSelectOrderCtrl.$inject=["$scope","$http","$location","$timeout"];indexModule.controller("adminSelectOrder",adminSelectOrderCtrl);indexModule.service("contactService",function(){var m={};var p="";var l="";var n="";var q="";var r="";var j="";var k="";var o="javascript:void(0)";m.getCompanyName=function(){return p};m.setCompanyName=function(a){p=a};m.getAddress=function(){return l};m.setAddress=function(a){l=a};m.getWebSite=function(){return n};m.setWebSite=function(a){n=a};m.getContactPerson=function(){return q};m.setContactPerson=function(a){q=a};m.getPhoneNum=function(){return r};m.setPhoneNum=function(a){r=a};m.getLongiTude=function(){return j};m.setLongiTude=function(a){j=a};m.getLatiTude=function(){return k};m.setLatiTude=function(a){k=a};m.getPhoneNumBtn=function(){return o};m.setPhoneNumBtn=function(a){o=a};return m});var contcatCtrl=function(h,e,f,g){h.contactInit_CallBack=function(a){var b=h.contactReturnData(a);h.companyName=b.companyName;h.address=b.address;h.webSite=b.webSite;h.contactPerson=b.contactPerson;h.phoneNum=b.phoneNum;f.setCompanyName(b.companyName);f.setAddress(b.address);f.setWebSite(b.webSite);f.setContactPerson(b.contactPerson);f.setPhoneNum(b.phoneNum)};h.phoneBtn_CallBack=function(a){f.setPhoneNumBtn(a)};h.callPhone=function(){window.location.href=f.getPhoneNumBtn()};h.contactReturnData=function(a){var b=a.respData;g(function(){h.mapInit(b.longitude,b.latitudes)},500);f.setLongiTude(b.longitude);f.setLatiTude(b.latitudes);return{companyName:b.companyName,address:b.address,contactPerson:b.contactPerson,webSite:b.webSite,phoneNum:b.phoneNum}};h.mapInit=function(d,m){var a=new BMap.Map("contenttexts"),l=new BMap.Icon("img/icon.png",new BMap.Size(50,50),{anchor:new BMap.Size(30,28)}),b=new BMap.Point(d,m),n=new BMap.Marker(b,{icon:l});a.centerAndZoom(b,16);a.addControl(new BMap.ZoomControl());a.addOverlay(n);var c=new BMap.TrafficLayer();a.addTileLayer(c);a.setZoom(18)};if(h.viewStates.getContactState()===false){getOrPostRequestObj.orderInfoConnect.getContactInfo(h,e);if(privateVerifictionObj.verifiction.isMobile()===true){getOrPostRequestObj.indexConnect.initPhoneBtn(h,e)}h.viewStates.setContactState(true)}else{h.mapInit(f.getLongiTude(),f.getLatiTude());h.companyName=f.getCompanyName();h.address=f.getAddress();h.webSite=f.getWebSite();h.contactPerson=f.getContactPerson();h.phoneNum=f.getPhoneNum()}};categoryCtrl.$inject=["$scope","$http","categoryService","$location"];var categoryarr=["$scope","$http","categoryService","$location",categoryCtrl];indexModule.controller("category",categoryarr);var detailedCtrl=function(j,n,m,p){var l="";var h="";j.layerHide=true;j.moreCharHide=true;j.closeHide=true;j.ampImgHide=true;j.shoppingType=0;j.detailed={proNum:0};j.proNumber=0;j.isChangeHide=true;j.isToAlbb=true;var k=p.search().dNum;if(k!==undefined&&k!==null){if(j.getPerSpCar()>=2){j.setPerSpCar(j.getPerSpCar()+k)}else{j.setIsDetailed(k)}}var i=p.search().hisPage;p.search({proNum:p.search().proNum,hisPage:p.search().hisPage}).replace();j.cartHide=i==1;j.detailedInit_CallBack=function(u){var f=j.detailedReturnData(u);j.detailedDatas=f;j.isChangeHide=f.changePro;j.isToAlbb=f.toAlbb;for(var t=0,o=u.respData[0].prodExternals.length;t<o;t++){if(u.respData[0].prodExternals[t].externalName==="murl"){h=u.respData[0].prodExternals[t].externalValue}else{l=u.respData[0].prodExternals[t].externalValue}}var e=f.islides;var d=[];for(var v=0,c=e.length;v<c;v++){d.push({content:"<div class='detailed_bannerImg' ><img src='"+e[v].iSlideImg+"' onerror=this.src=errImg></div>"})}var a={type:"dom",data:d,dom:document.getElementById("detailedSwiper"),duration:3000,isLooping:true,isAutoplay:true,onslidechange:function(q){g.changeIndexDot()}};if(e.length>0){var g=new iSlider(a);var b={top:"42%",width:"100%",diameter:"0.8em",borderColor:"#365b88"};g.renderDot(b)}};j.detailedReturnData=function(z){var c,y=true,e=true,o=z.respData,x=[],f=[],w="",A="",g="";for(var B=0,d=o[0].prodImgs.length;B<d;B++){w=privateVerifictionObj.verifiction.imgLink(o[0].prodImgs[B].thumbUrl);f.push({iSlideImg:w})}for(var a=0,b=o[0].prodFeatures.length;a<b;a++){A=o[0].prodFeatures[a].featureName;g=o[0].prodFeatures[a].ifeatureValue;x.push({extFeatrue:A+": "+g})}if(o.externalSysCode==="1688"&&publicParameterObj.parameters.isComShopping===true){y=true;e=false}else{y=false;e=true}c={detailedTitle:o[0].prodName,islides:f,changePro:y,toAlbb:e,price:"¥"+o[0].stdPrice,balance:o[0].dispStockBalance,extFeatrue:x,data:o[0].createDate,remark:o[0].remark,external:o[0].prodExternals};return c};j.$on("$stateChangeStart",function(){getOrPostRequestObj.userAndAdminSignIn.isToShoppingCar=false;var a=p.url().split("?")[0];if(a!=="/shoppingCar"){if(k!==undefined&&k!==null){if(a!=="/index"){if(j.getPerSpCar()>=2){j.setPerSpCar(j.getPerSpCar()-k)}else{j.setIsDetailed(-k)}}}}if(a==="/waitingAudit"||a==="/myOrder"||a==="/superPro"){j.setPerSpCar(0)}});if(p.search().proNum!==""){j.cqcsHide=false;getOrPostRequestObj.detailedConnect.getDetailed(p.search().proNum,j,n)}else{j.cqcsHide=true;j.detailedDatas={detailedTitle:"产品获取失败，请返回重新选择产品。"}}j.theZoom=function(b){j.layerHide=false;j.closeHide=false;j.ampImgHide=false;j.contentHide=true;j.cartHide=true;j.ampImg=j.detailedDatas.islides[b].iSlideImg;var a=document.getElementById("ampImgId");m(function(){var c=-(a.offsetWidth/2);var d=-(a.offsetHeight/2);j.ampImgStyle={"margin-left":c+"px","margin-top":d+"px",opacity:"1"}},0)};j.closeAmp=function(){j.ampImgStyle={opacity:"0"};j.layerHide=true;j.closeHide=true;j.closeHide=true;j.ampImgHide=true;j.cartHide=false;j.contentHide=false};j.iaddToShoppinCar=function(){j.shoppingType=1;getOrPostRequestObj.userAndAdminSignIn.isUserLogin(j,n);j.viewStates.setShoppingCarState(false)};j.iToShoppingCar=function(){j.shoppingType=2;getOrPostRequestObj.userAndAdminSignIn.isUserLogin(j,n)};j.isLogin_CallBack=function(a){if(a){if(j.shoppingType===1){publicEventsObj.operatingDatabaseEvent.insertData(p.search().proNum,1,j)}else{if(j.shoppingType===2){p.path("/shoppingCar")}}}else{if(j.shoppingType===1){j.userLogin.show()}else{if(j.shoppingType===2){getOrPostRequestObj.userAndAdminSignIn.isToShoppingCar=true;j.userLogin.show()}}}};j.toShopCar=function(){p.path("/shoppingCar")};j.iToAlbb=function(){if(privateVerifictionObj.verifiction.isMobile()){try{window.device.version.substr(0,1);publicEventsObj.mobileEvent.webpage_mobile(h)}catch(a){window.open(h)}}else{window.open(l)}};getOrPostRequestObj.userAndAdminSignIn.isUserLogin(j,n)};contcatCtrl.$inject=["$scope","$http","contactService","$timeout"];var contactarr=["$scope","$http","contactService","$timeout",contcatCtrl];indexModule.controller("contact",contactarr);var editMessage=function(f,e,d){f.charNum=80;f.editStyle={"border-bottom":"none","box-shadow":"0 2px 3px rgba(0,0,0,.15)"};f.toUserLogin=function(){f.userLoginShowHide(true)};f.hideEditMessage=function(){f.editMessageShowHide(false)};f.sendMessage=function(){f.iMeassage=angular.element(document.querySelector("#messageId")).val();if(f.iMeassage!==""&&f.iMeassage!==undefined){getOrPostRequestObj.messageConnect.sendMessage(f,e)}else{f.showAlert("提 示","留言内容不能为空!")}};f.sendMessageDone_CallBack=function(){var a={name:f.getSendMessageState()?publicParameterObj.parameters.userName.substr(0,5)+"******":"匿名账户",createData:"刚刚",messageContent:f.iMeassage};var b=f.getMessage();b.splice(0,0,a);f.setMessage(b.splice(0,b.length,a));f.iMeassage="";angular.element(document.querySelector("#messageId")).val("");d.setMessageDatas(f.iMessageDatas);f.editMessageShowHide(false);f.viewStates.setMessageState(false)}};indexModule.directive("eventVal",function(){return{require:"ngModel",scope:false,link:function(g,e,h,f){f.$parsers.push(function(a){g.charNum=80-a.length})}}});detailedCtrl.$inject=["$scope","$http","$timeout","$location"];indexModule.controller("detailed",detailedCtrl);indexModule.service("historyOrderService",function(){var h={};var e=false;var f=true;var g="";h.getMoreHide=function(){return e};h.setMoreHide=function(a){e=a};h.getLoadingHide=function(){return f};h.setLoadingHide=function(a){f=a};h.getHistoryOrder=function(){return g};h.setHistoryOrder=function(a){g=a};return h});var historyOrderCtrl=function(j,k,h,l,i){j.iCustNum="";j.noMoreHide=h.getMoreHide();j.loadingHide=h.getLoadingHide();var g=true;if(l.search().custNum){j.iCustNum=l.search().custNum;j.companyTitle=l.search().custName}j.adminOrderInit_CallBack=function(a){h.setHistoryOrder(j.adminOrderReturnData(a));j.histroyOrders=h.getHistoryOrder();publicParameterObj.parameters.loadingPage=2;i(function(){g=false},1000);i(function(){j.loadingImg()},500)};j.adminOrderLoadMore_CallBack=function(a){var b=j.adminOrderReturnData(a);j.histroyOrders=j.histroyOrders.concat(b);h.setHistoryOrder(j.histroyOrders);publicParameterObj.parameters.loadingPage++;i(function(){g=false},1000);i(function(){j.loadingImg()},500)};j.adminOrderLoadMore=function(){if(j.noMoreHide&&g===false){g=true;i(function(){getOrPostRequest.adminSelectOrderConnect.adminSelOrderLoadMore(j,k);j.$broadcast("scroll.infiniteScrollComplete")},2000)}else{j.$broadcast("scroll.infiniteScrollComplete")}};j.adminOrderReturnData=function(w){var c=[],e=w.respData.dataList,s,d=[],f=[],t,b=true;for(var x=0,u=e.length;x<u;x++){for(var a=0,v=e[x].orderItemList.length;a<v;a++){s={proId:e[x].orderItemList[a].prodNum,img:privateVerifictionObj.verifiction.imgLink(e[x].orderItemList[a].whereimg),name:e[x].orderItemList[a].prodName,num:e[x].orderItemList[a].cases,price:"¥"+e[x].orderItemList[a].custProdPrice};if(a<3){d.push(s)}else{f.push(s);b=false}}t={orderNum:e[x].orderNum,userName:e[x].custName,proCount:e[x].orderItemList.length,proPrices:"¥"+e[x].custPriceTotal,cashState:e[x].cashStatusName,deliveryState:e[x].deliverStatusName,date:e[x].createDate,iPros:d,isHidePro:true,iHidePros:f,isHide:b,btnText:"显示全部"};b=true;f=[];d=[];c.push(t)}if(e.length<9){j.noMoreHide=false;j.loadingHide=true;h.setMoreHide(false);h.setLoadingHide(true)}return c};j.toDetailed=function(a){l.path("/detailed").search({proNum:a,hisPage:1})};j.toOrderDetailed=function(a){l.path("/adminOrderInfo").search({orderId:j.histroyOrders[a].orderNum})};j.hideShowPro=function(a){j.histroyOrders[a].isHidePro=!j.histroyOrders[a].isHidePro;j.histroyOrders[a].isHidePro?j.histroyOrders[a].btnText="显示全部":j.histroyOrders[a].btnText="隐藏部分";h.setHistoryOrder(j.histroyOrders)};if(j.viewStates.getHistoryOrderState()===false){getOrPostRequestObj.adminSelectOrderConnect.adminShowOrderList(j,k);j.viewStates.setHistoryOrderState(true)}else{j.histroyOrders=h.getHistoryOrder();g=false;i(function(){j.loadingImg()},500)}};editMessage.$inject=["$scope","$http","messageService"];var editMessagearr=["$scope","$http","messageService",editMessage];indexModule.controller("editMessageCtrl",editMessagearr);indexModule.service("messageService",function(){var i={};var f=[];var j=true;var g=false;var h=1;i.getMessageDatas=function(){return f};i.setMessageDatas=function(a){f=a};i.getMoreHide=function(){return j};i.setMoreHide=function(a){j=a};i.getLoadingHide=function(){return g};i.setLoadingHide=function(a){g=a};i.getPageNum=function(){return h};i.setPageNum=function(a){h=a};return i});var messageCtrl=function(j,m,k,l,n,i){j.editMessageIsLogin=false;j.noMoreHide=k.getMoreHide();j.loadingHide=k.getLoadingHide();j.pageNum=k.getPageNum();j.pageNum=k.getPageNum();var h=true;j.$on("$stateChangeStart",function(){j.editMessageShowHide(false);i.cancel(j.loadHttp)});j.messageInit_CallBack=function(a){k.setMessageDatas(j.messageReturnData(a));j.setMessage(k.getMessageDatas());j.pageNum=2;k.setPageNum(2);i(function(){h=false},1000)};j.messageLoadMore_CallBack=function(a){var b=j.messageReturnData(a);j.setMessage(j.getMessage().concat(b));j.pageNum++;k.setPageNum(j.pageNum);k.setMessageDatas(j.getMessage());i(function(){h=false},1000)};j.showEditMessage=function(){j.editMessageShowHide(true)};j.messageLoadMore=function(){if(j.noMoreHide&&h===false){h=true;j.loadHttp=i(function(){getOrPostRequestObj.messageConnect.messageLoadMore(j,m);j.$broadcast("scroll.infiniteScrollComplete")},2000)}else{j.$broadcast("scroll.infiniteScrollComplete")}};j.messageReturnData=function(f){var d=[],a=f.respData.dataList,e;for(var b=0,c=a.length;b<c;b++){e={name:a[b].createBy===""||a[b].createBy===undefined?"匿名账户":a[b].createBy.substr(0,5)+"******",createData:a[b].createDate.replace("T"," "),messageContent:a[b].content};d.push(e)}if(a.length<14){j.noMoreHide=false;j.loadingHide=true;k.setMoreHide(false);k.setLoadingHide(true)}return d};if(j.viewStates.getMessageState()===false){getOrPostRequest.messageConnect.getMessage(j,m);j.viewStates.setMessageState(true)}else{j.setMessage(k.getMessageDatas());h=false}};historyOrderCtrl.$inject=["$scope","$http","historyOrderService","$location","$timeout"];var histroryOrderarr=["$scope","$http","historyOrderService","$location","$timeout",historyOrderCtrl];indexModule.controller("historyOrder",histroryOrderarr);var myOrderCtrl=function(i,j,f,h){i.custName="未登录";i.noMoreHide=true;i.loadingHide=false;i.pageNum=2;var g=true;i.$on("$stateChangeStart",function(){h.cancel(i.loadHttp)});i.myOrderRefresh=function(){h(function(){getOrPostRequestObj.myOrderConnect.userShowOrderList(i,j);i.$broadcast("scroll.refreshComplete")},2000)};i.myOrderInit_CallBack=function(a){i.oLists=i.myOrderReturnData(a);i.pageNum=2;h(function(){g=false},1000);h(function(){i.loadingImg()},500)};i.myOrderLoadMore_CallBack=function(a){var b=i.myOrderReturnData(a);i.oLists=i.oLists.concat(b);i.pageNum++;h(function(){g=false},1000);h(function(){i.loadingImg()},500)};i.myOrederLoadMore=function(){if(i.noMoreHide&&g===false){i.loadHttp=h(function(){g=true;getOrPostRequestObj.myOrderConnect.userMyOrderLoadMore(i,j);i.$broadcast("scroll.infiniteScrollComplete")},2000)}else{i.$broadcast("scroll.infiniteScrollComplete")}};i.isLogin_CallBack=function(a){if(a===true){i.custName=publicParameterObj.parameters.userName}else{i.custName="未登录"}};i.myOrderReturnData=function(x){var F={};var b=[];var w=[];var A={};var E=[];var B=[];var G=x.respData.dataList;var z=true;var D=true;var d,a,H;for(var y=0,c=G.length;y<c;y++){z=true;D=true;d=false;a=false;H=false;for(var e=0,C=G[y].orderItemList.length;e<C;e++){A={proId:G[y].orderItemList[e].prodNum,proImg:privateVerifictionObj.verifiction.imgLink(G[y].orderItemList[e].whereimg),proName:G[y].orderItemList[e].prodName,proNum:"订购数量: "+G[y].orderItemList[e].cases,proPrice:"¥"+G[y].orderItemList[e].custProdPrice};if(e<3){b.push(A)}else{z=true;D=false;w.push(A)}A={}}switch(G[y].deliverStatus){case 0:d=true;break;case 1:a=true;break;case 2:H=true;break}F={orderId:G[y].orderNum,isProHide:z,isHide:D,oItems:E,oPros:b,oHidePro:w,orderState:G[y].deliverStatusName,date:G[y].createDate,oCountNum:G[y].orderItemList.length,oCountPrice:"¥"+G[y].custPriceTotal,btnText:"显示全部",stateRed:d,stateBlue:a,stateGray:H};B.push(F);E=[];b=[];w=[]}if(G.length<9){i.noMoreHide=false;i.loadingHide=true}return B};i.toDetailed=function(b){var a=i.getPerSpCar()+4;i.setPerSpCar(a);f.path("/detailed").search({proNum:b})};i.hideShowPro=function(a){i.oLists[a].isProHide=!i.oLists[a].isProHide;i.oLists[a].isProHide?i.oLists[a].btnText="显示全部":i.oLists[a].btnText="隐藏部分"};h(function(){getOrPostRequestObj.userAndAdminSignIn.isUserLogin(i,j)},450);getOrPostRequestObj.myOrderConnect.userShowOrderList(i,j)};messageCtrl.$inject=["$scope","$http","messageService","$ionicModal","$location","$timeout"];var messageCtrlarr=["$scope","$http","messageService","$ionicModal","$location","$timeout",messageCtrl];indexModule.controller("message",messageCtrlarr);indexModule.service("perService",function(){var d={};var e="未登录";var f="";d.getUserName=function(){return e};d.setUserName=function(a){e=a};d.getUserCompany=function(){return f};d.setUserCompany=function(a){f=a};return d});var personalCtrl=function(j,k,l,h,i,g){j.useriName=l.getUserName();j.useriCompany=l.getUserCompany();j.showConfirm=function(){h.confirm({title:"提 示",content:"您确定要退出登录吗?",buttons:[{text:"取 消",type:"alertCancel",onTap:function(a){return false}},{text:"确 定",type:"alertComfirm",onTap:function(a){return true}}]}).then(function(a){if(a){j.viewStates.setPersonalState(false);l.setUserName("未登录");l.setUserCompany("");getOrPostRequestObj.userAndAdminSignIn.userLoginOut(j,k)}else{}})};j.perList=function(a){switch(a){case 0:g.path("/shoppingCar").search("");j.setPerSpCar(2);break;case 1:g.path("/waitingAudit").search("");j.setPerSpCar(0);break;case 2:g.path("/myOrder").search("");j.setPerSpCar(0);break;case 3:g.path("/superPro").search("");j.setPerSpCar(0);break;case 4:g.path("/modifyPass").search("");j.setPerSpCar(0);break;case 5:g.path("/modifyInfo").search("");j.setPerSpCar(0);break}};j.userLoginOut=function(){j.showConfirm()};j.infoInit_CallBack=function(a){j.useriName=a.respData.custName;j.useriCompany=a.respData.companyName;l.setUserName(a.respData.custName);l.setUserCompany(a.respData.companyName);j.viewStates.setPersonalState(true)};if(j.viewStates.getPersonalState()===false){i(function(){getOrPostRequestObj.registConnect.userLoginInfo(j,k)},500)}};myOrderCtrl.$inject=["$scope","$http","$location","$timeout"];indexModule.controller("myOrder",myOrderCtrl);indexModule.service("productService",function(){var l={};var m=true;var n=false;var h="";var j=1;var k={};var i="";l.getMoreHide=function(){return m};l.setMoreHide=function(a){m=a};l.getLoadingHide=function(){return n};l.setLoadingHide=function(a){n=a};l.getSearchText=function(){return h};l.setSearchText=function(a){h=a};l.getPageNum=function(){return j};l.setPageNum=function(a){j=a};l.getProData=function(){return k};l.setProData=function(a){k=a};l.getSearchTextSave=function(){return i};l.setSearchTextSave=function(a){i=a};return l});var productCtrl=function(n,p,o,i,m,l){n.bodyHide=true;n.noMoreHide=o.getMoreHide();n.loadingHide=o.getLoadingHide();n.searchEvt=null;n.pageNum=o.getPageNum();n.iPro={searchText:o.getSearchText()};var j=o.getSearchTextSave();var k=true;n.$on("$stateChangeStart",function(){l.cancel(n.loadHttp)});n.toProList=function(){i.path("/proList")};n.productInit_CallBack=function(a){o.setProData(n.productReturnData(a));n.proDatas=o.getProData();n.pageNum=2;o.setPageNum(2);l(function(){k=false},1000);l(function(){n.loadingImg()},500)};n.productLoadMore_CallBack=function(a){var b=n.productReturnData(a);n.proDatas.proLeftInfos=n.proDatas.proLeftInfos.concat(b.proLeftInfos);n.proDatas.proRightInfos=n.proDatas.proRightInfos.concat(b.proRightInfos);o.setProData(n.proDatas);n.pageNum++;o.setPageNum(n.pageNum);l(function(){k=false},1000);l(function(){n.loadingImg()},500)};n.searchResLoadMore_CallBack=function(a){n.productInit_CallBack(a)};n.productLoadMore=function(){if(n.noMoreHide&&k===false){k=true;n.loadHttp=l(function(){getOrPostRequestObj.productConnect.getProductMore(n,p);n.$broadcast("scroll.infiniteScrollComplete")},2000)}else{n.$broadcast("scroll.infiniteScrollComplete")}};n.proRefresh=function(){l(function(){getOrPostRequestObj.productConnect.getProduct(n,p);n.$broadcast("scroll.refreshComplete");n.noMoreHide=true;n.loadingHide=false;o.setMoreHide(true);o.setLoadingHide(false);n.pageNum=1;o.setPageNum(1);n.iPro.searchText="";o.setSearchText("")},2000)};n.productReturnData=function(h){var b,f,c=[],a=[],d=h.respData.dataList;for(var g=0,e=d.length;g<e;g+=2){b={proLeftNum:d[g].prodNum,proLeftImg:privateVerifictionObj.verifiction.imgLink(d[g].firstProdImg),proLeftName:d[g].prodName,proLeftPrice:"¥"+d[g].stdPrice};c.push(b);if(g+1<e){f={proRightNum:d[g+1].prodNum,proRightImg:privateVerifictionObj.verifiction.imgLink(d[g+1].firstProdImg),proRightName:d[g+1].prodName,proRightPrice:"¥"+d[g+1].stdPrice};a.push(f)}}var r={proLeftInfos:c,proRightInfos:a};if(d.length<14){n.noMoreHide=false;n.loadingHide=true;o.setMoreHide(false);o.setLoadingHide(true)}return r};n.proSearchTextChange=function(){o.setSearchText(n.iPro.searchText)};n.iProSearch=function(){if(n.iPro.searchText!==j){n.pageNum=1;o.setPageNum(1);n.loadingHide=false;n.noMoreHide=true;o.setMoreHide(true);o.setLoadingHide(false);getOrPostRequestObj.proSearchConnec.userSearchMore(n.iPro.searchText,"",n,p);o.setSearchText(n.iPro.searchText);j=n.iPro.searchText;o.setSearchTextSave(n.iPro.searchText);k=true}};n.proLeftClick=function(a){i.path("/detailed").search({proNum:n.proDatas.proLeftInfos[a].proLeftNum})};n.proRightClick=function(a){i.path("/detailed").search({proNum:n.proDatas.proRightInfos[a].proRightNum})};n.toggleLeft=function(){m.toggleLeft()};if(n.viewStates.getProductState()===false){getOrPostRequestObj.productConnect.getProduct(n,p);n.viewStates.setProductState(true)}else{n.proDatas=o.getProData();k=false;l(function(){n.loadingImg()},500)}};personalCtrl.$inject=["$scope","$http","perService","$ionicPopup","$timeout","$location"];var personalarr=["$scope","$http","perService","$ionicPopup","$timeout","$location",personalCtrl];indexModule.controller("personal",personalarr);indexModule.service("proListService",function(){var l={};var n=false;var m=true;var j=1;var k="";var h="";var i="";l.getLoadingHide=function(){return n};l.setLoadingHide=function(a){n=a};l.getMoreHide=function(){return m};l.setMoreHide=function(a){m=a};l.getPageNum=function(){return j};l.setPageNum=function(a){j=a};l.getProListDatas=function(){return k};l.setProListDatas=function(a){k=a};l.getSearchText=function(){return h};l.setSearchText=function(a){h=a};l.getSearchTextSave=function(){return i};l.setSearchTextSave=function(a){i=a};return l});var proListCtrl=function(k,m,l,n,j){k.bodyHide=true;k.loadingHide=l.getLoadingHide();k.noMoreHide=l.getMoreHide();k.pageNum=l.getPageNum();k.iPro={searchText:l.getSearchText()};var h=l.getSearchTextSave();var i=true;k.$on("$stateChangeStart",function(){j.cancel(k.loadHttp)});k.productInit_CallBack=function(a){l.setProListDatas(k.proListReturnData(a));k.proListDatas=l.getProListDatas();l.setPageNum(2);k.pageNum=2;j(function(){i=false},1000);j(function(){k.loadingImg()},500)};k.productLoadMore_CallBack=function(a){var b=k.proListReturnData(a);k.proListDatas=k.proListDatas.concat(b);l.setProListDatas(k.proListDatas);k.pageNum++;l.setPageNum(k.pageNum);j(function(){i=false},1000);j(function(){k.loadingImg()},500)};k.searchResLoadMore_CallBack=function(a){k.productInit_CallBack(a)};k.proListLoadMore=function(){if(k.noMoreHide&&i===false){i=true;k.loadHttp=j(function(){getOrPostRequestObj.productConnect.getProductMore(k,m);k.$broadcast("scroll.infiniteScrollComplete")},2000)}else{k.$broadcast("scroll.infiniteScrollComplete")}};k.proListRefresh=function(){j(function(){getOrPostRequestObj.productConnect.getProduct(k,m);k.$broadcast("scroll.refreshComplete");k.noMoreHide=true;k.loadingHide=false;k.pageNum=1;k.iPro.searchText="";l.setSearchText("");l.setPageNum(1);l.setMoreHide(true);l.setLoadingHide(false)},2000)};k.proListReturnData=function(e){var c=[],f=e.respData.dataList,d,g="";for(var a=0,b=f.length;a<b;a++){if(f[a].featureName===null||f[a].featureName===undefined){g=""}else{g=f[a].featureName}d={proNum:f[a].prodNum,proName:f[a].prodName,proModel:"型号: "+g,proPrice:"¥"+f[a].stdPrice,proListImg:privateVerifictionObj.verifiction.imgLink(f[a].firstProdImg)};c.push(d)}if(f.length<14){k.noMoreHide=false;k.loadingHide=true;l.setMoreHide(false);l.setLoadingHide(true)}return c};k.proSearchTextChange=function(){l.setSearchText(k.iPro.searchText)};k.iProSearch=function(){if(k.iPro.searchText!==h){k.pageNum=1;l.setPageNum(1);k.noMoreHide=true;k.loadingHide=false;l.setMoreHide(true);l.setLoadingHide(false);getOrPostRequestObj.proSearchConnec.userSearchMore(k.iPro.searchText,"",k,m);h=k.iPro.searchText;l.setSearchTextSave(k.iPro.searchText);i=true}};k.proItemClick=function(a){n.path("/detailed").search({proNum:k.proListDatas[a].proNum})};if(k.viewStates.getProListState()===false){getOrPostRequestObj.productConnect.getProduct(k,m);k.viewStates.setProListState(true)}else{k.proListDatas=l.getProListDatas();i=false;j(function(){k.loadingImg()},500)}};productCtrl.$inject=["$scope","$http","productService","$location","$ionicSideMenuDelegate","$timeout"];var productarr=["$scope","$http","productService","$location","$ionicSideMenuDelegate","$timeout",productCtrl];indexModule.controller("product",productarr);indexModule.service("searchResService",function(){var i={};var h="";var j=true;var f=false;var g=2;i.getProResList=function(){return h};i.setProResList=function(a){h=a};i.getMoreHide=function(){return j};i.setMoreHide=function(a){j=a};i.getLoadingHide=function(){return f};i.setLoadingHide=function(a){f=a};i.getPageNum=function(){return g};i.setPageNum=function(a){g=a};return i});var searchResCtrl=function(j,m,l,p,r){var q=p.search().name,k=p.search().id,n=p.search().type;j.bodyHide=true;j.noMoreHide=l.getMoreHide();j.loadingHide=l.getLoadingHide();j.resTitle=q;j.pageNum=l.getPageNum();var o=true;j.$on("$stateChangeStart",function(){r.cancel(j.loadHttp)});j.showSearchResInit_CallBack=function(a){l.setProResList(j.proResReturnData(a));j.proResList=l.getProResList();j.pageNum=2;l.setPageNum(2);r(function(){o=false},1000);r(function(){j.loadingImg()},500)};j.searchResLoadMore_CallBack=function(a){var b=j.proResLoadMore(a);j.proResList=j.proResList.concat(b);j.pageNum++;l.setPageNum(j.pageNum);l.setProResList(j.proResList);r(function(){o=false},1000);r(function(){j.loadingImg()},500)};j.proResLoadMore=function(){if(j.noMoreHide&&o===false){o=true;j.loadHttp=r(function(){if(n===0){getOrPostRequestObj.proSearchConnec.userSearchMore("",k,j,m)}else{getOrPostRequestObj.proSearchConnec.userSearchMore(q,"",j,m)}j.$broadcast("scroll.infiniteScrollComplete")},2000)}else{j.$broadcast("scroll.infiniteScrollComplete")}};j.proResReturnData=function(c){var g=[],d=c.respData.dataList,a,b="";for(var e=0,f=d.length;e<f;e++){if(d[e].featureName===null||d[e].featureName===undefined){b=""}else{b=d[e].featureName}a={proId:d[e].prodNum,proListImg:privateVerifictionObj.verifiction.imgLink(d[e].firstProdImg),proName:d[e].prodName,proModel:"产品型号: "+b,proPrice:d[e].stdPrice};g.push(a)}if(d.length<9){j.noMoreHide=false;j.loadingHide=true;l.setMoreHide(false);l.setLoadingHide(true)}return g};if(j.viewStates.getSearchResListState()===false){if(n==0){getOrPostRequestObj.proSearchConnec.userSearchPro("",k,j,m)}else{getOrPostRequestObj.proSearchConnec.userSearchPro(q,"",j,m)}j.viewStates.setSearchResListState(true)}else{j.proResList=l.getProResList();o=false;r(function(){j.loadingImg()},500)}j.resItemClick=function(a){p.path("/detailed").search({proNum:j.proResList[a].proId,dNum:3})}};proListCtrl.$inject=["$scope","$http","proListService","$location","$timeout"];var proListarr=["$scope","$http","proListService","$location","$timeout",proListCtrl];indexModule.controller("proList",proListarr);var register=function(i,k,g,l){var h={color:"#ef575c"};var j={color:"#294775"};i.registerStyle={"border-bottom":"none","box-shadow":"0 2px 3px rgba(0,0,0,.15)"};i.register={};i.rphoneFocus=function(){i.registerPhone=h};i.rphoneBlur=function(){i.registerPhone=j};i.rpassFocus=function(){i.registerPass=h};i.rpassBlur=function(){i.registerPass=j};i.rpasscFocus=function(){i.registerPassC=h};i.rpasscBlur=function(){i.registerPassC=j};i.rnameFocus=function(){i.registerName=h};i.rnameBlur=function(){i.registerName=j};i.rcompanyFocus=function(){i.registerCompany=h};i.rcompanyBlur=function(){i.registerCompany=j};i.registerSend=function(){if(privateVerifictionObj.verifiction.iphonever(i.register.rPhone)===false){i.showAlert("提 示","手机号码格式输入错误!")}else{if(privateVerifictionObj.verifiction.isLetterAndNum(i.register.rPass)===false){i.showAlert("提 示","用户密码只能由字母或数字组成!")}else{if(i.register.rPass===""||i.register.rPass===undefined||i.register.rPassC===""||i.register.rPassC===undefined){i.showAlert("提 示","密码不能为空!")}else{if(i.register.rPass!==i.register.rPassC){i.showAlert("提 示","两次用户密码输入不正确!")}else{if(i.register.rName===""||i.register.rName===undefined){i.showAlert("提 示","姓名不能为空!")}else{if(i.register.rCompany===""||i.register.rCompany===undefined){i.showAlert("提 示","商家名/公司名不能为空!")}else{getOrPostRequestObj.registConnect.userRegist(i,k)}}}}}}};i.userLoginDone_CallBack=function(a){localStorage.setItem("userName",a+"");publicParameterObj.parameters.userName=localStorage.userName.replace(/\"/g,"");publicEventsObj.operatingDatabaseEvent.crateTable();getOrPostRequestObj.userAndAdminSignIn.userLoginState=true;getOrPostRequestObj.userAndAdminSignIn.testSetJushTagNalias(i,k)};i.registerDone_CallBack=function(b,a){getOrPostRequestObj.userAndAdminSignIn.userLogin(i,k,b,a);g.show({template:"<div>恭喜您注册成功!</div>",delay:100,duration:1000});i.register.rPhone="";i.register.rPass="";i.register.rPassC="";i.register.rName="";i.register.rCompany="";l.path("/personal")}};searchResCtrl.$inject=["$scope","$http","searchResService","$location","$timeout"];var searchResarr=["$scope","$http","searchResService","$location","$timeout",searchResCtrl];indexModule.controller("searchRes",searchResarr);var rightMenus=function(d,f,e){d.isUserLogin=function(){getOrPostRequestObj.userAndAdminSignIn.isUserLogin(d,f),d.isLogin_CallBack=function(a){d.isToLogin(a)}},d.isAdminLogin=function(){getOrPostRequestObj.userAndAdminSignIn.isAdminLogin(d,f)},d.isToLogin=function(a){a?e.path("/personal"):(d.userLogin.show(),d.rightMenu.hide())},d.isaLogin_CallBack=function(a){a?e.path("/adminMenu"):(d.adminLogin.show(),d.rightMenu.hide())}};register.$inject=["$scope","$http","$ionicLoading","$location"],indexModule.controller("registerCtrl",register);indexModule.service("shoppingCarService",function(){var i={};var h=true;var l=true;var g=false;var j=0;var k=[];i.getSendBtnHide=function(){return h};i.setSendBtnHide=function(a){h=a};i.getIsNone=function(){return l};i.setIsNone=function(a){l=a};i.getOpenEditPrice=function(){return g};i.setOpenEditPrice=function(a){g=a};i.getCountNum=function(){return j};i.setCountNum=function(a){j=a};i.getSpList=function(){return k};i.setSpList=function(a){k=a};return i});var shoppingCarCtrl=function(n,p,i,l,j,m,k){n.sendjson=[];n.sendBtnHide=i.getSendBtnHide();n.isNone=i.getIsNone();n.openEditPrice=i.getOpenEditPrice();n.countNum=i.getCountNum();n.closeEditPrice=false;n.editPriceHide=false;n.editBtn=true;n.iProNum=[];var o=0;n.spBackHide=n.getPerSpCar()==0;n.shoppingCarIconState();n.showConfirm=function(a){l.confirm({title:"提 示",content:"是否将该产品从购物车中删除?",buttons:[{text:"取 消",type:"alertCancel",onTap:function(b){return false}},{text:"确 定",type:"alertComfirm",onTap:function(b){return true}}]}).then(function(b){if(b){var c=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName)).reverse();n.countNum=n.countNum-c[a].mynumber*n.spLists[a].price;if(privateVerifictionObj.verifiction.isInt(n.countNum)===false){n.countNum=privateVerifictionObj.verifiction.subNum(n.countNum,2)}publicEventsObj.operatingDatabaseEvent.deleteItemData(n.spLists[a].id);n.deletePro(a)}})};n.sendOrderConfirm=function(){l.confirm({title:"提 示",content:"是否提交订单?",buttons:[{text:"取 消",type:"alertCancel",onTap:function(a){return false}},{text:"确 定",type:"alertComfirm",onTap:function(a){return true}}]}).then(function(d){if(d){var c=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));var e={};for(var a=0,b=c.length;a<b;a++){if(a===0){e="{'prodNum':'"+c[a].myid+"','cases':"+c[a].mynumber+"}"}else{e="{'prodNum':'"+c[a].myid+"','cases':"+c[a].mynumber+"}"}n.sendjson.push(e)}n.sendjson="["+n.sendjson+"]";getOrPostRequestObj.shoppingCarConnect.sendOrder(n,p)}})};n.shoppingCarInit_CallBack=function(a,b){i.setSpList(n.shoppingCharReturnData(a,b));n.spLists=i.getSpList();m(function(){n.loadingImg()},500)};n.shoppingCharReturnData=function(d){var e=d.respData;var a=[];var b;var c=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName)).reverse();for(var f=0,g=e.length;f<g;f++){b={name:e[f].prodName,img:privateVerifictionObj.verifiction.imgLink(e[f].firstProdImg),id:e[f].prodNum,price:e[f].stdPrice,num:c[f].mynumber,border2x:false,boderNone:false};a.push(b);b={};n.countNum=n.countNum+e[f].stdPrice*c[f].mynumber;if(privateVerifictionObj.verifiction.isInt(n.countNum)===false){n.countNum=privateVerifictionObj.verifiction.subNum(n.countNum,2)}}i.setCountNum(n.countNum);return a};n.isLogin_CallBack=function(a){if(a){if(localStorage.getItem(publicParameterObj.parameters.userName)==="[]"||localStorage.getItem(publicParameterObj.parameters.userName)===undefined){n.isNone=false;n.sendBtnHide=true;i.setSendBtnHide(true);i.setIsNone(false)}else{var c=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));for(var d=0,b=c.length;d<b;d++){n.iProNum.push(c[d].myid);if(d===b-1){n.sendBtnHide=false;n.editBtn=false;i.setSendBtnHide(false)}}n.isNone=!(c.length===0);i.setIsNone(n.isNone);getOrPostRequestObj.shoppingCarConnect.getShoppingInfo(n,p)}}else{m(function(){n.userLoginShowHide(true)},500)}};n.changeProNumber=function(c,a){var b=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName)).reverse();if(c==="add"){++n.spLists[a].num}else{if(n.spLists[a].num>1){--n.spLists[a].num}}n.countNum=n.countNum-b[a].mynumber*n.spLists[a].price+n.spLists[a].num*n.spLists[a].price;if(privateVerifictionObj.verifiction.isInt(n.countNum)===false){n.countNum=privateVerifictionObj.verifiction.subNum(n.countNum,2)}publicEventsObj.operatingDatabaseEvent.updateData(n.spLists[a].id,n.spLists[a].num);i.setCountNum(n.countNum);i.setSpList(n.spLists)};n.changeVal=function(b){var a=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName)).reverse();if(privateVerifictionObj.verifiction.isInt(n.spLists[b].num)){n.spLists[b].boderNone=false;n.spLists[b].border2x=false;o<=0?o=0:o--;n.countNum=n.countNum-a[b].mynumber*n.spLists[b].price+n.spLists[b].num*n.spLists[b].price;if(privateVerifictionObj.verifiction.isInt(n.countNum)===false){n.countNum=privateVerifictionObj.verifiction.subNum(n.countNum,2)}publicEventsObj.operatingDatabaseEvent.updateData(n.spLists[b].id,n.spLists[b].num);i.setCountNum(n.countNum)}else{n.spLists[b].border2x=true;o++}i.setSpList(n.spLists)};n.deletePro=function(a){n.spLists.splice(a,1);if(n.spLists.length===0){n.sendBtnHide=true;n.editBtn=true;n.isNone=false;i.setSendBtnHide(true);i.setIsNone(false)}i.setCountNum(n.countNum);i.setSpList(n.spLists)};n.openOrCloseEditPrice=function(){if(n.editPriceHide){if(o!==0){n.showAlert("提 示","请填写正确的商品数量!")}else{n.editPriceHide=false;n.closeEditPrice=true;n.openEditPrice=false;i.setOpenEditPrice(false)}}else{n.closeEditPrice=false;n.openEditPrice=true;n.editPriceHide=true;i.setOpenEditPrice()}};n.sendOrder=function(){n.sendOrderConfirm()};n.sendOrder_CallBack=function(){publicEventsObj.operatingDatabaseEvent.deleteallData();n.spLists=[];i.setSpList(n.spLists);n.viewStates.setWaitingState(false);n.viewStates.setShoppingCarState(false);k.show({template:"<div>订单提交成功!</div>",delay:100,duration:2000});j.path("/waitingAudit").replace()};n.showDetailed=function(a){if(n.editPriceHide===false){j.path("/detailed").search({proNum:a,hisPage:1})}};n.toProd=function(){j.path("/product")};if(n.viewStates.getShoppingCarState()===false){i.setCountNum(0);n.countNum=0;getOrPostRequestObj.userAndAdminSignIn.isUserLogin(n,p);n.viewStates.setShoppingCarState(true)}else{n.spLists=i.getSpList();m(function(){n.loadingImg()},500);if(n.spLists.length>0){n.editBtn=false}}};rightMenus.$inject=["$scope","$http","$location"];indexModule.controller("rightMenuCtrl",rightMenus);var superProCtrl=function(i,j,f,h){i.bodyHide=true;i.noMoreHide=true;i.loadingHide=false;i.pageNum=2;var g=true;i.$on("$stateChangeStart",function(){h.cancel(i.loadHttp)});i.superOrderRefresh=function(){h(function(){getOrPostRequestObj.superProConnect.superProList(i,j);i.$broadcast("scroll.refreshComplete")},2000)};i.superInit_CallBack=function(a){i.sproDatas=i.superReturnData(a);i.pageNum=2;h(function(){g=false},1000);h(function(){i.loadingImg()},500)};i.superLoadMore_CallBack=function(a){var b=i.superReturnData(a);i.sproDatas.proLeftInfos=i.sproDatas.proLeftInfos.concat(b.proLeftInfos);i.sproDatas.proRightInfos=i.sproDatas.proRightInfos.concat(b.proRightInfos);i.pageNum++;h(function(){g=false},1000);h(function(){i.loadingImg()},500)};i.superLoadMore=function(){if(i.noMoreHide&&g===false){g=true;i.loadHttp=h(function(){getOrPostRequestObj.superProConnect.superProListLoadMore(i,j);i.$broadcast("scroll.infiniteScrollComplete")},2000)}else{i.$broadcast("scroll.infiniteScrollComplete")}};i.superReturnData=function(q){var b,o,c=[],a=[],d=q.respData.dataList;for(var p=0,e=d.length;p<e;p+=2){b={proLeftNum:d[p].prodNum,proLeftImg:privateVerifictionObj.verifiction.imgLink(d[p].firstProdImg),proLeftName:d[p].prodName,proLeftPrice:"¥"+d[p].stdPrice};c.push(b);if(p+1<e){o={proRightNum:d[p+1].prodNum,proRightImg:privateVerifictionObj.verifiction.imgLink(d[p+1].firstProdImg),proRightName:d[p+1].prodName,proRightPrice:"¥"+d[p+1].stdPrice};a.push(o)}}var r={proLeftInfos:c,proRightInfos:a};if(d.length<14){i.noMoreHide=false;i.loadingHide=true}return r};i.proLeftClick=function(b){var a=i.getPerSpCar();i.setPerSpCar(a+4);f.path("/detailed").search({proNum:i.sproDatas.proLeftInfos[b].proLeftNum})};i.proRightClick=function(b){var a=i.getPerSpCar();if(a>0){i.setPerSpCar(a+4)}else{i.setPerSpCar(4)}f.path("/detailed").search({proNum:i.sproDatas.proRightInfos[b].proRightNum})};getOrPostRequestObj.superProConnect.superProList(i,j)};shoppingCarCtrl.$inject=["$scope","$http","shoppingCarService","$ionicPopup","$location","$timeout","$ionicLoading"];var shoppingCararr=["$scope","$http","shoppingCarService","$ionicPopup","$location","$timeout","$ionicLoading",shoppingCarCtrl];indexModule.controller("shoppingCar",shoppingCararr);var userLoginCtrl=function(d,e,f){d.login={};d.loginStyle={"border-bottom":"none","box-shadow":"0 2px 3px rgba(0,0,0,.15)"};d.iuserLogin=function(){getOrPostRequestObj.userAndAdminSignIn.userLogin(d,e,d.login.userName,d.login.userPass);d.login.userPass=""};d.userLoginDone_CallBack=function(a){localStorage.setItem("userName",a+"");publicParameterObj.parameters.userName=localStorage.userName.replace(/\"/g,"");publicEventsObj.operatingDatabaseEvent.crateTable();getOrPostRequestObj.userAndAdminSignIn.userLoginState=true;getOrPostRequestObj.userAndAdminSignIn.testSetJushTagNalias(d,e);d.toPersonal()};d.hideUserLogin=function(){var a=f.url().split("?")[0];switch(a){case"/personal":d.back();break;case"/modifyInfo":case"/modifyPass":case"/superPro":case"/myOrder":case"/waitingAudit":d.back(-2);break;case"/detailed":case"/message":d.pageHide();break;case"/shoppingCar":d.viewStates.setShoppingCarState(false);if(d.perSpCar!==0){d.back(-d.perSpCar)}else{d.back()}break;default:d.back();break}};d.toPersonal=function(){switch(f.url().split("?")[0]){case"/personal":case"/modifyInfo":case"/modifyPass":case"/superPro":case"/myOrder":case"/waitingAudit":case"/shoppingCar":d.pageHide();location.reload();break;case"/detailed":if(getOrPostRequestObj.userAndAdminSignIn.isToShoppingCar===true){f.path("/shoppingCar").search("")}else{d.pageHide()}break;case"/message":if(f.search().page==="editMessage"){d.userLogin.hide();d.editMessageShowHide(false)}else{f.path("/personal")}break;default:f.path("/personal")}};d.userNameFocus=function(){d.nameStyle={color:"#ef575c"}};d.userNameBlur=function(){d.nameStyle={color:"#294775"}};d.userPassFocus=function(){d.passStyle={color:"#ef575c"}};d.userPassBlur=function(){d.passStyle={color:"#294775"}}};superProCtrl.$inject=["$scope","$http","$location","$timeout"];indexModule.controller("superPro",superProCtrl);indexModule.service("modifyInfoService",function(){var j={};var k="未登录";var l="";var i="";var g="";var h="";j.getPerNameInfo=function(){return k};j.setPerNameInfo=function(a){k=a};j.getCompanyInfo=function(){return l};j.setCompanyInfo=function(a){l=a};j.getUserNameInfo=function(){return i};j.setUserNameInfo=function(a){i=a};j.getPhoneInfo=function(){return g};j.setPhoneInfo=function(a){g=a};j.getAddressInfo=function(){return h};j.setAddressInfo=function(a){h=a};return j});var modifyInfoCtrl=function(k,m,j,i,n){k.iInfoName=j.getPerNameInfo();var h={color:"#ef575c"};var l={color:"#294775"};k.modify={userCompany:j.getCompanyInfo(),userName:j.getUserNameInfo(),userPhone:j.getPhoneInfo(),userAddress:j.getAddressInfo()};k.muserCompanyFocus=function(){k.mCompany=h};k.muserCompanyBlur=function(){k.mCompany=l};k.muserNameFocus=function(){k.mName=h};k.muserNameBlur=function(){k.mName=l};k.muserPhoneFocus=function(){k.mPhone=h};k.muserPhoneBlur=function(){k.mPhone=l};k.muserAddressFocus=function(){k.mAddress=h};k.muserAddressBlur=function(){k.mAddress=l};k.userInfoInit_CallBack=function(a){k.iInfoName="用户名: "+a.respData.custName;k.modify.userCompany=a.respData.companyName;k.modify.userName=a.respData.contactPerson;k.modify.userPhone=a.respData.phoneNum;k.modify.userAddress=a.respData.address;k.updateInfo()};k.updateUserInfo=function(){if(k.modify.userCompany===""||k.modify.userCompany===undefined){k.showAlert("提 示","公司名不能为空!")}else{if(k.modify.userName===""||k.modify.userName===undefined){k.showAlert("提 示","联系人不能为空!")}else{if(k.modify.userPhone===""||k.modify.userPhone===undefined){k.showAlert("提 示","手机号码不能为空!")}else{if(privateVerifictionObj.verifiction.iphonever(k.modify.userPhone)===false){k.showAlert("提 示","手机号码格式不正确!")}else{getOrPostRequestObj.registConnect.userUpdateInfo(k,m)}}}}};k.updateUserInfoDone_CallBack=function(){n.show({template:"<div>个人信息修改完成!</div>",delay:100,duration:1000});k.updateInfo();window.history.back()};k.updateInfo=function(){j.setPerNameInfo(k.iInfoName);j.setCompanyInfo(k.modify.userCompany);j.setUserNameInfo(k.modify.userName);j.setPhoneInfo(k.modify.userPhone);j.setAddressInfo(k.modify.userAddress)};if(k.viewStates.getModifyState()===false){i(function(){getOrPostRequestObj.registConnect.userGetInfo(k,m)},450);k.viewStates.setModifyState(true)}};userLoginCtrl.$inject=["$scope","$http","$location"];indexModule.controller("userLoginCtrl",userLoginCtrl);var modifyPassCtrl=function(h,j,f){var g={color:"#ef575c"};var i={color:"#294775"};h.updatePass={};h.oldPassFocus=function(){h.oldPassStyle=g};h.oldPassBlur=function(){h.oldPassStyle=i};h.newPassFocus=function(){h.newPassStyle=g};h.newPassBlur=function(){h.newPassStyle=i};h.newPassCFocus=function(){h.newPassCStyle=g};h.newPassCBlur=function(){h.newPassCStyle=i};h.clearData=function(){h.updatePass.oldPass="";h.updatePass.newPass="";h.updatePass.newPassC=""};h.modifyPassDone=function(){f.show({template:"<div>密码修改成功!</div>",delay:100,duration:1000})};h.modifyPassDone_CallBakc=function(){h.modifyPassDone();window.history.back()};h.sendNewPass=function(){if(privateVerifictionObj.verifiction.isLetterAndNum(h.updatePass.oldPass)===false){h.showAlert("提 示","旧密码输入错误，只能由数字或字母组成!")}else{if(privateVerifictionObj.verifiction.isLetterAndNum(h.updatePass.newPass)===false||h.updatePass.newPass===undefined){h.showAlert("提 示","新密码输入错误，只能由数字或字母组成!")}else{if(h.updatePass.newPass!==h.updatePass.newPassC){h.showAlert("提 示","新密码两次输入不一致!")}else{getOrPostRequestObj.userAndAdminSignIn.userModifyPass(h,j,h.updatePass.oldPass,h.updatePass.newPass)}}}}};modifyInfoCtrl.$inject=["$scope","$http","modifyInfoService","$timeout","$ionicLoading"];var modifyInfoarr=["$scope","$http","modifyInfoService","$timeout","$ionicLoading",modifyInfoCtrl];indexModule.controller("modifyInfo",modifyInfoarr);var waitingAuditCtrl=function(i,j,f,h){i.custName="未登录";i.noMoreHide=true;i.loadingHide=false;i.pageNum=2;var g=true;i.$on("$stateChangeStart",function(){h.cancel(i.loadHttp)});i.userWaitingRefresh=function(){h(function(){getOrPostRequestObj.userWaitingAuditConnect.userShowWaitingList(i,j);i.$broadcast("scroll.refreshComplete")},2000)};i.waOrderInit_CallBack=function(a){i.waoLists=i.waitingAuditRetrunData(a);i.pageNum=2;h(function(){g=false},1000);h(function(){i.loadingImg()},500)};i.waOrderLoadMore_CallBack=function(a){var b=i.waitingAuditRetrunData(a);i.waoLists=i.waoLists.concat(b);i.pageNum++;h(function(){g=false},1000);h(function(){i.loadingImg()},500)};i.isLogin_CallBack=function(a){if(a===true){i.custName=publicParameterObj.parameters.userName}else{i.custName="未登录"}};i.waitingAuditLoadMore=function(){if(i.noMoreHide&&g===false){g=true;i.loadHttp=h(function(){getOrPostRequestObj.userWaitingAuditConnect.userWaitingListLoadMore(i,j);i.$broadcast("scroll.infiniteScrollComplete")},2000)}else{i.$broadcast("scroll.infiniteScrollComplete")}};i.waitingAuditRetrunData=function(t){var z,d=[],a=[],b,y=[],e=[],A=t.respData.dataList,w=true,x=true;for(var v=0,c=A.length;v<c;v++){w=true;x=true;y.push({orderItem:"产品总数: "+A[v].origOrderItemList.length});y.push({orderItem:"成交总价: "+A[v].priceTotal});y.push({orderItem:"下单日期: "+A[v].createDate});for(var B=0,u=A[v].origOrderItemList.length;B<u;B++){b={proId:A[v].origOrderItemList[B].prodNum,proImg:privateVerifictionObj.verifiction.imgLink(A[v].origOrderItemList[B].whereimg),proName:A[v].origOrderItemList[B].prodName,proNum:"订购数量 : "+A[v].origOrderItemList[B].cases,proPrice:"¥"+A[v].origOrderItemList[B].prodPrice};if(B<3){d.push(b)}else{w=true;x=false;a.push(b)}b={}}z={waorderId:A[v].origOrderNum,isProHide:w,isHide:x,waoItems:y,waoPros:d,date:A[v].createDate,waiCountNum:a.length+d.length,waoHidePro:a,waiCountPrice:"¥"+A[v].priceTotal,btnText:"显示全部"};e.push(z);y=[];d=[];a=[]}if(A.length<9){i.noMoreHide=false;i.loadingHide=true}return e};i.toDetailed=function(b){var a=i.getPerSpCar()+4;i.setPerSpCar(a);f.path("/detailed").search({proNum:b})};i.hideShowPro=function(a){i.waoLists[a].isProHide=!i.waoLists[a].isProHide;i.waoLists[a].isProHide?i.waoLists[a].btnText="显示全部":i.waoLists[a].btnText="隐藏部分"};h(function(){getOrPostRequestObj.userAndAdminSignIn.isUserLogin(i,j)},450);getOrPostRequestObj.userWaitingAuditConnect.userShowWaitingList(i,j)};modifyPassCtrl.$inject=["$scope","$http","$ionicLoading"];indexModule.controller("modifyPass",modifyPassCtrl);waitingAuditCtrl.$inject=["$scope","$http","$location","$timeout"];indexModule.controller("waitingAudit",waitingAuditCtrl);
