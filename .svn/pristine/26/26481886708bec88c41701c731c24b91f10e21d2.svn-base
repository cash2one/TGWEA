var mobileEvt={webpage_mobile:function(a){var b=window.open(a.url,"_blank","location=yes,closebuttoncaption=关闭,transitionstyle=crossdissolve,presentationstyle=pagesheet");b.addEventListener("loaderror",function(c){a.showAlert("提 示","error: "+c.message)})}};var operatingDatabaseEvent={crateTable:function(){if(localStorage.getItem(publicParameterObj.parameters.userName)==undefined){var a=[];localStorage.setItem(publicParameterObj.parameters.userName,JSON.stringify(a))}else{}},insertData:function(e,c,b){var d=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));var g=d.length;for(var a=0,f=d.length;a<f;a++){if(d[a].myid==e){b.showAlert("提 示","这件商品已存在购物车中!");return}}d.push({myid:e,mynumber:c});localStorage.setItem(publicParameterObj.parameters.userName,JSON.stringify(d));if(d.length>g){b.viewStates.setShoppingCarState(false);b.showAlert("提 示","添加成功!")}else{b.showAlert("提 示","添加失败!")}},selectData:function(){var a=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));return a},updateData:function(d,b){var c=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));for(var a=0,e=c.length;a<e;a++){if(c[a].myid===d){if(c[a].mynumber!=b){c[a].mynumber=b;localStorage.setItem(publicParameterObj.parameters.userName,JSON.stringify(c));return}return}}},deleteItemData:function(b){var a=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));for(var d=0,c=a.length;d<c;d++){if(a[d].myid===b){a.splice(d,1);localStorage.setItem(publicParameterObj.parameters.userName,JSON.stringify(a));return}}},deleteallData:function(){localStorage.removeItem(publicParameterObj.parameters.userName);publicEventsObj.operatingDatabaseEvent.crateTable()}};var publicEventsClass={mobileEvent:Object.create(mobileEvt),operatingDatabaseEvent:Object.create(operatingDatabaseEvent)};var publicEventsObj=Object.create(publicEventsClass);var indexModule=angular.module("ionicApp",["ionic"]);var iconfig=function(b,a){publicEventsObj.operatingDatabaseEvent.crateTable();b.state("index",{url:"/index",templateUrl:"index.html",controller:"index"}).state("product",{url:"/product",templateUrl:"product.html",controller:"product"}).state("proList",{url:"/proList",templateUrl:"proList.html",controller:"proList"}).state("about",{url:"/about",templateUrl:"about.html",controller:"about"}).state("contact",{url:"/contact",templateUrl:"contact.html",controller:"contact"}).state("detailed",{url:"/detailed",templateUrl:"detailed.html",controller:"detailed"}).state("message",{url:"/message",templateUrl:"message.html",controller:"message"}).state("category",{url:"/category",templateUrl:"category.html",controller:"category"}).state("searchRes",{url:"/searchRes",templateUrl:"proSearchResList.html",controller:"searchRes"}).state("shoppingCar",{url:"/shoppingCar",templateUrl:"shoppingCar.html",controller:"shoppingCar"}).state("personal",{url:"/personal",templateUrl:"personal.html",controller:"personal"}).state("modifyPass",{url:"/modifyPass",templateUrl:"userModifyPass.html",controller:"modifyPass"}).state("modifyInfo",{url:"/modifyInfo",templateUrl:"userModifyInfo.html",controller:"modifyInfo"}).state("waitingAudit",{url:"/waitingAudit",templateUrl:"userWaitingAudit.html",controller:"waitingAudit"}).state("myOrder",{url:"/myOrder",templateUrl:"myOrder.html",controller:"myOrder"}).state("superPro",{url:"/superPro",templateUrl:"superPro.html",controller:"superPro"});a.otherwise("/index")};var imainCtrl=function(p,w,e,s,f,u,b,j){p.cancelHide=false;p.acancelHide=false;p.abackHide=true;p.tabHide=true;p.tabBarHide=false;p.search={};p.navStyle={"border-bottom":"none","box-shadow":"0 2px 3px rgba(0,0,0,.15)"};p.sendMessageIsLogin=true;p.iMessageDatas="";p.indexIsShow=false;p.proIsShow=false;p.categoryIsShow=false;p.shoppingCarIsShow=false;if(localStorage.getItem("perSpCar")==undefined){localStorage.setItem("perSpCar",0)}p.perSpCar=localStorage.getItem("perSpCar")>>0;p.viewStates={};p.iState=false;var r=false;var a=false;var y=false;var q=false;var c=false;var g=false;var k=false;var n=false;var v=false;var i=false;var h=false;var A=false;var t=false;var l=false;var o=false;var x=false;var m=false;var z=false;var d=false;p.viewStates.getIndexState=function(){return r};p.viewStates.setIndexState=function(B){r=B};p.viewStates.getProductState=function(){return a};p.viewStates.setProductState=function(B){a=B};p.viewStates.getProListState=function(){return y};p.viewStates.setProListState=function(B){y=B};p.viewStates.getAboutState=function(){return q};p.viewStates.setAboutState=function(B){q=B};p.viewStates.getContactState=function(){return c};p.viewStates.setContactState=function(B){c=B};p.viewStates.getMessageState=function(){return g};p.viewStates.setMessageState=function(B){g=B};p.viewStates.getShoppingCarState=function(){return v};p.viewStates.setShoppingCarState=function(B){v=B};p.viewStates.getCategoryState=function(){return k};p.viewStates.setCategoryState=function(B){k=B};p.viewStates.getSearchResListState=function(){return n};p.viewStates.setSearchResListState=function(B){n=B};p.viewStates.getPersonalState=function(){return i};p.viewStates.setPersonalState=function(B){i=B};p.viewStates.getModifyState=function(){return h};p.viewStates.setModifyState=function(B){h=B};p.viewStates.getMyOrderState=function(){return A};p.viewStates.setMyOrderState=function(B){A=B};p.viewStates.getSuperProState=function(){return t};p.viewStates.setSuperProState=function(B){t=B};p.viewStates.getWaitingState=function(){return l};p.viewStates.setWaitingState=function(B){l=B};p.viewStates.getAdmMenuState=function(){return o};p.viewStates.setAdmMenuState=function(B){o=B};p.viewStates.getAdmSelOrderState=function(){return x};p.viewStates.setAdmSelOrderState=function(B){x=B};p.viewStates.getAdmProManageState=function(){return m};p.viewStates.setAdmProManageState=function(B){m=B};p.viewStates.getAdmClientState=function(){return z};p.viewStates.setAdmClientState=function(B){z=B};p.viewStates.getHistoryOrderState=function(){return d};p.viewStates.setHistoryOrderState=function(B){d=B};getOrPostRequestObj.detailedConnect.isCom(p,w);p.showAlert=function(C,B){f.alert({title:C,content:B,buttons:[{text:"确 定",type:"alertCancel"}]}).then(function(D){})};p.backdropClick=function(){p.closeBackdrop()};p.tabBarToPage=function(D){p.isSpNewPage=false;switch(D){case 0:if(p.indexIsShow===false){if(p.perSpCar!=0){var B=p.perSpCar+p.getIsIndex()+p.getIsDetailed()+p.getCategory()+p.getProduct();p.back(-B)}else{if(p.getIsIndex()>0||p.getIsDetailed()>0){var C=p.perSpCar+p.getIsIndex()+p.getIsDetailed()+p.getCategory()+p.getProduct();p.back(-C)}else{e.path("/index").replace()}}}break;case 1:if(p.proIsShow===false){p.setIState(true);if(p.isIndex===true){e.path("/product");p.setIsIndex(1)}else{if(p.perSpCar>0&&p.getProduct()===0){e.path("/product");p.setProduct(1)}else{if(p.getProduct()===1){window.history.go(-1);p.setCategory(0);p.setProduct(1)}else{e.path("/product").replace()}}}}break;case 2:if(p.categoryIsShow===false){p.setIState(true);if(p.isIndex===true){e.path("/category");p.setIsIndex(1)}else{if(p.perSpCar>0&&p.getCategory()===0){e.path("/category");p.setCategory(1)}else{if(p.getCategory()===1){window.history.go(-1);p.setCategory(1);p.setProduct(0)}else{e.path("/category").replace()}}}}break;case 3:if(p.shoppingCarIsShow===false){if(p.isIndex===true){e.path("/shoppingCar");p.setIsIndex(1)}else{if(p.getCategory()!==0||p.getProduct()!==0){window.history.go(-(p.getCategory()+p.getProduct()));if(p.getCategory()===1){p.setCategory(0)}if(p.getProduct()===1){p.setProduct(0)}}else{e.path("/shoppingCar").replace()}}}break}};p.setPerSpCar=function(B){p.perSpCar=B;localStorage.setItem("perSpCar",B)};p.getPerSpCar=function(){var B=localStorage.getItem("perSpCar");B=!!B?parseInt(B):!!B;p.perSpCar=B;return p.perSpCar};p.setIsIndex=function(B){localStorage.setItem("isIndex",B)};p.getIsIndex=function(){var B=localStorage.getItem("isIndex");return !!B?parseInt(B):!!B};p.setIsDetailed=function(C){if(C==0){localStorage.setItem("isDetailed",C)}else{if(p.getIsDetailed()!==undefined&&p.getIsDetailed()>0&&p.getIsDetailed()!==null){var B=parseInt(p.getIsDetailed())+parseInt(C);localStorage.setItem("isDetailed",B)}else{localStorage.setItem("isDetailed",C)}}};p.getIsDetailed=function(){var B=localStorage.getItem("isDetailed");return !!B?parseInt(B):!!B};p.setCategory=function(B){localStorage.setItem("isCategory",B)};p.getCategory=function(){var B=localStorage.getItem("isCategory");return !!B?parseInt(B):!!B};p.setProduct=function(B){localStorage.setItem("isProduct",B)};p.getProduct=function(){var B=localStorage.getItem("isProduct");return !!B?parseInt(B):!!B};p.OpenMenus=function(){j.retain();p.openMenu=true};p.toPerson=function(){p.closeBackdrop()};p.closeBackdrop=function(){j.release();p.openMenu=false;p.closeMenu=true};p.getMessage=function(){return p.iMessageDatas};p.setMessage=function(B){p.iMessageDatas=B};p.getIState=function(){return p.iState};p.setIState=function(B){p.iState=B};p.back=function(B){if(B!==undefined&&B!==null&&B!=0){window.history.go(B);if(p.perSpCar>2){var C=p.perSpCar+B;p.setPerSpCar(C)}}else{if(p.perSpCar>0&&B!=0){var D=p.perSpCar-1;p.setPerSpCar(D)}window.history.back()}};p.admLoginLode=function(){s(function(){p.adminLoginShowHide(true)},500)};p.userLoginLoad=function(){s(function(){p.userLoginShowHide(true)},500)};p.pageHide=function(){if(p.userLogin){p.userLoginShowHide(false)}if(p.iregister){p.userRegisterShowHide(false)}};p.$on("$stateChangeStart",function(){publicParameterObj.parameters.loadingPage=0;p.isIndex=e.url().split("?")[0]==="/index";p.indexIsShow=false;p.proIsShow=false;p.categoryIsShow=false;p.shoppingCarIsShow=false;p.navBarIsHide=false;var B=e.url().split("?")[0];p.isSpNewPage=true;if(B==="/index"||B==="/category"||B==="/shoppingCar"||B==="/product"||B==="/proList"){if(B==="/index"){p.setPerSpCar(0);p.setIsIndex(0);p.setIsDetailed(0);p.setProduct(0);p.setCategory(0)}if(B==="/category"){p.navBarIsHide=true}if(p.tabBarHide){s(function(){p.tabBarHide=false},300)}}else{if(B==="/personal"){p.tabBarHide=true}else{p.tabBarHide=true}}if(p.openMenu===true){p.toPerson()}p.pageHide();if(p.adminLogin){p.adminLoginShowHide(false)}});p.toAdminMenu=function(){p.closeBackdrop();e.path("/adminMenu")};p.toPersonal=function(){if(p.perSpCar!==0){p.back(-(p.perSpCar+p.getProduct()+p.getCategory()-1));p.setPerSpCar(0);p.setProduct(0);p.setCategory(0)}else{e.path("/personal")}};p.indexBarIconState=function(){p.indexIsShow=!p.indexIsShow};p.proBarIconState=function(){p.proIsShow=!p.proIsShow};p.categoryBarIconState=function(){p.categoryIsShow=!p.categoryIsShow};p.shoppingCarIconState=function(){p.shoppingCarIsShow=!p.shoppingCarIsShow};b.fromTemplateUrl("userLogin.html",function(B){p.userLogin=B},{scope:p,animation:"slide-in-up"});b.fromTemplateUrl("register.html",function(B){p.iregister=B},{scope:p,animation:"slide-in-up"});b.fromTemplateUrl("adminLogin.html",function(B){p.adminLogin=B},{scope:p,animation:"slide-in-up"});b.fromTemplateUrl("editMessage.html",function(B){p.editContent=B},{scope:p,animation:"slide-in-up"});p.userLoginShowHide=function(B){B?p.userLogin.show():p.userLogin.hide()};p.userRegisterShowHide=function(B){B?p.iregister.show():p.iregister.hide()};p.adminLoginShowHide=function(B){B?p.adminLogin.show():p.adminLogin.hide()};p.editMessageShowHide=function(B){if(B===true){getOrPostRequestObj.userAndAdminSignIn.isUserLogin(p,w);e.search({page:"editMessage"}).replace();p.editContent.show()}else{e.search("").replace();p.editContent.hide()}};p.getSendMessageState=function(){return p.sendMessageIsLogin};p.isLogin_CallBack=function(B){p.sendMessageIsLogin=!!B};p.loadingImg=function(){function C(){return window.navigator.userAgent.toLowerCase().indexOf("msie")>=1}var B=C();(function(){var J=$$("mainContent");if(J!==undefined&&J!==null&&J.getElementsByTagName("img")!==undefined&&J.getElementsByTagName("img")!==null){var I=J.getElementsByTagName("img").length,F=[];for(var H=0,K=I;H<K;H++){var E=J.getElementsByTagName("img")[H];if(E){E.setAttribute("_lazysrc",E.getAttribute("_lazysrc")+"?"+Math.random());F.push(E)}}var G=new ImagesLazyLoad({container:window,mode:"vertical",holder:"img/nopic.jpg",onLoad:function(L){L.onload=function(){D(this)}}});function D(M){var L=setInterval(function(){var N=B?M.filters.alpha.opacity:M.style.opacity*100;if(N<100){B?M.filters.alpha.opacity+=10:M.style.opacity=(N+10)/100}else{clearInterval(L)}},15)}}})()}};iconfig.$inject=["$stateProvider","$urlRouterProvider"];indexModule.config(iconfig);indexModule.service("indexService",function(){var a={};var f=[];var c=[];var b=true;var e=true;var m=true;var g=false;var r=1;var d={};a.getMoreHide=function(){return m};a.setMoreHide=function(h){m=h};a.getLoadingHide=function(){return g};a.setLoadingHide=function(h){g=h};a.getPageNum=function(){return r};a.setPageNum=function(h){r=h};a.getProData=function(){return d};a.setProData=function(h){d=h};a.getSlider=function(){return f};a.setSlider=function(h){f=h};a.getNewProData=function(){return c};a.setNewProData=function(h){c=h};a.getNewProHide=function(){return b};a.setNewProHide=function(h){b=h};a.getProBtnHide=function(){return e};a.setProBtnHide=function(h){e=h};return a});var indexCtrl=function(e,a,c,h,k){e.newProIsHide=c.getNewProHide();e.proBtnHide=c.getProBtnHide();e.myInterval=5000;e.bodyHide=true;e.detailedId="";e.setPerSpCar(0);e.bodyHide=true;e.noMoreHide=c.getMoreHide();e.loadingHide=c.getLoadingHide();e.pageNum=c.getPageNum();var l=true;e.indexBarIconState();e.$on("$stateChangeStart",function(){h.cancel(e.loadHttp)});e.indexRefresh=function(){h(function(){getOrPostRequestObj.indexConnect.getIndexBanner(e,a);getOrPostRequestObj.indexConnect.getIndexNewProduct(e,a);e.proRefresh();e.$broadcast("scroll.refreshComplete")},2000)};e.bannerInit_CallBack=function(p){c.setSlider(e.bannerReturnData(p));var t=c.getSlider();var u=[];if(document.querySelector("#indexSwiperView").querySelector("ul")){var o=document.getElementById("indexSwiperView");o.removeChild(o.getElementsByTagName("ul").item(1))}document.getElementById("indexSwiper").innerHTML="";for(var q=0,r=t.length;q<r;q++){u.push({content:"<div class='bannerImg'><img src='"+t[q].iSlideImg+"' onerror=this.src=errImg></div>"})}var n={type:"dom",data:u,dom:document.getElementById("indexSwiper"),duration:3000,isLooping:true,isAutoplay:true,onslidechange:function(v){s.changeIndexDot()}};if(t.length>0){var s=new iSlider(n);var i={top:"105px",width:"100%",diameter:"0.8em",borderColor:"#365b88"};s.renderDot(i)}};e.toBannerDetailed=function(i){if(e.islides[i].isToUrl===0){try{window.device.version.substr(0,1);publicEventsObj.mobileEvent.webpage_mobile(e.islides[i].content)}catch(n){window.open(e.islides[i].content)}}else{e.showDetailed(e.islides[i].content)}};e.bannerReturnData=function(n){var p=[];var i=n.respData;var o={};for(var r=0,q=i.length;r<q;r++){o={iSlideImg:privateVerifictionObj.verifiction.imgLink(i[r].imgUrl),isToUrl:i[r].linkType,content:i[r].linkContent};p.push(o)}return p};e.newProInit_CallBack=function(i){c.setNewProData(e.newProReturnData(i));e.newProDatas=c.getNewProData();e.newProDatas.length===0?c.setNewProHide(true):c.setNewProHide(false);e.newProIsHide=c.getNewProHide();e.proBtnHide=false;c.setProBtnHide(false);h(function(){e.loadingImg()},500)};e.newProReturnData=function(i){var s=i.respData.dataList;var p;var n=[];var o=[];var r=[];var q=s.length;for(var t=0;t<q;t++){o.push({newProNum:s[t].prodNum,newProImg:privateVerifictionObj.verifiction.imgLink(s[t].firstProdImg)});if(t===1||q<2){r=o;o=[]}else{if((t-1)%3===0||t!==0&&t===q-1&&(q-2)%3!==0){n.push(o);o=[]}}}p={newIndexImgs:r,newProImgs:n};return p};e.morePro=function(){k.path("/product")};e.aboutBack=function(){if(k.url()==="/contact"){window.history.back(-1)}};e.showDetailed=function(i){if(i){k.path("/detailed").search({proNum:i,dNum:2})}};if(e.viewStates.getIndexState()===false){getOrPostRequestObj.indexConnect.getIndexBanner(e,a);getOrPostRequestObj.indexConnect.getIndexNewProduct(e,a);getOrPostRequestObj.productConnect.getProduct(e,a);e.viewStates.setIndexState(true)}else{e.newProDatas=c.getNewProData();var b=c.getSlider();var d=[];for(var j=0,l=b.length;j<l;j++){d.push({content:"<div class='bannerImg' ><img src='"+b[j].iSlideImg+"' onerror=this.src=errImg></div>"})}var g={type:"dom",data:d,dom:document.getElementById("indexSwiper"),duration:3000,isLooping:true,isDebug:false,isAutoplay:true,onslidechange:function(i){m.changeIndexDot()}};if(b.length>0){var m=new iSlider(g);var f={top:"105px",width:"100%",diameter:"0.8em",borderColor:"#00407a"};m.renderDot(f)}e.proDatas=c.getProData();l=false;h(function(){e.loadingImg()},500)}e.productInit_CallBack=function(i){c.setProData(e.productReturnData(i));e.proDatas=c.getProData();e.pageNum=2;c.setPageNum(2);h(function(){l=false},1000);h(function(){e.loadingImg()},500)};e.productLoadMore_CallBack=function(n){var i=e.productReturnData(n);e.proDatas.proLeftInfos=e.proDatas.proLeftInfos.concat(i.proLeftInfos);e.proDatas.proRightInfos=e.proDatas.proRightInfos.concat(i.proRightInfos);c.setProData(e.proDatas);e.pageNum++;c.setPageNum(e.pageNum);h(function(){l=false},1000);h(function(){e.loadingImg()},500)};e.productLoadMore=function(){if(e.noMoreHide&&l===false){l=true;e.loadHttp=h(function(){getOrPostRequestObj.productConnect.getProductMore(e,a);e.$broadcast("scroll.infiniteScrollComplete")},2000)}else{e.$broadcast("scroll.infiniteScrollComplete")}};e.proRefresh=function(){getOrPostRequestObj.productConnect.getProduct(e,a);e.noMoreHide=true;e.loadingHide=false;c.setMoreHide(true);c.setLoadingHide(false);e.pageNum=1;c.setPageNum(1)};e.productReturnData=function(q){var i,q,t=[],n=[],s=q.respData.dataList;for(var p=0,r=s.length;p<r;p+=2){i={proLeftNum:s[p].prodNum,proLeftImg:privateVerifictionObj.verifiction.imgLink(s[p].firstProdImg),proLeftName:s[p].prodName,proLeftPrice:"¥"+s[p].stdPrice};t.push(i);if(p+1<r){q={proRightNum:s[p+1].prodNum,proRightImg:privateVerifictionObj.verifiction.imgLink(s[p+1].firstProdImg),proRightName:s[p+1].prodName,proRightPrice:"¥"+s[p+1].stdPrice};n.push(q)}}var o={proLeftInfos:t,proRightInfos:n};if(s.length<14){e.noMoreHide=false;e.loadingHide=true;c.setMoreHide(false);c.setLoadingHide(true)}return o};e.proLeftClick=function(i){k.path("/detailed").search({proNum:e.proDatas.proLeftInfos[i].proLeftNum,dNum:2})};e.proRightClick=function(i){k.path("/detailed").search({proNum:e.proDatas.proRightInfos[i].proRightNum,dNum:2})}};imainCtrl.$inject=["$scope","$http","$location","$timeout","$ionicPopup","$ionicPopover","$ionicModal","$ionicBackdrop"];indexModule.controller("mainCtrl",imainCtrl);indexModule.service("aboutService",function(){var b={};var a="";var c="";b.getAboutImg=function(){return a};b.setAboutImg=function(d){a=d};b.getAboutText=function(){return c};b.setAboutText=function(d){c=d};return b});var aboutCtrt=function(c,b,a,d){c.aboutInit_CallBack=function(f){var e=c.aboutReturnData(f);c.iAboutImg=e.img;c.iAboutText=e.contentText;a.setAboutImg(e.img);a.setAboutText(e.contentText);d(function(){c.loadingImg()},500)};c.aboutReturnData=function(e){var j=e.respData,g="",f=j.introduction.replace(/\./g,"。").split("。");for(var h=0,k=f.length;h<k;h++){g+="<p>"+f[h]+"</p>"}return{contentText:g,img:privateVerifictionObj.verifiction.imgLink(j.ownerImg)}};if(c.viewStates.getAboutState()===false){getOrPostRequestObj.orderInfoConnect.getAboutInfo(c,b);c.viewStates.setAboutState(true)}else{c.iAboutImg=a.getAboutImg();c.iAboutText=a.getAboutText()}};indexCtrl.$inject=["$scope","$http","indexService","$timeout","$location"];var indexCtrlarr=["$scope","$http","indexService","$timeout","$location",indexCtrl];indexModule.controller("index",indexCtrlarr);indexModule.service("admClientService",function(){var b={};var a=false;var c=true;var g=true;var e=false;var h="";var f="";var d=2;b.getNameClick=function(){return a};b.setNameClick=function(i){a=i};b.getPhoneClick=function(){return c};b.setPhoneClick=function(i){c=i};b.getMoreHide=function(){return g};b.setMoreHide=function(i){g=i};b.getLoadingHide=function(){return e};b.setLoadingHide=function(i){e=i};b.getSearchKey=function(){return h};b.setSearchKey=function(i){h=i};b.getClients=function(){return f};b.setClients=function(i){f=i};b.getPageNum=function(){return d};b.setPageNum=function(i){d=i};return b});var adminClientCtrl=function(f,e,g,d,a){f.keyColor="keyColor-link";f.keyColors="keyColor-active";f.isNameClick=g.getNameClick();f.isPhoneClick=g.getPhoneClick();f.noMoreHide=g.getMoreHide();f.loadingHide=g.getLoadingHide();f.clientSearchEvt=null;f.pageNum=g.getPageNum();f.aClient={searchKey:g.getSearchKey()};var c=g.getSearchKey();var b=true;f.$on("$stateChangeStart",function(){a.cancel(f.loadHttp)});f.adminClientInit_CallBack=function(h){g.setClients(f.adminClientReturnData(h));f.iClients=g.getClients();f.pageNum=2;g.setPageNum(2);a(function(){b=false},1000)};f.adminClientLoadMore_CallBack=function(i){var h=f.adminClientReturnData(i);f.iClients=f.iClients.concat(h);g.setClients(f.iClients);f.pageNum++;g.setPageNum(f.pageNum);a(function(){b=false},1000)};f.adminClientLoadMore=function(){if(f.noMoreHide&&b===false){b=true;f.loadHttp=a(function(){getOrPostRequestObj.adminClientSearchConnect.adminUserInfoLoadMore(f,e);f.$broadcast("scroll.infiniteScrollComplete")},2000)}else{f.$broadcast("scroll.infiniteScrollComplete")}};f.adminClientReturnData=function(h){if(h.respData.dataList.length<9){f.noMoreHide=false;f.loadingHide=true;g.setMoreHide(false);g.setLoadingHide(true)}return h.respData.dataList};f.searchTextChange=function(){g.setSearchKey(f.aClient.searchKey)};f.searchUser=function(){if(c!==f.aClient.searchKey){getOrPostRequestObj.adminClientSearchConnect.searchName="";getOrPostRequestObj.adminClientSearchConnect.searchPhone="";f.pageNum=1;g.setPageNum(1);f.noMoreHide=true;f.loadingHide=false;if(f.isNameClick===false){getOrPostRequestObj.adminClientSearchConnect.searchName=f.aClient.searchKey}else{if(f.isPhoneClick===false){getOrPostRequestObj.adminClientSearchConnect.searchPhone=f.aClient.searchKey}}getOrPostRequestObj.adminClientSearchConnect.adminSearchUserInfo(f,e);b=true}c=f.aClient.searchKey};f.clickKey=function(h){f.isNameClick=true;f.isPhoneClick=true;switch(h){case 1:f.isNameClick=!f.isNameClick;break;case 2:f.isPhoneClick=!f.isPhoneClick;break;default:break}g.setNameClick(f.isNameClick);g.setPhoneClick(f.isPhoneClick)};f.searchUserOrder=function(h){f.viewStates.setHistoryOrderState(false);d.path("/historyOrder").search({custNum:f.iClients[h].custNum,custName:f.iClients[h].companyName})};if(f.viewStates.getAdmClientState()===false){getOrPostRequestObj.adminClientSearchConnect.adminSearchUserInfo(f,e);f.viewStates.setAdmClientState(true)}else{f.iClients=g.getClients();b=false}};aboutCtrt.$inject=["$scope","$http","aboutService","$timeout"];var aboutCtrlarr=["$scope","$http","aboutService","$timeout",aboutCtrt];indexModule.controller("about",aboutCtrlarr);var adminLoginCtrl=function(a,c,b){a.cancelHide=false;a.backHide=true;a.alogin={};a.adminloginStyle={"border-bottom":"none","box-shadow":"0 2px 3px rgba(0,0,0,.15)"};a.adminNameFocus=function(){a.anameStyle={color:"#ef575c"}};a.adminNameBlur=function(){a.anameStyle={color:"#294775"}};a.adminPassFocus=function(){a.apassStyle={color:"#ef575c"}};a.adminPassBlur=function(){a.apassStyle={color:"#294775"}};a.hideAdminLogin=function(){var d=b.url().split("?")[0];switch(d){case"/adminMenu":a.back();break;case"/adminModifyPass":case"/adminClient":case"/adminSelectOrder":case"/adminProManage":a.back(-2);break;case"/adminOrderInfo":case"/historyOrder":a.back(-3);break;default:a.adminLoginShowHide(false)}};a.toAdminMenu=function(){switch(b.url().split("?")[0]){case"/adminMenu":case"/adminModifyPass":case"/adminClient":case"/adminSelectOrder":case"/adminProManage":case"/adminOrderInfo":location.reload();break;default:b.path("/adminMenu");break}};a.adminLoginBtnEvt=function(){if(a.alogin.adminName===""||a.alogin.adminName===undefined){a.showAlert("提 示","账号不能为空!")}else{if(a.alogin.adminPass===""||a.alogin.adminPass===undefined){a.showAlert("提 示","密码不能为空!")}else{getOrPostRequestObj.userAndAdminSignIn.adminLogin(a,c)}}};a.adminLoginDone_CallBack=function(){a.toAdminMenu();a.alogin.adminPass=""}};adminClientCtrl.$inject=["$scope","$http","admClientService","$location","$timeout"];var adminClientarr=["$scope","$http","admClientService","$location","$timeout",adminClientCtrl];indexModule.controller("adminClient",adminClientarr);indexModule.service("adminMenuService",function(){var a={};var c="未登录";var b="";a.getCompany=function(){return c;0};a.setCompany=function(d){c=d};a.getName=function(){return b};a.setName=function(d){b=d};return a});var adminMenuCtrl=function(a,f,e,c,d,b){a.adminCompany=e.getCompany();a.adminName=e.getName();a.showConfirm=function(){c.confirm({title:"提 示",content:"您确定要退出登录吗?",buttons:[{text:"取 消",type:"alertCancel",onTap:function(g){return false}},{text:"确 定",type:"alertComfirm",onTap:function(g){return true}}]}).then(function(g){if(g){getOrPostRequestObj.userAndAdminSignIn.adminLoginOut(a,f);a.viewStates.setAdmMenuState(false);e.setCompany("未登录");e.setName("")}else{}})};a.adminInfo_CallBack=function(g){a.adminCompany=g.respData.companyName;a.adminName=g.respData.adminName;e.setCompany(g.respData.companyName);e.setName(g.respData.adminName);a.viewStates.setAdmMenuState(true)};a.adminOutLogin=function(){a.showConfirm()};a.admList=function(g){switch(g){case 0:d.path("/adminSelectOrder");break;case 1:d.path("/adminProManage");break;case 2:d.path("/adminClient");break;case 3:d.path("/adminModifyPass");break}};if(a.viewStates.getAdmMenuState()===false){b(function(){getOrPostRequestObj.adminInfoConnect.getAdminInfo(a,f)},500)}};adminLoginCtrl.$inject=["$scope","$http","$location"];indexModule.controller("adminLoginCtrl",adminLoginCtrl);var adminModifyPassCtrl=function(a,d,c){var b={color:"#ef575c"};var e={color:"#294775"};a.aupdatePass={};a.aoldPassFocus=function(){a.aoldPassStyle=b};a.aoldPassBlur=function(){a.aoldPassStyle=e};a.anewPassFocus=function(){a.anewPassStyle=b};a.anewPassBlur=function(){a.anewPassStyle=e};a.anewPassCFocus=function(){a.anewPassCStyle=b};a.anewPassCBlur=function(){a.anewPassCStyle=e};a.clearData=function(){a.aupdatePass.oldPass="";a.aupdatePass.newPass="";a.aupdatePass.newPassC=""};a.amodifyPassDone=function(){c.show({template:"<div>密码修改成功!</div>",delay:100,duration:1000})};a.amodifyPassDone_CallBack=function(){a.amodifyPassDone();window.history.back()};a.asendNewPass=function(){if(privateVerifictionObj.verifiction.isLetterAndNum(a.aupdatePass.oldPass)===false){a.showAlert("提 示","旧密码输入错误，只能由数字或字母组成!")}else{if(privateVerifictionObj.verifiction.isLetterAndNum(a.aupdatePass.newPass)===false||a.aupdatePass.newPass===undefined){a.showAlert("提 示","新密码输入错误，只能由数字或字母组成!")}else{if(a.aupdatePass.newPass!==a.aupdatePass.newPassC){a.showAlert("提 示","新密码两次输入不一致!")}else{getOrPostRequestObj.userAndAdminSignIn.isAdminLegality(a,d,a.aupdatePass.oldPass,a.aupdatePass.newPass)}}}}};adminMenuCtrl.$inject=["$scope","$http","adminMenuService","$ionicPopup","$location","$timeout"];var adminMenuCtrlarr=["$scope","$http","adminMenuService","$ionicPopup","$location","$timeout",adminMenuCtrl];indexModule.controller("adminMenu",adminMenuCtrlarr);var adminOrderInfoCtrl=function(c,b,a,d){c.iOrderId=a.search().orderId;c.toDetailed=function(e){a.path("/detailed").search({proNum:e,hisPage:1})};c.aOrderInfoInit_CallBack=function(h){var i=[],l={},g=[],f;for(var e=0,k=h.orderItemList.length;e<k;e++){l={proId:h.orderItemList[e].prodNum,img:privateVerifictionObj.verifiction.imgLink(h.orderItemList[e].whereimg),name:h.orderItemList[e].prodName,num:"订购数量 : "+h.orderItemList[e].cases,price:"¥"+h.orderItemList[e].custProdPrice};g.push(l)}f={orderNum:h.orderNum,userName:h.custName,proCount:h.orderItemList.length,proPrices:"¥"+h.custPriceTotal,cashState:h.cashStatusName,cashType:h.cashTypeName,deliveryState:h.deliverStatusName,date:h.createDate,iPros:g};i.push(f);c.aOrderInfos=i;d(function(){c.loadingImg()},500)};getOrPostRequestObj.adminSelectOrderConnect.adminGetOrderInfo(c,b)};adminModifyPassCtrl.$inject=["$scope","$http","$ionicLoading"];indexModule.controller("adminModifyPass",adminModifyPassCtrl);indexModule.service("admProManageService",function(){var f={};var c="";var b={};var e=true;var a=false;var d="";var g=2;f.getSearchText=function(){return c};f.setSearchText=function(h){c=h};f.getData=function(){return b};f.setData=function(h){b=h};f.getMoreHide=function(){return e};f.setMoreHide=function(h){e=h};f.getLoadingHide=function(){return a};f.setLoadingHide=function(h){a=h};f.getaEditPros=function(){return d};f.setaEditPros=function(h){d=h};f.getPageNum=function(){return g};f.setPageNum=function(h){g=h};return f});var adminProManageCtrl=function(b,a,e,h,g,c){b.aProManage={searchVal:e.getSearchText()};b.iProId="";b.iProVlaue="";b.pricePrompt="";b.numPrompt="";b.index=0;b.data=e.getData();b.noMoreHide=e.getMoreHide();b.loadingHide=e.getLoadingHide();b.manageSearchEvt=null;b.pageNum=e.getPageNum();var d=e.getSearchText();var f=true;b.$on("$stateChangeStart",function(){c.cancel(b.loadHttp)});b.toDetailed=function(i){h.path("/detailed").search({proNum:i,hisPage:1})};b.updatePrice=function(i){b.index=i;b.data.price=b.aEditPros[i].price.replace("¥","");g.prompt({title:"修改产品价格",template:"<div class='item-input-inset alertInputView'><label class='item-input-wrapper alertInput'><input ng-model='data.price' type='text' class='ng-pristine ng-valid text-center'></label></div><h3 class='text-center assertive errText' ng-bind='pricePrompt'></h3>",scope:b,buttons:[{text:"取 消",type:"alertCancel",onTap:function(j){return false}},{text:"确 定",type:"alertComfirm",onTap:function(j){if(b.data.price===""||b.data.price===undefined){b.pricePrompt="价格不能为空!";j.preventDefault()}else{if(privateVerifictionObj.verifiction.isFloat(b.data.price)===false){b.pricePrompt="价格输入有误!";j.preventDefault()}else{return true}}}}]}).then(function(j){if(j){b.iProId=b.aEditPros[i].proId;b.iProVlaue=b.data.price;getOrPostRequestObj.adminProManageConnect.updatePrice(b,a)}else{}b.pricePrompt=""});e.setData(b.data)};b.updateNum=function(i){b.index=i;b.data.num=b.aEditPros[i].num;g.prompt({title:"修改产品数量",template:"<div class='item-input-inset alertInputView'><label class='item-input-wrapper alertInput'><input ng-model='data.num' type='text' class='ng-pristine ng-valid text-center'></label></div><h3 class='text-center assertive errText' ng-bind='numPrompt'></h3>",scope:b,buttons:[{text:"取 消",type:"alertCancel",onTap:function(j){return false}},{text:"确 定",type:"alertComfirm",onTap:function(j){if(b.data.num===""||b.data.num===undefined){b.numPrompt="数量不能为空!";j.preventDefault()}else{if(privateVerifictionObj.verifiction.isInt(b.data.num)===false){b.numPrompt="数量输入有误!";j.preventDefault()}else{return true}}}}]}).then(function(j){if(j){b.iProId=b.aEditPros[i].proId;b.iProVlaue=b.data.num;getOrPostRequestObj.adminProManageConnect.updateNum(b,a)}else{}b.numPrompt=""});e.setData(b.data)};b.searchChange=function(){e.setSearchText(b.aProManage.searchVal)};b.aProManageSearch=function(){if(b.aProManage.searchVal!==d){getOrPostRequestObj.adminProManageConnect.adminGetProList(b,a);b.pageNum=1;e.setPageNum(1);b.noMoreHide=true;b.loadingHide=false;e.setMoreHide(true);e.setLoadingHide(false);f=true}d=b.aProManage.searchVal};b.adminProManageInit_CallBack=function(i){e.setaEditPros(b.adminProManageRetrunData(i));b.aEditPros=e.getaEditPros();b.pageNum=2;e.setPageNum(2);c(function(){f=false},1000);c(function(){b.loadingImg()},500)};b.adminProManageLoadMore_CallBack=function(j){var i=b.adminProManageRetrunData(j);b.aEditPros=b.aEditPros.concat(i);e.setaEditPros(b.aEditPros);b.pageNum++;e.setPageNum(b.pageNum);c(function(){f=false},1000);c(function(){b.loadingImg()},500)};b.adminProManageLoadMore=function(){if(b.noMoreHide&&f===false){f=true;b.loadHttp=c(function(){getOrPostRequestObj.adminProManageConnect.adminProListLoadMore(b,a);b.$broadcast("scroll.infiniteScrollComplete")},2000)}else{b.$broadcast("scroll.infiniteScrollComplete")}};b.adminProManageRetrunData=function(j){var l=[],i=j.respData.dataList,k={};for(var n=0,m=i.length;n<m;n++){k={name:i[n].prodName,proId:i[n].prodNum,img:privateVerifictionObj.verifiction.imgLink(i[n].firstProdImg),price:"¥"+i[n].stdPrice,num:i[n].dispStockBalance,date:"上架日期: "+i[n].createDate};l.push(k)}if(i.length<9){b.noMoreHide=false;b.loadingHide=true;e.setMoreHide(false);e.setLoadingHide(true)}return l};b.updatePriceDone_CallBack=function(){b.aEditPros[b.index].price="¥"+b.data.price.replace(/\b(0+)/gi,"")};b.updateNumDone_CallBack=function(){b.aEditPros[b.index].num=b.data.num.replace(/\b(0+)/gi,"")};if(b.viewStates.getAdmProManageState()===false){getOrPostRequestObj.adminProManageConnect.adminGetProList(b,a);b.viewStates.setAdmProManageState(true)}else{b.aEditPros=e.getaEditPros();f=false;c(function(){b.loadingImg()},500)}};adminOrderInfoCtrl.$inject=["$scope","$http","$location","$timeout"];indexModule.controller("adminOrderInfo",adminOrderInfoCtrl);var adminSelectOrderCtrl=function(a,f,e,b){a.adminOrder={searchVal:""};a.iCustNum="";a.keyColor="keyColor-link";a.keyColors="keyColor-active";a.isCompanyClick=false;a.isPhoneClick=true;a.noMoreHide=true;a.loadingHide=false;a.selSearchEvt=null;a.pageNum=2;var c="";var d=true;a.$on("$stateChangeStart",function(){b.cancel(a.loadHttp)});a.admSelRefresh=function(){b(function(){getOrPostRequestObj.adminSelectOrderConnect.adminShowOrderList(a,f);a.$broadcast("scroll.refreshComplete")},2000)};a.adminOrderInit_CallBack=function(g){a.aOrders=a.adminOrderReturnData(g);a.pageNum=2;b(function(){d=false},1000);b(function(){a.loadingImg()},500)};a.adminOrderLoadMore_CallBack=function(h){var g=a.adminOrderReturnData(h);a.aOrders=a.aOrders.concat(g);a.pageNum++;b(function(){d=false},1000);b(function(){a.loadingImg()},500)};a.adminOrderLoadMore=function(){if(a.noMoreHide&&d===false){d=true;a.loadHttp=b(function(){getOrPostRequest.adminSelectOrderConnect.adminSelOrderLoadMore(a,f);a.$broadcast("scroll.infiniteScrollComplete")},2000)}else{a.$broadcast("scroll.infiniteScrollComplete")}};a.adminOrderReturnData=function(h){var p=[],n=h.respData.dataList,l,o=[],m=[],k,q=true;for(var g=0,j=n.length;g<j;g++){for(var r=0,i=n[g].orderItemList.length;r<i;r++){l={proId:n[g].orderItemList[r].prodNum,img:privateVerifictionObj.verifiction.imgLink(n[g].orderItemList[r].whereimg),name:n[g].orderItemList[r].prodName,num:n[g].orderItemList[r].cases,price:"¥"+n[g].orderItemList[r].custProdPrice};if(r<3){o.push(l)}else{m.push(l);q=false}}k={orderNum:n[g].orderNum,userName:n[g].custName,proCount:n[g].orderItemList.length,proPrices:"¥"+n[g].custPriceTotal,cashState:n[g].cashStatusName,deliveryState:n[g].deliverStatusName,date:n[g].createDate,iPros:o,isHidePro:true,iHidePros:m,isHide:q,btnText:"显示全部"};q=true;m=[];o=[];p.push(k)}if(n.length<9){a.noMoreHide=false;a.loadingHide=true}return p};a.toDetailed=function(g){e.path("/detailed").search({proNum:g,hisPage:1})};a.toOrderDetailed=function(g){e.path("/adminOrderInfo").search({orderId:a.aOrders[g].orderNum})};a.clickKey=function(g){a.isCompanyClick=true;a.isPhoneClick=true;if(g===1){a.isCompanyClick=!a.isCompanyClick}else{a.isPhoneClick=!a.isPhoneClick}};a.hideShowPro=function(g){a.aOrders[g].isHidePro=!a.aOrders[g].isHidePro;a.aOrders[g].isHidePro?a.aOrders[g].btnText="显示全部":a.aOrders[g].btnText="隐藏部分"};a.orderSearch=function(){if(a.adminOrder.searchVal!==c){getOrPostRequestObj.adminSelectOrderConnect.aUserCompany="";getOrPostRequestObj.adminSelectOrderConnect.aUserPhoneNum="";a.pageNum=1;a.noMoreHide=true;a.loadingHide=false;if(a.isCompanyClick===false){getOrPostRequestObj.adminSelectOrderConnect.aUserCompany=a.adminOrder.searchVal}else{getOrPostRequestObj.adminSelectOrderConnect.aUserPhoneNum=a.adminOrder.searchVal}getOrPostRequestObj.adminSelectOrderConnect.adminShowOrderList(a,f);d=true}c=a.adminOrder.searchVal};getOrPostRequestObj.adminSelectOrderConnect.adminShowOrderList(a,f)};adminProManageCtrl.$inject=["$scope","$http","admProManageService","$location","$ionicPopup","$timeout"];var adminProManagearr=["$scope","$http","admProManageService","$location","$ionicPopup","$timeout",adminProManageCtrl];indexModule.controller("adminProManage",adminProManagearr);indexModule.service("categoryService",function(){var c={};var d="";var a="";var b=true;c.getMenuDatas=function(){return d};c.setMenuDatas=function(e){d=e};c.getCateSearchText=function(){return a};c.setCateSearchText=function(e){a=e};c.getClearBtnShow=function(){return b};c.setClearBtnShow=function(e){b=e};return c});var categoryCtrl=function(c,b,d,a){c.clearBtnShow=d.getClearBtnShow();c.catePro={searchText:d.getCateSearchText()};c.bodyHide=true;c.setIState(false);c.categoryBarIconState();c.$on("$stateChangeStart",function(){var e=a.url().split("?")[0];if(e==="/product"){if(c.getProduct()!==0&&c.getCategory()!==0&&c.getIState()===false){c.setProduct(1);c.setCategory(0)}}else{if(e==="/shoppingCar"||e==="/personal"){if(c.getProduct()!==0||c.getCategory()!==0){c.setProduct(0);c.setCategory(0)}}}});c.OpenOrCloseMenu=function(e){if(c.menuDatas[e].menuBarOff===false&&c.menuDatas[e].menuBarOn===false){c.viewStates.setSearchResListState(false);a.path("/searchRes").search({name:c.menuDatas[e].itemDatas[0].itemData,id:c.menuDatas[e].itemDatas[0].itemId,type:0})}else{c.menuDatas[e].itemHide=!c.menuDatas[e].itemHide;c.menuDatas[e].menuBarOff=!c.menuDatas[e].menuBarOff;c.menuDatas[e].menuBarOn=!c.menuDatas[e].menuBarOn;if(c.menuDatas[e].itemDatas.length>0){c.menuDatas[e].menuHeaderShow=!c.menuDatas[e].menuHeaderShow;c.menuDatas[e].menuHeaderHide=!c.menuDatas[e].menuHeaderHide}}};c.cateSearchChange=function(){c.clearBtnShow=!(c.catePro.searchText!==""&&c.catePro.searchText!==undefined);d.setCateSearchText(c.catePro.searchText);d.setClearBtnShow(c.clearBtnShow)};c.clearData=function(){c.catePro.searchText="";c.clearBtnShow=true;d.setCateSearchText(c.catePro.searchText);d.setClearBtnShow(c.clearBtnShow)};c.searchPro=function(){if(c.catePro.searchText!==""&&c.catePro.searchText!==undefined){c.viewStates.setSearchResListState(false);a.path("/searchRes").search({name:c.catePro.searchText,id:"",type:"1"})}};c.searchCate=function(f,e){c.viewStates.setSearchResListState(false);a.path("/searchRes").search({name:f,id:e,type:0})};c.categoryInit_CallBack=function(e){c.menuDatas=c.categoryReturnData(e);d.setMenuDatas(c.menuDatas)};c.categoryReturnData=function(n){var h=[];var q=n.respData;var s={};var e="";var k=[];for(var o=0,p=q.length;o<p;o++){if(q[o].childProdCatHiers.length>0){for(var l=0,f=q[o].childProdCatHiers.length;l<f;l++){if(q[o].childProdCatHiers[l].childProdCatHiers.length>0){for(var g=0,r=q[o].childProdCatHiers[l].childProdCatHiers.length;g<r;g++){if(g===0){e=q[o].childProdCatHiers[l].prodCat.prodCatName}k.push({itemId:q[o].childProdCatHiers[l].childProdCatHiers[g].prodCat.prodCatId,itemData:q[o].childProdCatHiers[l].childProdCatHiers[g].prodCat.prodCatName})}s={itemHead:e,itemDatas:k,menuBarOff:true,menuBarOn:false,menuHeaderShow:false,menuHeaderHide:true,itemHide:true};h.push(s);e="";k=[];s={}}else{if(l===0){e=q[o].prodCat.prodCatName}k.push({itemId:q[o].childProdCatHiers[l].prodCat.prodCatId,itemData:q[o].childProdCatHiers[l].prodCat.prodCatName})}}s={itemHead:e,itemDatas:k,menuBarOff:true,menuBarOn:false,menuHeaderShow:false,menuHeaderHide:true,itemHide:true};h.push(s);e="";k=[];s={}}else{e=q[o].prodCat.prodCatName;s={itemHead:e,itemDatas:[{itemId:q[o].prodCat.prodCatId,itemData:q[o].prodCat.prodCatName}],menuBarOff:false,menuBarOn:false,menuHeaderShow:false,menuHeaderHide:true,itemHide:true};h.push(s)}}return h};if(c.viewStates.getCategoryState()===false){getOrPostRequestObj.proSearchConnec.proMenuIconLayout(c,b);c.viewStates.setCategoryState(true)}else{c.menuDatas=d.getMenuDatas()}};adminSelectOrderCtrl.$inject=["$scope","$http","$location","$timeout"];indexModule.controller("adminSelectOrder",adminSelectOrderCtrl);indexModule.service("contactService",function(){var f={};var c="";var g="";var e="";var b="";var a="";var i="";var h="";var d="javascript:void(0)";f.getCompanyName=function(){return c};f.setCompanyName=function(j){c=j};f.getAddress=function(){return g};f.setAddress=function(j){g=j};f.getWebSite=function(){return e};f.setWebSite=function(j){e=j};f.getContactPerson=function(){return b};f.setContactPerson=function(j){b=j};f.getPhoneNum=function(){return a};f.setPhoneNum=function(j){a=j};f.getLongiTude=function(){return i};f.setLongiTude=function(j){i=j};f.getLatiTude=function(){return h};f.setLatiTude=function(j){h=j};f.getPhoneNumBtn=function(){return d};f.setPhoneNumBtn=function(j){d=j};return f});var contcatCtrl=function(c,b,a,d){c.contactInit_CallBack=function(f){var e=c.contactReturnData(f);c.companyName=e.companyName;c.address=e.address;c.webSite=e.webSite;c.contactPerson=e.contactPerson;c.phoneNum=e.phoneNum;a.setCompanyName(e.companyName);a.setAddress(e.address);a.setWebSite(e.webSite);a.setContactPerson(e.contactPerson);a.setPhoneNum(e.phoneNum)};c.phoneBtn_CallBack=function(e){a.setPhoneNumBtn(e)};c.callPhone=function(){window.location.href=a.getPhoneNumBtn()};c.contactReturnData=function(f){var e=f.respData;d(function(){c.mapInit(e.longitude,e.latitudes)},500);a.setLongiTude(e.longitude);a.setLatiTude(e.latitudes);return{companyName:e.companyName,address:e.address,contactPerson:e.contactPerson,webSite:e.webSite,phoneNum:e.phoneNum}};c.mapInit=function(k,f){var i=new BMap.Map("contenttexts"),h=new BMap.Icon("img/icon.png",new BMap.Size(50,50),{anchor:new BMap.Size(30,28)}),j=new BMap.Point(k,f),g=new BMap.Marker(j,{icon:h});i.centerAndZoom(j,16);i.addControl(new BMap.ZoomControl());i.addOverlay(g);var e=new BMap.TrafficLayer();i.addTileLayer(e);i.setZoom(18)};if(c.viewStates.getContactState()===false){getOrPostRequestObj.orderInfoConnect.getContactInfo(c,b);if(privateVerifictionObj.verifiction.isMobile()===true){getOrPostRequestObj.indexConnect.initPhoneBtn(c,b)}c.viewStates.setContactState(true)}else{c.mapInit(a.getLongiTude(),a.getLatiTude());c.companyName=a.getCompanyName();c.address=a.getAddress();c.webSite=a.getWebSite();c.contactPerson=a.getContactPerson();c.phoneNum=a.getPhoneNum()}};categoryCtrl.$inject=["$scope","$http","categoryService","$location"];var categoryarr=["$scope","$http","categoryService","$location",categoryCtrl];indexModule.controller("category",categoryarr);indexModule.service("detaiService",function(){var d={};var a=0;d.getDNum=function(){return a};d.setDNum=function(b){a=b};return d});var detailedCtrl=function(o,l,b,d,a){var e="";var r="";o.layerHide=true;o.moreCharHide=true;o.closeHide=true;o.ampImgHide=true;o.shoppingType=0;o.detailed={proNum:0};o.proNumber=0;o.isChangeHide=true;o.isToAlbb=true;var f=a.search().dNum;var s=o.getProduct();var t=o.getCategory();o.setCategory(0);o.setProduct(0);if(f!==undefined&&f!==null){if(o.getPerSpCar()>=2){o.setPerSpCar(o.getPerSpCar()+f)}else{o.setIsDetailed(f)}l.setDNum(f)}else{f=l.getDNum()}var q=a.search().hisPage;a.search({proNum:a.search().proNum,hisPage:a.search().hisPage}).replace();o.cartHide=q==1;o.detailedInit_CallBack=function(u){var h=o.detailedReturnData(u);o.detailedDatas=h;o.isChangeHide=h.changePro;o.isToAlbb=h.toAlbb;for(var v=0,c=u.respData[0].prodExternals.length;v<c;v++){if(u.respData[0].prodExternals[v].externalName==="murl"){r=u.respData[0].prodExternals[v].externalValue}else{e=u.respData[0].prodExternals[v].externalValue}}var i=h.islides;var j=[];for(var m=0,k=i.length;m<k;m++){j.push({content:"<div class='detailed_bannerImg' ><img src='"+i[m].iSlideImg+"' onerror=this.src=errImg></div>"})}var p={type:"dom",data:j,dom:document.getElementById("detailedSwiper"),duration:3000,isLooping:true,isAutoplay:true,onslidechange:function(w){g.changeIndexDot()}};if(i.length>0){var g=new iSlider(p);var n={top:"42%",width:"100%",diameter:"0.8em",borderColor:"#365b88"};g.renderDot(n)}};o.detailedReturnData=function(v){var k,p=true,i=true,c=v.respData,m=[],h=[],n="",C="",g="";for(var B=0,j=c[0].prodImgs.length;B<j;B++){n=privateVerifictionObj.verifiction.imgLink(c[0].prodImgs[B].thumbUrl);h.push({iSlideImg:n})}for(var u=0,A=c[0].prodFeatures.length;u<A;u++){C=c[0].prodFeatures[u].featureName;g=c[0].prodFeatures[u].ifeatureValue;m.push({extFeatrue:C+": "+g})}if(c.externalSysCode==="1688"&&publicParameterObj.parameters.isComShopping===true){p=true;i=false}else{p=false;i=true}k={detailedTitle:c[0].prodName,islides:h,changePro:p,toAlbb:i,price:"¥"+c[0].stdPrice,balance:c[0].dispStockBalance,extFeatrue:m,data:c[0].createDate,remark:c[0].remark,external:c[0].prodExternals};return k};o.$on("$stateChangeStart",function(){getOrPostRequestObj.userAndAdminSignIn.isToShoppingCar=false;var c=a.url().split("?")[0];if(c!=="/shoppingCar"){if(c!=="/index"){o.setProduct(s);o.setCategory(t);if(f!==undefined&&f!==null){if(o.getPerSpCar()>=2){o.setPerSpCar(o.getPerSpCar()-f)}else{o.setIsDetailed(-f)}}}}if(c==="/waitingAudit"||c==="/myOrder"||c==="/superPro"){o.setPerSpCar(0)}if(c!=="/searchRes"){o.viewStates.setSearchResListState(false)}});if(a.search().proNum!==""){o.cqcsHide=false;getOrPostRequestObj.detailedConnect.getDetailed(a.search().proNum,o,b)}else{o.cqcsHide=true;o.detailedDatas={detailedTitle:"产品获取失败，请返回重新选择产品。"}}o.theZoom=function(c){o.layerHide=false;o.closeHide=false;o.ampImgHide=false;o.contentHide=true;o.cartHide=true;o.ampImg=o.detailedDatas.islides[c].iSlideImg;var g=document.getElementById("ampImgId");d(function(){var i=-(g.offsetWidth/2);var h=-(g.offsetHeight/2);o.ampImgStyle={"margin-left":i+"px","margin-top":h+"px",opacity:"1"}},0)};o.closeAmp=function(){o.ampImgStyle={opacity:"0"};o.layerHide=true;o.closeHide=true;o.closeHide=true;o.ampImgHide=true;o.cartHide=false;o.contentHide=false};o.iaddToShoppinCar=function(){o.shoppingType=1;getOrPostRequestObj.userAndAdminSignIn.isUserLogin(o,b);o.viewStates.setShoppingCarState(false)};o.iToShoppingCar=function(){o.shoppingType=2;getOrPostRequestObj.userAndAdminSignIn.isUserLogin(o,b)};o.isLogin_CallBack=function(c){if(c){if(o.shoppingType===1){publicEventsObj.operatingDatabaseEvent.insertData(a.search().proNum,1,o)}else{if(o.shoppingType===2){a.path("/shoppingCar")}}}else{if(o.shoppingType===1){o.userLogin.show()}else{if(o.shoppingType===2){getOrPostRequestObj.userAndAdminSignIn.isToShoppingCar=true;o.userLogin.show()}}}};o.toShopCar=function(){a.path("/shoppingCar")};o.iToAlbb=function(){if(privateVerifictionObj.verifiction.isMobile()){try{window.device.version.substr(0,1);publicEventsObj.mobileEvent.webpage_mobile(r)}catch(c){window.open(r)}}else{window.open(e)}};getOrPostRequestObj.userAndAdminSignIn.isUserLogin(o,b)};contcatCtrl.$inject=["$scope","$http","contactService","$timeout"];var contactarr=["$scope","$http","contactService","$timeout",contcatCtrl];indexModule.controller("contact",contactarr);var editMessage=function(b,c,a){b.charNum=80;b.editStyle={"border-bottom":"none","box-shadow":"0 2px 3px rgba(0,0,0,.15)"};b.toUserLogin=function(){b.userLoginShowHide(true)};b.hideEditMessage=function(){b.editMessageShowHide(false)};b.sendMessage=function(){b.iMeassage=angular.element(document.querySelector("#messageId")).val();if(b.iMeassage!==""&&b.iMeassage!==undefined){getOrPostRequestObj.messageConnect.sendMessage(b,c)}else{b.showAlert("提 示","留言内容不能为空!")}};b.sendMessageDone_CallBack=function(){var e={name:b.getSendMessageState()?publicParameterObj.parameters.userName.substr(0,5)+"******":"匿名账户",createData:"刚刚",messageContent:b.iMeassage};var d=b.getMessage();d.splice(0,0,e);b.setMessage(d.splice(0,d.length,e));b.iMeassage="";angular.element(document.querySelector("#messageId")).val("");a.setMessageDatas(b.iMessageDatas);b.editMessageShowHide(false);b.viewStates.setMessageState(false)}};indexModule.directive("eventVal",function(){return{require:"ngModel",scope:false,link:function(d,b,c,a){a.$parsers.push(function(e){d.charNum=80-e.length})}}});detailedCtrl.$inject=["$scope","detaiService","$http","$timeout","$location"];var detailedarr=["$scope","detaiService","$http","$timeout","$location",detailedCtrl];indexModule.controller("detailed",detailedarr);indexModule.service("historyOrderService",function(){var c={};var b=false;var a=true;var d="";c.getMoreHide=function(){return b};c.setMoreHide=function(e){b=e};c.getLoadingHide=function(){return a};c.setLoadingHide=function(e){a=e};c.getHistoryOrder=function(){return d};c.setHistoryOrder=function(e){d=e};return c});var historyOrderCtrl=function(a,f,c,e,b){a.iCustNum="";a.noMoreHide=c.getMoreHide();a.loadingHide=c.getLoadingHide();var d=true;if(e.search().custNum){a.iCustNum=e.search().custNum;a.companyTitle=e.search().custName}a.adminOrderInit_CallBack=function(g){c.setHistoryOrder(a.adminOrderReturnData(g));a.histroyOrders=c.getHistoryOrder();publicParameterObj.parameters.loadingPage=2;b(function(){d=false},1000);b(function(){a.loadingImg()},500)};a.adminOrderLoadMore_CallBack=function(h){var g=a.adminOrderReturnData(h);a.histroyOrders=a.histroyOrders.concat(g);c.setHistoryOrder(a.histroyOrders);publicParameterObj.parameters.loadingPage++;b(function(){d=false},1000);b(function(){a.loadingImg()},500)};a.adminOrderLoadMore=function(){if(a.noMoreHide&&d===false){d=true;b(function(){getOrPostRequest.adminSelectOrderConnect.adminSelOrderLoadMore(a,f);a.$broadcast("scroll.infiniteScrollComplete")},2000)}else{a.$broadcast("scroll.infiniteScrollComplete")}};a.adminOrderReturnData=function(h){var p=[],n=h.respData.dataList,l,o=[],m=[],k,q=true;for(var g=0,j=n.length;g<j;g++){for(var r=0,i=n[g].orderItemList.length;r<i;r++){l={proId:n[g].orderItemList[r].prodNum,img:privateVerifictionObj.verifiction.imgLink(n[g].orderItemList[r].whereimg),name:n[g].orderItemList[r].prodName,num:n[g].orderItemList[r].cases,price:"¥"+n[g].orderItemList[r].custProdPrice};if(r<3){o.push(l)}else{m.push(l);q=false}}k={orderNum:n[g].orderNum,userName:n[g].custName,proCount:n[g].orderItemList.length,proPrices:"¥"+n[g].custPriceTotal,cashState:n[g].cashStatusName,deliveryState:n[g].deliverStatusName,date:n[g].createDate,iPros:o,isHidePro:true,iHidePros:m,isHide:q,btnText:"显示全部"};q=true;m=[];o=[];p.push(k)}if(n.length<9){a.noMoreHide=false;a.loadingHide=true;c.setMoreHide(false);c.setLoadingHide(true)}return p};a.toDetailed=function(g){e.path("/detailed").search({proNum:g,hisPage:1})};a.toOrderDetailed=function(g){e.path("/adminOrderInfo").search({orderId:a.histroyOrders[g].orderNum})};a.hideShowPro=function(g){a.histroyOrders[g].isHidePro=!a.histroyOrders[g].isHidePro;a.histroyOrders[g].isHidePro?a.histroyOrders[g].btnText="显示全部":a.histroyOrders[g].btnText="隐藏部分";c.setHistoryOrder(a.histroyOrders)};if(a.viewStates.getHistoryOrderState()===false){getOrPostRequestObj.adminSelectOrderConnect.adminShowOrderList(a,f);a.viewStates.setHistoryOrderState(true)}else{a.histroyOrders=c.getHistoryOrder();d=false;b(function(){a.loadingImg()},500)}};editMessage.$inject=["$scope","$http","messageService"];var editMessagearr=["$scope","$http","messageService",editMessage];indexModule.controller("editMessageCtrl",editMessagearr);indexModule.service("messageService",function(){var e={};var c=[];var d=true;var b=false;var a=1;e.getMessageDatas=function(){return c};e.setMessageDatas=function(f){c=f};e.getMoreHide=function(){return d};e.setMoreHide=function(f){d=f};e.getLoadingHide=function(){return b};e.setLoadingHide=function(f){b=f};e.getPageNum=function(){return a};e.setPageNum=function(f){a=f};return e});var messageCtrl=function(a,e,g,f,d,b){a.editMessageIsLogin=false;a.noMoreHide=g.getMoreHide();a.loadingHide=g.getLoadingHide();a.pageNum=g.getPageNum();a.pageNum=g.getPageNum();var c=true;a.$on("$stateChangeStart",function(){a.editMessageShowHide(false);b.cancel(a.loadHttp)});a.messageInit_CallBack=function(h){g.setMessageDatas(a.messageReturnData(h));a.setMessage(g.getMessageDatas());a.pageNum=2;g.setPageNum(2);b(function(){c=false},1000)};a.messageLoadMore_CallBack=function(i){var h=a.messageReturnData(i);a.setMessage(a.getMessage().concat(h));a.pageNum++;g.setPageNum(a.pageNum);g.setMessageDatas(a.getMessage());b(function(){c=false},1000)};a.showEditMessage=function(){a.editMessageShowHide(true)};a.messageLoadMore=function(){if(a.noMoreHide&&c===false){c=true;a.loadHttp=b(function(){getOrPostRequestObj.messageConnect.messageLoadMore(a,e);a.$broadcast("scroll.infiniteScrollComplete")},2000)}else{a.$broadcast("scroll.infiniteScrollComplete")}};a.messageReturnData=function(l){var h=[],k=l.respData.dataList,m;for(var j=0,i=k.length;j<i;j++){m={name:k[j].createBy===""||k[j].createBy===undefined?"匿名账户":k[j].createBy.substr(0,5)+"******",createData:k[j].createDate.replace("T"," "),messageContent:k[j].content};h.push(m)}if(k.length<14){a.noMoreHide=false;a.loadingHide=true;g.setMoreHide(false);g.setLoadingHide(true)}return h};if(a.viewStates.getMessageState()===false){getOrPostRequest.messageConnect.getMessage(a,e);a.viewStates.setMessageState(true)}else{a.setMessage(g.getMessageDatas());c=false}};historyOrderCtrl.$inject=["$scope","$http","historyOrderService","$location","$timeout"];var histroryOrderarr=["$scope","$http","historyOrderService","$location","$timeout",historyOrderCtrl];indexModule.controller("historyOrder",histroryOrderarr);var myOrderCtrl=function(e,d,c,a){e.custName="未登录";e.noMoreHide=true;e.loadingHide=false;e.pageNum=2;var b=true;e.$on("$stateChangeStart",function(){a.cancel(e.loadHttp)});e.myOrderRefresh=function(){a(function(){getOrPostRequestObj.myOrderConnect.userShowOrderList(e,d);e.$broadcast("scroll.refreshComplete")},2000)};e.myOrderInit_CallBack=function(f){e.oLists=e.myOrderReturnData(f);e.pageNum=2;a(function(){b=false},1000);a(function(){e.loadingImg()},500)};e.myOrderLoadMore_CallBack=function(g){var f=e.myOrderReturnData(g);e.oLists=e.oLists.concat(f);e.pageNum++;a(function(){b=false},1000);a(function(){e.loadingImg()},500)};e.myOrederLoadMore=function(){if(e.noMoreHide&&b===false){e.loadHttp=a(function(){b=true;getOrPostRequestObj.myOrderConnect.userMyOrderLoadMore(e,d);e.$broadcast("scroll.infiniteScrollComplete")},2000)}else{e.$broadcast("scroll.infiniteScrollComplete")}};e.isLogin_CallBack=function(f){if(f===true){e.custName=publicParameterObj.parameters.userName}else{e.custName="未登录"}};e.myOrderReturnData=function(o){var u={};var k=[];var q=[];var i={};var v=[];var h=[];var t=o.respData.dataList;var r=true;var f=true;var n,m,s;for(var j=0,p=t.length;j<p;j++){r=true;f=true;n=false;m=false;s=false;for(var l=0,g=t[j].orderItemList.length;l<g;l++){i={proId:t[j].orderItemList[l].prodNum,proImg:privateVerifictionObj.verifiction.imgLink(t[j].orderItemList[l].whereimg),proName:t[j].orderItemList[l].prodName,proNum:"订购数量: "+t[j].orderItemList[l].cases,proPrice:"¥"+t[j].orderItemList[l].custProdPrice};if(l<3){k.push(i)}else{r=true;f=false;q.push(i)}i={}}switch(t[j].deliverStatus){case 0:n=true;break;case 1:m=true;break;case 2:s=true;break}u={orderId:t[j].orderNum,isProHide:r,isHide:f,oItems:v,oPros:k,oHidePro:q,orderState:t[j].deliverStatusName,date:t[j].createDate,oCountNum:t[j].orderItemList.length,oCountPrice:"¥"+t[j].custPriceTotal,btnText:"显示全部",stateRed:n,stateBlue:m,stateGray:s};h.push(u);v=[];k=[];q=[]}if(t.length<9){e.noMoreHide=false;e.loadingHide=true}return h};e.toDetailed=function(f){var g=e.getPerSpCar()+4;e.setPerSpCar(g);c.path("/detailed").search({proNum:f})};e.hideShowPro=function(f){e.oLists[f].isProHide=!e.oLists[f].isProHide;e.oLists[f].isProHide?e.oLists[f].btnText="显示全部":e.oLists[f].btnText="隐藏部分"};a(function(){getOrPostRequestObj.userAndAdminSignIn.isUserLogin(e,d)},450);getOrPostRequestObj.myOrderConnect.userShowOrderList(e,d)};messageCtrl.$inject=["$scope","$http","messageService","$ionicModal","$location","$timeout"];var messageCtrlarr=["$scope","$http","messageService","$ionicModal","$location","$timeout",messageCtrl];indexModule.controller("message",messageCtrlarr);indexModule.service("perService",function(){var a={};var c="未登录";var b="";a.getUserName=function(){return c};a.setUserName=function(d){c=d};a.getUserCompany=function(){return b};a.setUserCompany=function(d){b=d};return a});var personalCtrl=function(a,f,e,c,b,d){a.useriName=e.getUserName();a.useriCompany=e.getUserCompany();a.setPerSpCar(0);a.showConfirm=function(){c.confirm({title:"提 示",content:"您确定要退出登录吗?",buttons:[{text:"取 消",type:"alertCancel",onTap:function(g){return false}},{text:"确 定",type:"alertComfirm",onTap:function(g){return true}}]}).then(function(g){if(g){a.viewStates.setPersonalState(false);e.setUserName("未登录");e.setUserCompany("");getOrPostRequestObj.userAndAdminSignIn.userLoginOut(a,f)}else{}})};a.perList=function(g){switch(g){case 0:d.path("/shoppingCar").search("");a.setPerSpCar(2);break;case 1:d.path("/waitingAudit").search("");a.setPerSpCar(0);break;case 2:d.path("/myOrder").search("");a.setPerSpCar(0);break;case 3:d.path("/superPro").search("");a.setPerSpCar(0);break;case 4:d.path("/modifyPass").search("");a.setPerSpCar(0);break;case 5:d.path("/modifyInfo").search("");a.setPerSpCar(0);break}};a.userLoginOut=function(){a.showConfirm()};a.infoInit_CallBack=function(g){a.useriName=g.respData.custName;a.useriCompany=g.respData.companyName;e.setUserName(g.respData.custName);e.setUserCompany(g.respData.companyName);a.viewStates.setPersonalState(true)};if(a.viewStates.getPersonalState()===false){b(function(){getOrPostRequestObj.registConnect.userLoginInfo(a,f)},500)}};myOrderCtrl.$inject=["$scope","$http","$location","$timeout"];indexModule.controller("myOrder",myOrderCtrl);indexModule.service("productService",function(){var f={};var e=true;var d=false;var c="";var a=1;var g={};var b="";f.getMoreHide=function(){return e};f.setMoreHide=function(h){e=h};f.getLoadingHide=function(){return d};f.setLoadingHide=function(h){d=h};f.getSearchText=function(){return c};f.setSearchText=function(h){c=h};f.getPageNum=function(){return a};f.setPageNum=function(h){a=h};f.getProData=function(){return g};f.setProData=function(h){g=h};f.getSearchTextSave=function(){return b};f.setSearchTextSave=function(h){b=h};return f});var productCtrl=function(c,a,b,h,d,e){c.bodyHide=true;c.noMoreHide=b.getMoreHide();c.loadingHide=b.getLoadingHide();c.searchEvt=null;c.pageNum=b.getPageNum();c.iPro={searchText:b.getSearchText()};var g=b.getSearchTextSave();var f=true;c.setIState(false);c.proBarIconState();c.$on("$stateChangeStart",function(){e.cancel(c.loadHttp);var i=h.url().split("?")[0];if(i==="/category"){if(c.getCategory()!==0&&c.getProduct()!==0&&c.getIState()===false){c.setProduct(0);c.setCategory(1)}}else{if(i==="/shoppingCar"||i==="/personal"){if(c.getProduct()!==0||c.getCategory()!==0){c.setProduct(0);c.setCategory(0)}}}});c.toProList=function(){h.path("/proList").replace()};c.productInit_CallBack=function(i){b.setProData(c.productReturnData(i));c.proDatas=b.getProData();c.pageNum=2;b.setPageNum(2);e(function(){f=false},1000);e(function(){c.loadingImg()},500)};c.productLoadMore_CallBack=function(j){var i=c.productReturnData(j);c.proDatas.proLeftInfos=c.proDatas.proLeftInfos.concat(i.proLeftInfos);c.proDatas.proRightInfos=c.proDatas.proRightInfos.concat(i.proRightInfos);b.setProData(c.proDatas);c.pageNum++;b.setPageNum(c.pageNum);e(function(){f=false},1000);e(function(){c.loadingImg()},500)};c.searchResLoadMore_CallBack=function(i){c.productInit_CallBack(i)};c.productLoadMore=function(){if(c.noMoreHide&&f===false){f=true;c.loadHttp=e(function(){getOrPostRequestObj.productConnect.getProductMore(c,a);c.$broadcast("scroll.infiniteScrollComplete")},2000)}else{c.$broadcast("scroll.infiniteScrollComplete")}};c.proRefresh=function(){e(function(){getOrPostRequestObj.productConnect.getProduct(c,a);c.$broadcast("scroll.refreshComplete");c.noMoreHide=true;c.loadingHide=false;b.setMoreHide(true);b.setLoadingHide(false);c.pageNum=1;b.setPageNum(1);c.iPro.searchText="";b.setSearchText("")},2000)};c.productReturnData=function(j){var p,l,o=[],q=[],n=j.respData.dataList;for(var k=0,m=n.length;k<m;k+=2){p={proLeftNum:n[k].prodNum,proLeftImg:privateVerifictionObj.verifiction.imgLink(n[k].firstProdImg),proLeftName:n[k].prodName,proLeftPrice:"¥"+n[k].stdPrice};o.push(p);if(k+1<m){l={proRightNum:n[k+1].prodNum,proRightImg:privateVerifictionObj.verifiction.imgLink(n[k+1].firstProdImg),proRightName:n[k+1].prodName,proRightPrice:"¥"+n[k+1].stdPrice};q.push(l)}}var i={proLeftInfos:o,proRightInfos:q};if(n.length<14){c.noMoreHide=false;c.loadingHide=true;b.setMoreHide(false);b.setLoadingHide(true)}return i};c.proSearchTextChange=function(){b.setSearchText(c.iPro.searchText)};c.iProSearch=function(){if(c.iPro.searchText!==g){c.pageNum=1;b.setPageNum(1);c.loadingHide=false;c.noMoreHide=true;b.setMoreHide(true);b.setLoadingHide(false);getOrPostRequestObj.proSearchConnec.userSearchMore(c.iPro.searchText,"",c,a);b.setSearchText(c.iPro.searchText);g=c.iPro.searchText;b.setSearchTextSave(c.iPro.searchText);f=true}};c.proLeftClick=function(i){h.path("/detailed").search({proNum:c.proDatas.proLeftInfos[i].proLeftNum,dNum:2+c.getProduct()+c.getCategory()})};c.proRightClick=function(i){h.path("/detailed").search({proNum:c.proDatas.proRightInfos[i].proRightNum,dNum:2+c.getProduct()+c.getCategory()})};c.toggleLeft=function(){d.toggleLeft()};if(c.viewStates.getProductState()===false){getOrPostRequestObj.productConnect.getProduct(c,a);c.viewStates.setProductState(true)}else{c.proDatas=b.getProData();f=false;e(function(){c.loadingImg()},500)}};personalCtrl.$inject=["$scope","$http","perService","$ionicPopup","$timeout","$location"];var personalarr=["$scope","$http","perService","$ionicPopup","$timeout","$location",personalCtrl];indexModule.controller("personal",personalarr);indexModule.service("proListService",function(){var f={};var d=false;var e=true;var a=1;var g="";var c="";var b="";f.getLoadingHide=function(){return d};f.setLoadingHide=function(h){d=h};f.getMoreHide=function(){return e};f.setMoreHide=function(h){e=h};f.getPageNum=function(){return a};f.setPageNum=function(h){a=h};f.getProListDatas=function(){return g};f.setProListDatas=function(h){g=h};f.getSearchText=function(){return c};f.setSearchText=function(h){c=h};f.getSearchTextSave=function(){return b};f.setSearchTextSave=function(h){b=h};return f});var proListCtrl=function(g,e,f,d,a){g.bodyHide=true;g.loadingHide=f.getLoadingHide();g.noMoreHide=f.getMoreHide();g.pageNum=f.getPageNum();g.iPro={searchText:f.getSearchText()};var c=f.getSearchTextSave();var b=true;g.proBarIconState();g.$on("$stateChangeStart",function(){a.cancel(g.loadHttp)});g.toProduct=function(){d.path("/product").replace()};g.productInit_CallBack=function(h){f.setProListDatas(g.proListReturnData(h));g.proListDatas=f.getProListDatas();f.setPageNum(2);g.pageNum=2;a(function(){b=false},1000);a(function(){g.loadingImg()},500)};g.productLoadMore_CallBack=function(i){var h=g.proListReturnData(i);g.proListDatas=g.proListDatas.concat(h);f.setProListDatas(g.proListDatas);g.pageNum++;f.setPageNum(g.pageNum);a(function(){b=false},1000);a(function(){g.loadingImg()},500)};g.searchResLoadMore_CallBack=function(h){g.productInit_CallBack(h)};g.proListLoadMore=function(){if(g.noMoreHide&&b===false){b=true;g.loadHttp=a(function(){getOrPostRequestObj.productConnect.getProductMore(g,e);g.$broadcast("scroll.infiniteScrollComplete")},2000)}else{g.$broadcast("scroll.infiniteScrollComplete")}};g.proListRefresh=function(){a(function(){getOrPostRequestObj.productConnect.getProduct(g,e);g.$broadcast("scroll.refreshComplete");g.noMoreHide=true;g.loadingHide=false;g.pageNum=1;g.iPro.searchText="";f.setSearchText("");f.setPageNum(1);f.setMoreHide(true);f.setLoadingHide(false)},2000)};g.proListReturnData=function(h){var j=[],n=h.respData.dataList,i,m="";for(var l=0,k=n.length;l<k;l++){if(n[l].featureName===null||n[l].featureName===undefined){m=""}else{m=n[l].featureName}i={proNum:n[l].prodNum,proName:n[l].prodName,proModel:"型号: "+m,proPrice:"¥"+n[l].stdPrice,proListImg:privateVerifictionObj.verifiction.imgLink(n[l].firstProdImg)};j.push(i)}if(n.length<14){g.noMoreHide=false;g.loadingHide=true;f.setMoreHide(false);f.setLoadingHide(true)}return j};g.proSearchTextChange=function(){f.setSearchText(g.iPro.searchText)};g.iProSearch=function(){if(g.iPro.searchText!==c){g.pageNum=1;f.setPageNum(1);g.noMoreHide=true;g.loadingHide=false;f.setMoreHide(true);f.setLoadingHide(false);getOrPostRequestObj.proSearchConnec.userSearchMore(g.iPro.searchText,"",g,e);c=g.iPro.searchText;f.setSearchTextSave(g.iPro.searchText);b=true}};g.proItemClick=function(h){d.path("/detailed").search({proNum:g.proListDatas[h].proNum,dNum:2+g.getProduct()+g.getCategory()})};if(g.viewStates.getProListState()===false){getOrPostRequestObj.productConnect.getProduct(g,e);g.viewStates.setProListState(true)}else{g.proListDatas=f.getProListDatas();b=false;a(function(){g.loadingImg()},500)}};productCtrl.$inject=["$scope","$http","productService","$location","$ionicSideMenuDelegate","$timeout"];var productarr=["$scope","$http","productService","$location","$ionicSideMenuDelegate","$timeout",productCtrl];indexModule.controller("product",productarr);indexModule.service("searchResService",function(){var g={};var j="";var e=true;var b=false;var a=2;var c={};var d=false;g.getProResList=function(){return j};g.setProResList=function(f){j=f};g.getMoreHide=function(){return e};g.setMoreHide=function(f){e=f};g.getLoadingHide=function(){return b};g.setLoadingHide=function(f){b=f};g.getPageNum=function(){return a};g.setPageNum=function(f){a=f};g.getProDatas=function(){return c};g.setProDatas=function(f){c=f};g.getShowType=function(){return d};g.setShowType=function(f){d=f};return g});var searchResCtrl=function(i,f,g,c,a){var b=c.search().name,h=c.search().id,e=!!c.search().type?parseInt(c.search().type):!!c.search().type;i.bodyHide=true;i.noMoreHide=g.getMoreHide();i.loadingHide=g.getLoadingHide();i.resTitle=b;i.pageNum=g.getPageNum();i.showType=g.getShowType();i.proDatas={proLeftInfos:[],proRightInfos:[]};i.timeEvt=null;var d=true;i.$on("$stateChangeStart",function(){a.cancel(i.loadHttp);var j=c.url().split("?")[0];if(j!=="/detailed"){i.viewStates.setSearchResListState(false)}});i.showSearchResInit_CallBack=function(j){var m=i.proResReturnData(j);g.setProResList(m);i.proResList=g.getProResList();var k=m.length;for(var l=0;l<k;l+=2){i.proDatas.proLeftInfos.push(m[l]);if(m[l+1]!==undefined&&m[l+1]!==null){i.proDatas.proRightInfos.push(m[l+1])}}g.setProDatas(i.proDatas);i.pageNum=2;g.setPageNum(2);a(function(){d=false},1000);a(function(){i.loadingImg()},500)};i.searchResLoadMore_CallBack=function(j){var m=i.proResReturnData(j);i.proResList=i.proResList.concat(m);i.pageNum++;g.setPageNum(i.pageNum);g.setProResList(i.proResList);var k=m.length;for(var l=0;l<k;l+=2){i.proDatas.proLeftInfos.push(m[l]);if(m[l+1]!==undefined&&m[l+1]!==null){i.proDatas.proRightInfos.push(m[l+1])}}g.setProDatas(i.proDatas);a(function(){d=false},1000);a(function(){i.loadingImg()},500)};i.proResLoadMore=function(){if(i.noMoreHide&&d===false){d=true;i.loadHttp=a(function(){if(e===0){getOrPostRequestObj.proSearchConnec.userSearchMore("",h,i,f)}else{getOrPostRequestObj.proSearchConnec.userSearchMore(b,"",i,f)}i.$broadcast("scroll.infiniteScrollComplete")},2000)}else{i.$broadcast("scroll.infiniteScrollComplete")}};i.proResReturnData=function(n){var j=[],m=n.respData.dataList,p,o="";for(var l=0,k=m.length;l<k;l++){if(m[l].featureName===null||m[l].featureName===undefined){o=""}else{o=m[l].featureName}p={proId:m[l].prodNum,proListImg:privateVerifictionObj.verifiction.imgLink(m[l].firstProdImg),proName:m[l].prodName,proModel:"产品型号: "+o,proPrice:"¥"+m[l].stdPrice};j.push(p)}if(m.length<9){i.noMoreHide=false;i.loadingHide=true;g.setMoreHide(false);g.setLoadingHide(true)}return j};i.changeStyle=function(){i.showType=!i.showType;g.setShowType(i.showType);if(i.timeEvt){a.cancel(i.timeEvt)}i.timeEvt=a(function(){i.loadingImg()},500)};if(i.viewStates.getSearchResListState()===false){if(e==0){getOrPostRequestObj.proSearchConnec.userSearchPro("",h,i,f)}else{getOrPostRequestObj.proSearchConnec.userSearchPro(b,"",i,f)}i.viewStates.setSearchResListState(true)}else{i.proResList=g.getProResList();i.proDatas=g.getProDatas();d=false;a(function(){i.loadingImg()},500)}i.resItemClick=function(j){c.path("/detailed").search({proNum:i.proResList[j].proId,dNum:3+i.getCategory()+i.getProduct()})};i.proLeftClick=function(j){c.path("/detailed").search({proNum:i.proDatas.proLeftInfos[j].proId,dNum:3+i.getCategory()+i.getProduct()})};i.proRightClick=function(j){c.path("/detailed").search({proNum:i.proDatas.proRightInfos[j].proId,dNum:3+i.getCategory()+i.getProduct()})}};proListCtrl.$inject=["$scope","$http","proListService","$location","$timeout"];var proListarr=["$scope","$http","proListService","$location","$timeout",proListCtrl];indexModule.controller("proList",proListarr);var register=function(b,f,d,e){var c={color:"#ef575c"};var a={color:"#294775"};b.registerStyle={"border-bottom":"none","box-shadow":"0 2px 3px rgba(0,0,0,.15)"};b.register={};b.rphoneFocus=function(){b.registerPhone=c};b.rphoneBlur=function(){b.registerPhone=a};b.rpassFocus=function(){b.registerPass=c};b.rpassBlur=function(){b.registerPass=a};b.rpasscFocus=function(){b.registerPassC=c};b.rpasscBlur=function(){b.registerPassC=a};b.rnameFocus=function(){b.registerName=c};b.rnameBlur=function(){b.registerName=a};b.rcompanyFocus=function(){b.registerCompany=c};b.rcompanyBlur=function(){b.registerCompany=a};b.registerSend=function(){if(privateVerifictionObj.verifiction.iphonever(b.register.rPhone)===false){b.showAlert("提 示","手机号码格式输入错误!")}else{if(privateVerifictionObj.verifiction.isLetterAndNum(b.register.rPass)===false){b.showAlert("提 示","用户密码只能由字母或数字组成!")}else{if(b.register.rPass===""||b.register.rPass===undefined||b.register.rPassC===""||b.register.rPassC===undefined){b.showAlert("提 示","密码不能为空!")}else{if(b.register.rPass!==b.register.rPassC){b.showAlert("提 示","两次用户密码输入不正确!")}else{if(b.register.rName===""||b.register.rName===undefined){b.showAlert("提 示","姓名不能为空!")}else{if(b.register.rCompany===""||b.register.rCompany===undefined){b.showAlert("提 示","商家名/公司名不能为空!")}else{getOrPostRequestObj.registConnect.userRegist(b,f)}}}}}}};b.userLoginDone_CallBack=function(g){localStorage.setItem("userName",g+"");publicParameterObj.parameters.userName=localStorage.userName.replace(/\"/g,"");publicEventsObj.operatingDatabaseEvent.crateTable();getOrPostRequestObj.userAndAdminSignIn.userLoginState=true;getOrPostRequestObj.userAndAdminSignIn.testSetJushTagNalias(b,f)};b.registerDone_CallBack=function(g,h){getOrPostRequestObj.userAndAdminSignIn.userLogin(b,f,g,h);d.show({template:"<div>恭喜您注册成功!</div>",delay:100,duration:1000});b.register.rPhone="";b.register.rPass="";b.register.rPassC="";b.register.rName="";b.register.rCompany=""; var n = e.url().split("?")[0];if(n === "/personal"){location.reload();}else{e.path("/personal");}}};searchResCtrl.$inject=["$scope","$http","searchResService","$location","$timeout"];var searchResarr=["$scope","$http","searchResService","$location","$timeout",searchResCtrl];indexModule.controller("searchRes",searchResarr);var rightMenus=function(a,b,c){a.isUserLogin=function(){getOrPostRequestObj.userAndAdminSignIn.isUserLogin(a,b),a.isLogin_CallBack=function(d){a.isToLogin(d)}},a.isAdminLogin=function(){getOrPostRequestObj.userAndAdminSignIn.isAdminLogin(a,b)},a.isToLogin=function(d){d?c.path("/personal"):(a.userLogin.show(),a.rightMenu.hide())},a.isaLogin_CallBack=function(d){d?c.path("/adminMenu"):(a.adminLogin.show(),a.rightMenu.hide())}};register.$inject=["$scope","$http","$ionicLoading","$location"],indexModule.controller("registerCtrl",register);indexModule.service("shoppingCarService",function(){var b={};var c=true;var e=true;var d=false;var a=0;var f=[];b.getSendBtnHide=function(){return c};b.setSendBtnHide=function(g){c=g};b.getIsNone=function(){return e};b.setIsNone=function(g){e=g};b.getOpenEditPrice=function(){return d};b.setOpenEditPrice=function(g){d=g};b.getCountNum=function(){return a};b.setCountNum=function(g){a=g};b.getSpList=function(){return f};b.setSpList=function(g){f=g};return b});var shoppingCarCtrl=function(c,a,h,e,g,d,f){c.sendjson=[];c.sendBtnHide=h.getSendBtnHide();c.isNone=h.getIsNone();c.openEditPrice=h.getOpenEditPrice();c.countNum=h.getCountNum();c.closeEditPrice=false;c.editPriceHide=false;c.editBtn=true;c.iProNum=[];var b=0;c.spBackHide=c.getPerSpCar()==0;c.shoppingCarIconState();c.showConfirm=function(i){e.confirm({title:"提 示",content:"是否将该产品从购物车中删除?",buttons:[{text:"取 消",type:"alertCancel",onTap:function(j){return false}},{text:"确 定",type:"alertComfirm",onTap:function(j){return true}}]}).then(function(k){if(k){var j=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName)).reverse();c.countNum=c.countNum-j[i].mynumber*c.spLists[i].price;if(privateVerifictionObj.verifiction.isInt(c.countNum)===false){c.countNum=privateVerifictionObj.verifiction.subNum(c.countNum,2)}publicEventsObj.operatingDatabaseEvent.deleteItemData(c.spLists[i].id);c.deletePro(i)}})};c.sendOrderConfirm=function(){e.confirm({title:"提 示",content:"是否提交订单?",buttons:[{text:"取 消",type:"alertCancel",onTap:function(i){return false}},{text:"确 定",type:"alertComfirm",onTap:function(i){return true}}]}).then(function(i){if(i){var j=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));var m={};for(var l=0,k=j.length;l<k;l++){if(l===0){m="{'prodNum':'"+j[l].myid+"','cases':"+j[l].mynumber+"}"}else{m="{'prodNum':'"+j[l].myid+"','cases':"+j[l].mynumber+"}"}c.sendjson.push(m)}c.sendjson="["+c.sendjson+"]";getOrPostRequestObj.shoppingCarConnect.sendOrder(c,a)}})};c.shoppingCarInit_CallBack=function(j,i){h.setSpList(c.shoppingCharReturnData(j,i));c.spLists=h.getSpList();d(function(){c.loadingImg()},500)};c.shoppingCharReturnData=function(k){var j=k.respData;var n=[];var m;var l=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName)).reverse();for(var i=0,o=j.length;i<o;i++){m={name:j[i].prodName,img:privateVerifictionObj.verifiction.imgLink(j[i].firstProdImg),id:j[i].prodNum,price:j[i].stdPrice,num:l[i].mynumber,border2x:false,boderNone:false};n.push(m);m={};c.countNum=c.countNum+j[i].stdPrice*l[i].mynumber;if(privateVerifictionObj.verifiction.isInt(c.countNum)===false){c.countNum=privateVerifictionObj.verifiction.subNum(c.countNum,2)}}h.setCountNum(c.countNum);return n};c.isLogin_CallBack=function(l){if(l){if(localStorage.getItem(publicParameterObj.parameters.userName)==="[]"||localStorage.getItem(publicParameterObj.parameters.userName)===undefined){c.isNone=false;c.sendBtnHide=true;h.setSendBtnHide(true);h.setIsNone(false)}else{var j=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));for(var i=0,k=j.length;i<k;i++){c.iProNum.push(j[i].myid);if(i===k-1){c.sendBtnHide=false;c.editBtn=false;h.setSendBtnHide(false)}}c.isNone=!(j.length===0);h.setIsNone(c.isNone);getOrPostRequestObj.shoppingCarConnect.getShoppingInfo(c,a)}}else{d(function(){c.userLoginShowHide(true)},500)}};c.changeProNumber=function(j,i){var k=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName)).reverse();if(j==="add"){++c.spLists[i].num}else{if(c.spLists[i].num>1){--c.spLists[i].num}}c.countNum=c.countNum-k[i].mynumber*c.spLists[i].price+c.spLists[i].num*c.spLists[i].price;if(privateVerifictionObj.verifiction.isInt(c.countNum)===false){c.countNum=privateVerifictionObj.verifiction.subNum(c.countNum,2)}publicEventsObj.operatingDatabaseEvent.updateData(c.spLists[i].id,c.spLists[i].num);h.setCountNum(c.countNum);h.setSpList(c.spLists)};c.changeVal=function(i){var j=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName)).reverse();if(privateVerifictionObj.verifiction.isInt(c.spLists[i].num)){c.spLists[i].boderNone=false;c.spLists[i].border2x=false;b<=0?b=0:b--;c.countNum=c.countNum-j[i].mynumber*c.spLists[i].price+c.spLists[i].num*c.spLists[i].price;if(privateVerifictionObj.verifiction.isInt(c.countNum)===false){c.countNum=privateVerifictionObj.verifiction.subNum(c.countNum,2)}publicEventsObj.operatingDatabaseEvent.updateData(c.spLists[i].id,c.spLists[i].num);h.setCountNum(c.countNum)}else{c.spLists[i].border2x=true;b++}h.setSpList(c.spLists)};c.deletePro=function(i){c.spLists.splice(i,1);if(c.spLists.length===0){c.sendBtnHide=true;c.editBtn=true;c.isNone=false;h.setSendBtnHide(true);h.setIsNone(false)}h.setCountNum(c.countNum);h.setSpList(c.spLists)};c.openOrCloseEditPrice=function(){if(c.editPriceHide){if(b!==0){c.showAlert("提 示","请填写正确的商品数量!")}else{c.editPriceHide=false;c.closeEditPrice=true;c.openEditPrice=false;h.setOpenEditPrice(false)}}else{c.closeEditPrice=false;c.openEditPrice=true;c.editPriceHide=true;h.setOpenEditPrice()}};c.sendOrder=function(){c.sendOrderConfirm()};c.sendOrder_CallBack=function(){publicEventsObj.operatingDatabaseEvent.deleteallData();c.spLists=[];h.setSpList(c.spLists);c.viewStates.setWaitingState(false);c.viewStates.setShoppingCarState(false);f.show({template:"<div>订单提交成功!</div>",delay:100,duration:2000});g.path("/waitingAudit").replace()};c.showDetailed=function(i){if(c.editPriceHide===false){g.path("/detailed").search({proNum:i,hisPage:1})}};c.toProd=function(){g.path("/product")};if(c.viewStates.getShoppingCarState()===false){h.setCountNum(0);c.countNum=0;getOrPostRequestObj.userAndAdminSignIn.isUserLogin(c,a);c.viewStates.setShoppingCarState(true)}else{c.spLists=h.getSpList();d(function(){c.loadingImg()},500);if(c.spLists.length>0){c.editBtn=false}}};rightMenus.$inject=["$scope","$http","$location"];indexModule.controller("rightMenuCtrl",rightMenus);var superProCtrl=function(e,d,c,a){e.bodyHide=true;e.noMoreHide=true;e.loadingHide=false;e.pageNum=2;var b=true;e.$on("$stateChangeStart",function(){a.cancel(e.loadHttp)});e.superOrderRefresh=function(){a(function(){getOrPostRequestObj.superProConnect.superProList(e,d);e.$broadcast("scroll.refreshComplete")},2000)};e.superInit_CallBack=function(f){e.sproDatas=e.superReturnData(f);e.pageNum=2;a(function(){b=false},1000);a(function(){e.loadingImg()},500)};e.superLoadMore_CallBack=function(g){var f=e.superReturnData(g);e.sproDatas.proLeftInfos=e.sproDatas.proLeftInfos.concat(f.proLeftInfos);e.sproDatas.proRightInfos=e.sproDatas.proRightInfos.concat(f.proRightInfos);e.pageNum++;a(function(){b=false},1000);a(function(){e.loadingImg()},500)};e.superLoadMore=function(){if(e.noMoreHide&&b===false){b=true;e.loadHttp=a(function(){getOrPostRequestObj.superProConnect.superProListLoadMore(e,d);e.$broadcast("scroll.infiniteScrollComplete")},2000)}else{e.$broadcast("scroll.infiniteScrollComplete")}};e.superReturnData=function(g){var m,i,l=[],n=[],k=g.respData.dataList;for(var h=0,j=k.length;h<j;h+=2){m={proLeftNum:k[h].prodNum,proLeftImg:privateVerifictionObj.verifiction.imgLink(k[h].firstProdImg),proLeftName:k[h].prodName,proLeftPrice:"¥"+k[h].stdPrice};l.push(m);if(h+1<j){i={proRightNum:k[h+1].prodNum,proRightImg:privateVerifictionObj.verifiction.imgLink(k[h+1].firstProdImg),proRightName:k[h+1].prodName,proRightPrice:"¥"+k[h+1].stdPrice};n.push(i)}}var f={proLeftInfos:l,proRightInfos:n};if(k.length<14){e.noMoreHide=false;e.loadingHide=true}return f};e.proLeftClick=function(f){var g=e.getPerSpCar();e.setPerSpCar(g+4);c.path("/detailed").search({proNum:e.sproDatas.proLeftInfos[f].proLeftNum})};e.proRightClick=function(f){var g=e.getPerSpCar();if(g>0){e.setPerSpCar(g+4)}else{e.setPerSpCar(4)}c.path("/detailed").search({proNum:e.sproDatas.proRightInfos[f].proRightNum})};getOrPostRequestObj.superProConnect.superProList(e,d)};shoppingCarCtrl.$inject=["$scope","$http","shoppingCarService","$ionicPopup","$location","$timeout","$ionicLoading"];var shoppingCararr=["$scope","$http","shoppingCarService","$ionicPopup","$location","$timeout","$ionicLoading",shoppingCarCtrl];indexModule.controller("shoppingCar",shoppingCararr);var userLoginCtrl=function(a,c,b){a.login={};a.loginStyle={"border-bottom":"none","box-shadow":"0 2px 3px rgba(0,0,0,.15)"};a.iuserLogin=function(){getOrPostRequestObj.userAndAdminSignIn.userLogin(a,c,a.login.userName,a.login.userPass);a.login.userPass=""};a.userLoginDone_CallBack=function(d){localStorage.setItem("userName",d+"");publicParameterObj.parameters.userName=localStorage.userName.replace(/\"/g,"");publicEventsObj.operatingDatabaseEvent.crateTable();getOrPostRequestObj.userAndAdminSignIn.userLoginState=true;getOrPostRequestObj.userAndAdminSignIn.testSetJushTagNalias(a,c);a.toPersonal()};a.hideUserLogin=function(){var d=b.url().split("?")[0];switch(d){case"/personal":a.back();break;case"/modifyInfo":case"/modifyPass":case"/superPro":case"/myOrder":case"/waitingAudit":a.back(-2);break;case"/detailed":case"/message":a.pageHide();break;case"/shoppingCar":a.viewStates.setShoppingCarState(false);if(a.perSpCar!==0){a.back(-a.perSpCar)}else{a.back()}break;default:a.back();break}};a.toPersonal=function(){switch(b.url().split("?")[0]){case"/personal":case"/modifyInfo":case"/modifyPass":case"/superPro":case"/myOrder":case"/waitingAudit":case"/shoppingCar":a.pageHide();location.reload();break;case"/detailed":if(getOrPostRequestObj.userAndAdminSignIn.isToShoppingCar===true){b.path("/shoppingCar").search("")}else{a.pageHide()}break;case"/message":if(b.search().page==="editMessage"){a.userLogin.hide();a.editMessageShowHide(false)}else{b.path("/personal")}break;default:b.path("/personal")}};a.userNameFocus=function(){a.nameStyle={color:"#ef575c"}};a.userNameBlur=function(){a.nameStyle={color:"#294775"}};a.userPassFocus=function(){a.passStyle={color:"#ef575c"}};a.userPassBlur=function(){a.passStyle={color:"#294775"}}};superProCtrl.$inject=["$scope","$http","$location","$timeout"];indexModule.controller("superPro",superProCtrl);indexModule.service("modifyInfoService",function(){var a={};var f="未登录";var e="";var b="";var d="";var c="";a.getPerNameInfo=function(){return f};a.setPerNameInfo=function(g){f=g};a.getCompanyInfo=function(){return e};a.setCompanyInfo=function(g){e=g};a.getUserNameInfo=function(){return b};a.setUserNameInfo=function(g){b=g};a.getPhoneInfo=function(){return d};a.setPhoneInfo=function(g){d=g};a.getAddressInfo=function(){return c};a.setAddressInfo=function(g){c=g};return a});var modifyInfoCtrl=function(g,e,a,b,d){g.iInfoName=a.getPerNameInfo();var c={color:"#ef575c"};var f={color:"#294775"};g.modify={userCompany:a.getCompanyInfo(),userName:a.getUserNameInfo(),userPhone:a.getPhoneInfo(),userAddress:a.getAddressInfo()};g.muserCompanyFocus=function(){g.mCompany=c};g.muserCompanyBlur=function(){g.mCompany=f};g.muserNameFocus=function(){g.mName=c};g.muserNameBlur=function(){g.mName=f};g.muserPhoneFocus=function(){g.mPhone=c};g.muserPhoneBlur=function(){g.mPhone=f};g.muserAddressFocus=function(){g.mAddress=c};g.muserAddressBlur=function(){g.mAddress=f};g.userInfoInit_CallBack=function(h){g.iInfoName="用户名: "+h.respData.custName;g.modify.userCompany=h.respData.companyName;g.modify.userName=h.respData.contactPerson;g.modify.userPhone=h.respData.phoneNum;g.modify.userAddress=h.respData.address;g.updateInfo()};g.updateUserInfo=function(){if(g.modify.userCompany===""||g.modify.userCompany===undefined){g.showAlert("提 示","公司名不能为空!")}else{if(g.modify.userName===""||g.modify.userName===undefined){g.showAlert("提 示","联系人不能为空!")}else{if(g.modify.userPhone===""||g.modify.userPhone===undefined){g.showAlert("提 示","手机号码不能为空!")}else{if(privateVerifictionObj.verifiction.iphonever(g.modify.userPhone)===false){g.showAlert("提 示","手机号码格式不正确!")}else{getOrPostRequestObj.registConnect.userUpdateInfo(g,e)}}}}};g.updateUserInfoDone_CallBack=function(){d.show({template:"<div>个人信息修改完成!</div>",delay:100,duration:1000});g.updateInfo();window.history.back()};g.updateInfo=function(){a.setPerNameInfo(g.iInfoName);a.setCompanyInfo(g.modify.userCompany);a.setUserNameInfo(g.modify.userName);a.setPhoneInfo(g.modify.userPhone);a.setAddressInfo(g.modify.userAddress)};if(g.viewStates.getModifyState()===false){b(function(){getOrPostRequestObj.registConnect.userGetInfo(g,e)},450);g.viewStates.setModifyState(true)}};userLoginCtrl.$inject=["$scope","$http","$location"];indexModule.controller("userLoginCtrl",userLoginCtrl);var modifyPassCtrl=function(a,d,c){var b={color:"#ef575c"};var e={color:"#294775"};a.updatePass={};a.oldPassFocus=function(){a.oldPassStyle=b};a.oldPassBlur=function(){a.oldPassStyle=e};a.newPassFocus=function(){a.newPassStyle=b};a.newPassBlur=function(){a.newPassStyle=e};a.newPassCFocus=function(){a.newPassCStyle=b};a.newPassCBlur=function(){a.newPassCStyle=e};a.clearData=function(){a.updatePass.oldPass="";a.updatePass.newPass="";a.updatePass.newPassC=""};a.modifyPassDone=function(){c.show({template:"<div>密码修改成功!</div>",delay:100,duration:1000})};a.modifyPassDone_CallBakc=function(){a.modifyPassDone();window.history.back()};a.sendNewPass=function(){if(privateVerifictionObj.verifiction.isLetterAndNum(a.updatePass.oldPass)===false){a.showAlert("提 示","旧密码输入错误，只能由数字或字母组成!")}else{if(privateVerifictionObj.verifiction.isLetterAndNum(a.updatePass.newPass)===false||a.updatePass.newPass===undefined){a.showAlert("提 示","新密码输入错误，只能由数字或字母组成!")}else{if(a.updatePass.newPass!==a.updatePass.newPassC){a.showAlert("提 示","新密码两次输入不一致!")}else{getOrPostRequestObj.userAndAdminSignIn.userModifyPass(a,d,a.updatePass.oldPass,a.updatePass.newPass)}}}}};modifyInfoCtrl.$inject=["$scope","$http","modifyInfoService","$timeout","$ionicLoading"];var modifyInfoarr=["$scope","$http","modifyInfoService","$timeout","$ionicLoading",modifyInfoCtrl];indexModule.controller("modifyInfo",modifyInfoarr);var waitingAuditCtrl=function(e,d,c,a){e.custName="未登录";e.noMoreHide=true;e.loadingHide=false;e.pageNum=2;var b=true;e.$on("$stateChangeStart",function(){a.cancel(e.loadHttp)});e.userWaitingRefresh=function(){a(function(){getOrPostRequestObj.userWaitingAuditConnect.userShowWaitingList(e,d);e.$broadcast("scroll.refreshComplete")},2000)};e.waOrderInit_CallBack=function(f){e.waoLists=e.waitingAuditRetrunData(f);e.pageNum=2;a(function(){b=false},1000);a(function(){e.loadingImg()},500)};e.waOrderLoadMore_CallBack=function(g){var f=e.waitingAuditRetrunData(g);e.waoLists=e.waoLists.concat(f);e.pageNum++;a(function(){b=false},1000);a(function(){e.loadingImg()},500)};e.isLogin_CallBack=function(f){if(f===true){e.custName=publicParameterObj.parameters.userName}else{e.custName="未登录"}};e.waitingAuditLoadMore=function(){if(e.noMoreHide&&b===false){b=true;e.loadHttp=a(function(){getOrPostRequestObj.userWaitingAuditConnect.userWaitingListLoadMore(e,d);e.$broadcast("scroll.infiniteScrollComplete")},2000)}else{e.$broadcast("scroll.infiniteScrollComplete")}};e.waitingAuditRetrunData=function(f){var q,o=[],i=[],s,r=[],m=[],k=f.respData.dataList,j=true,h=true;for(var l=0,p=k.length;l<p;l++){j=true;h=true;r.push({orderItem:"产品总数: "+k[l].origOrderItemList.length});r.push({orderItem:"成交总价: "+k[l].priceTotal});r.push({orderItem:"下单日期: "+k[l].createDate});for(var g=0,n=k[l].origOrderItemList.length;g<n;g++){s={proId:k[l].origOrderItemList[g].prodNum,proImg:privateVerifictionObj.verifiction.imgLink(k[l].origOrderItemList[g].whereimg),proName:k[l].origOrderItemList[g].prodName,proNum:"订购数量 : "+k[l].origOrderItemList[g].cases,proPrice:"¥"+k[l].origOrderItemList[g].prodPrice};if(g<3){o.push(s)}else{j=true;h=false;i.push(s)}s={}}q={waorderId:k[l].origOrderNum,isProHide:j,isHide:h,waoItems:r,waoPros:o,date:k[l].createDate,waiCountNum:i.length+o.length,waoHidePro:i,waiCountPrice:"¥"+k[l].priceTotal,btnText:"显示全部"};m.push(q);r=[];o=[];i=[]}if(k.length<9){e.noMoreHide=false;e.loadingHide=true}return m};e.toDetailed=function(f){var g=e.getPerSpCar()+4;e.setPerSpCar(g);c.path("/detailed").search({proNum:f})};e.hideShowPro=function(f){e.waoLists[f].isProHide=!e.waoLists[f].isProHide;e.waoLists[f].isProHide?e.waoLists[f].btnText="显示全部":e.waoLists[f].btnText="隐藏部分"};a(function(){getOrPostRequestObj.userAndAdminSignIn.isUserLogin(e,d)},450);getOrPostRequestObj.userWaitingAuditConnect.userShowWaitingList(e,d)};modifyPassCtrl.$inject=["$scope","$http","$ionicLoading"];indexModule.controller("modifyPass",modifyPassCtrl);waitingAuditCtrl.$inject=["$scope","$http","$location","$timeout"];indexModule.controller("waitingAudit",waitingAuditCtrl);
