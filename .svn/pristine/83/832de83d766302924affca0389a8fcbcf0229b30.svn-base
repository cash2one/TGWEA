var mobileEvt={webpage_mobile:function(d){var c=window.open(d.url,"_blank","location=yes,closebuttoncaption=关闭,transitionstyle=crossdissolve,presentationstyle=pagesheet");c.addEventListener("loaderror",function(a){d.showAlert("提 示","error: "+a.message)})}};var operatingDatabaseEvent={crateTable:function(){if(localStorage.getItem(publicParameterObj.parameters.userName)==undefined){var b=[];localStorage.setItem(publicParameterObj.parameters.userName,JSON.stringify(b))}else{}},insertData:function(j,l,m){var k=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));var h=k.length;for(var n=0,i=k.length;n<i;n++){if(k[n].myid==j){m.showAlert("提 示","这件商品已存在购物车中!");return}}k.push({myid:j,mynumber:l});localStorage.setItem(publicParameterObj.parameters.userName,JSON.stringify(k));if(k.length>h){m.viewStates.setShoppingCarState(false);m.showAlert("提 示","添加成功!")}else{m.showAlert("提 示","添加失败!")}},selectData:function(){var b=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));return b},updateData:function(h,j){var i=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));for(var f=0,g=i.length;f<g;f++){if(i[f].myid===h){if(i[f].mynumber!=j){i[f].mynumber=j;localStorage.setItem(publicParameterObj.parameters.userName,JSON.stringify(i));return}return}}},deleteItemData:function(g){var h=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));for(var e=0,f=h.length;e<f;e++){if(h[e].myid===g){h.splice(e,1);localStorage.setItem(publicParameterObj.parameters.userName,JSON.stringify(h));return}}},deleteallData:function(){localStorage.removeItem(publicParameterObj.parameters.userName);publicEventsObj.operatingDatabaseEvent.crateTable()}};var publicEventsClass={mobileEvent:Object.create(mobileEvt),operatingDatabaseEvent:Object.create(operatingDatabaseEvent)};var publicEventsObj=Object.create(publicEventsClass);var indexModule=angular.module("ionicApp",["ionic"]);var iconfig=function(c,d){publicEventsObj.operatingDatabaseEvent.crateTable();c.state("index",{url:"/index",templateUrl:"indexBak.html",controller:"index"}).state("product",{url:"/product",templateUrl:"product.html",controller:"product"}).state("proList",{url:"/proList",templateUrl:"proList.html",controller:"proList"}).state("about",{url:"/about",templateUrl:"about.html",controller:"about"}).state("contact",{url:"/contact",templateUrl:"contact.html",controller:"contact"}).state("detailed",{url:"/detailed",templateUrl:"detailed.html",controller:"detailed"}).state("message",{url:"/message",templateUrl:"message.html",controller:"message"}).state("category",{url:"/category",templateUrl:"category.html",controller:"category"}).state("searchRes",{url:"/searchRes",templateUrl:"proSearchResList.html",controller:"searchRes"}).state("shoppingCar",{url:"/shoppingCar",templateUrl:"shoppingCar.html",controller:"shoppingCar"}).state("personal",{url:"/personal",templateUrl:"personal.html",controller:"personal"}).state("modifyPass",{url:"/modifyPass",templateUrl:"userModifyPass.html",controller:"modifyPass"}).state("modifyInfo",{url:"/modifyInfo",templateUrl:"userModifyInfo.html",controller:"modifyInfo"}).state("waitingAudit",{url:"/waitingAudit",templateUrl:"userWaitingAudit.html",controller:"waitingAudit"}).state("myOrder",{url:"/myOrder",templateUrl:"myOrder.html",controller:"myOrder"}).state("superPro",{url:"/superPro",templateUrl:"superPro.html",controller:"superPro"}).state("adminMenu",{url:"/adminMenu",templateUrl:"adminMenu.html",controller:"adminMenu"}).state("adminModifyPass",{url:"/adminModifyPass",templateUrl:"adminModifyPass.html",controller:"adminModifyPass"}).state("adminClient",{url:"/adminClient",templateUrl:"adminClientSearch.html",controller:"adminClient"}).state("adminProManage",{url:"/adminProManage",templateUrl:"adminProManage.html",controller:"adminProManage"}).state("adminSelectOrder",{url:"/adminSelectOrder",templateUrl:"adminSelectOrder.html",controller:"adminSelectOrder"}).state("historyOrder",{url:"/historyOrder",templateUrl:"historyOrder.html",controller:"historyOrder"}).state("adminOrderInfo",{url:"/adminOrderInfo",templateUrl:"adminOrderInfo.html",controller:"adminOrderInfo"});d.otherwise("/index")};var imainCtrl=function(I,B,R,F,Q,D,U,M){I.cancelHide=false;I.acancelHide=false;I.abackHide=true;I.tabHide=true;I.tabBarHide=false;I.search={};I.navStyle={"border-bottom":"none","box-shadow":"0 2px 3px rgba(0,0,0,.15)"};I.sendMessageIsLogin=true;I.iMessageDatas="";I.indexIsShow=false;I.categoryIsShow=false;I.shoppingCarIsShow=false;if(localStorage.getItem("perSpCar")==undefined){localStorage.setItem("perSpCar",0)}I.perSpCar=localStorage.getItem("perSpCar")>>0;I.viewStates={};var G=false;var V=false;var Z=false;var H=false;var T=false;var P=false;var L=false;var J=false;var C=false;var N=false;var O=false;var W=false;var E=false;var K=false;var Y=false;var ab=false;var aa=false;var X=false;var S=false;I.viewStates.getIndexState=function(){return G};I.viewStates.setIndexState=function(a){G=a};I.viewStates.getProductState=function(){return V};I.viewStates.setProductState=function(a){V=a};I.viewStates.getProListState=function(){return Z};I.viewStates.setProListState=function(a){Z=a};I.viewStates.getAboutState=function(){return H};I.viewStates.setAboutState=function(a){H=a};I.viewStates.getContactState=function(){return T};I.viewStates.setContactState=function(a){T=a};I.viewStates.getMessageState=function(){return P};I.viewStates.setMessageState=function(a){P=a};I.viewStates.getShoppingCarState=function(){return C};I.viewStates.setShoppingCarState=function(a){C=a};I.viewStates.getCategoryState=function(){return L};I.viewStates.setCategoryState=function(a){L=a};I.viewStates.getSearchResListState=function(){return J};I.viewStates.setSearchResListState=function(a){J=a};I.viewStates.getPersonalState=function(){return N};I.viewStates.setPersonalState=function(a){N=a};I.viewStates.getModifyState=function(){return O};I.viewStates.setModifyState=function(a){O=a};I.viewStates.getMyOrderState=function(){return W};I.viewStates.setMyOrderState=function(a){W=a};I.viewStates.getSuperProState=function(){return E};I.viewStates.setSuperProState=function(a){E=a};I.viewStates.getWaitingState=function(){return K};I.viewStates.setWaitingState=function(a){K=a};I.viewStates.getAdmMenuState=function(){return Y};I.viewStates.setAdmMenuState=function(a){Y=a};I.viewStates.getAdmSelOrderState=function(){return ab};I.viewStates.setAdmSelOrderState=function(a){ab=a};I.viewStates.getAdmProManageState=function(){return aa};I.viewStates.setAdmProManageState=function(a){aa=a};I.viewStates.getAdmClientState=function(){return X};I.viewStates.setAdmClientState=function(a){X=a};I.viewStates.getHistoryOrderState=function(){return S};I.viewStates.setHistoryOrderState=function(a){S=a};getOrPostRequestObj.detailedConnect.isCom(I,B);I.showAlert=function(a,b){Q.alert({title:a,content:b,buttons:[{text:"确 定",type:"alertCancel"}]}).then(function(c){})};I.backdropClick=function(){I.closeBackdrop()};I.tabBarToPage=function(a){I.isSpNewPage=false;switch(a){case 0:if(I.indexIsShow===false){if(I.perSpCar!=0){I.back(-I.perSpCar);I.setPerSpCar(0)}else{R.path("/index").replace()}}break;case 1:if(I.categoryIsShow===false){if(I.isIndex===true){R.path("/category")}else{if(I.perSpCar>0){R.path("/category");var b=I.perSpCar+1;I.setPerSpCar(b)}else{R.path("/category").replace()}}}break;case 2:if(I.shoppingCarIsShow===false){if(I.isIndex===true||I.perSpCar>0&&I.perSpCar<3){R.path("/shoppingCar")}else{if(I.perSpCar>=3){I.back()}else{R.path("/shoppingCar").replace()}}}break}};I.setPerSpCar=function(a){I.perSpCar=a;localStorage.setItem("perSpCar",a)};I.getPerSpCar=function(){return I.perSpCar};I.OpenMenus=function(){M.retain();I.openMenu=true};I.toPerson=function(){I.closeBackdrop()};I.closeBackdrop=function(){M.release();I.openMenu=false;I.closeMenu=true};I.getMessage=function(){return I.iMessageDatas};I.setMessage=function(a){I.iMessageDatas=a};I.back=function(a){if(a!==undefined&&a!==null){window.history.go(a)}else{if(I.perSpCar>0){var b=I.perSpCar-1;I.setPerSpCar(b)}window.history.back()}};I.admLoginLode=function(){F(function(){I.adminLoginShowHide(true)},500)};I.userLoginLoad=function(){F(function(){I.userLoginShowHide(true)},500)};I.pageHide=function(){if(I.userLogin){I.userLoginShowHide(false)}if(I.iregister){I.userRegisterShowHide(false)}};I.$on("$stateChangeStart",function(){publicParameterObj.parameters.loadingPage=0;I.isIndex=R.url().split("?")[0]==="/index";I.indexIsShow=false;I.categoryIsShow=false;I.shoppingCarIsShow=false;I.navBarIsHide=false;var a=R.url().split("?")[0];I.isSpNewPage=true;if(a==="/index"||a==="/category"||a==="/shoppingCar"){if(a==="/category"){I.navBarIsHide=true}if(I.tabBarHide){F(function(){I.tabBarHide=false},300)}}else{if(a==="/personal"){I.tabBarHide=true}else{I.tabBarHide=true}}if(I.openMenu===true){I.toPerson()}I.pageHide();if(I.adminLogin){I.adminLoginShowHide(false)}});I.toAdminMenu=function(){I.closeBackdrop();R.path("/adminMenu")};I.toPersonal=function(){I.closeBackdrop();if(I.perSpCar!==0){I.back(-(I.perSpCar-1))}else{R.path("/personal")}};I.indexBarIconState=function(){I.indexIsShow=!I.indexIsShow};I.categoryBarIconState=function(){I.categoryIsShow=!I.categoryIsShow};I.shoppingCarIconState=function(){I.shoppingCarIsShow=!I.shoppingCarIsShow};U.fromTemplateUrl("userLogin.html",function(a){I.userLogin=a},{scope:I,animation:"slide-in-up"});U.fromTemplateUrl("register.html",function(a){I.iregister=a},{scope:I,animation:"slide-in-up"});U.fromTemplateUrl("adminLogin.html",function(a){I.adminLogin=a},{scope:I,animation:"slide-in-up"});U.fromTemplateUrl("editMessage.html",function(a){I.editContent=a},{scope:I,animation:"slide-in-up"});I.userLoginShowHide=function(a){a?I.userLogin.show():I.userLogin.hide()};I.userRegisterShowHide=function(a){a?I.iregister.show():I.iregister.hide()};I.adminLoginShowHide=function(a){a?I.adminLogin.show():I.adminLogin.hide()};I.editMessageShowHide=function(a){if(a===true){getOrPostRequestObj.userAndAdminSignIn.isUserLogin(I,B);R.search({page:"editMessage"}).replace();I.editContent.show()}else{R.search("").replace();I.editContent.hide()}};I.getSendMessageState=function(){return I.sendMessageIsLogin};I.isLogin_CallBack=function(a){I.sendMessageIsLogin=!!a};I.loadingImg=function(){function a(){if(window.navigator.userAgent.toLowerCase().indexOf("msie")>=1){return true}else{return false}}var b=a();(function(){var d=$$("mainContent");if(d!==undefined&&d!==null&&d.getElementsByTagName("img")!==undefined&&d.getElementsByTagName("img")!==null){var e=d.getElementsByTagName("img").length,h=[];for(var f=0,c=e;f<c;f++){var i=d.getElementsByTagName("img")[f];if(i){i.setAttribute("_lazysrc",i.getAttribute("_lazysrc")+"?"+Math.random());h.push(i)}}var g=new ImagesLazyLoad({container:window,mode:"vertical",holder:"img/nopic.jpg",onLoad:function(k){k.onload=function(){j(this)}}});function j(k){var l=setInterval(function(){var m=b?k.filters.alpha.opacity:k.style.opacity*100;if(m<100){b?k.filters.alpha.opacity+=10:k.style.opacity=(m+10)/100}else{clearInterval(l)}},15)}}})()}};iconfig.$inject=["$stateProvider","$urlRouterProvider"];indexModule.config(iconfig);indexModule.service("indexService",function(){var q={};var k=[];var o=[];var p=true;var l=true;var i=true;var j=false;var h=1;var n={};q.getMoreHide=function(){return i};q.setMoreHide=function(a){i=a};q.getLoadingHide=function(){return j};q.setLoadingHide=function(a){j=a};q.getPageNum=function(){return h};q.setPageNum=function(a){h=a};q.getProData=function(){return n};q.setProData=function(a){n=a};q.getSlider=function(){return k};q.setSlider=function(a){k=a};q.getNewProData=function(){return o};q.setNewProData=function(a){o=a};q.getNewProHide=function(){return p};q.setNewProHide=function(a){p=a};q.getProBtnHide=function(){return l};q.setProBtnHide=function(a){l=a};return q});var indexCtrl=function(n,r,p,w,u){n.newProIsHide=p.getNewProHide();n.proBtnHide=p.getProBtnHide();n.myInterval=5000;n.bodyHide=true;n.detailedId="";n.setPerSpCar(0);n.bodyHide=true;n.noMoreHide=p.getMoreHide();n.loadingHide=p.getLoadingHide();n.pageNum=p.getPageNum();var t=true;n.indexBarIconState();n.$on("$stateChangeStart",function(){w.cancel(n.loadHttp)});n.indexRefresh=function(){w(function(){getOrPostRequestObj.indexConnect.getIndexBanner(n,r);getOrPostRequestObj.indexConnect.getIndexNewProduct(n,r);n.proRefresh();n.$broadcast("scroll.refreshComplete")},2000)};n.bannerInit_CallBack=function(c){p.setSlider(n.bannerReturnData(c));var h=p.getSlider();var g=[];if(document.querySelector("#indexSwiperView").querySelector("ul")){var d=document.getElementById("indexSwiperView");d.removeChild(d.getElementsByTagName("ul").item(1))}document.getElementById("indexSwiper").innerHTML="";for(var b=0,a=h.length;b<a;b++){g.push({content:"<div class='bannerImg'><img src='"+h[b].iSlideImg+"' onerror=this.src=errImg></div>"})}var e={type:"dom",data:g,dom:document.getElementById("indexSwiper"),duration:3000,isLooping:true,isAutoplay:true,onslidechange:function(k){j.changeIndexDot()}};if(h.length>0){var j=new iSlider(e);var f={top:"105px",width:"100%",diameter:"0.8em",borderColor:"#365b88"};j.renderDot(f)}};n.toBannerDetailed=function(b){if(n.islides[b].isToUrl===0){try{window.device.version.substr(0,1);publicEventsObj.mobileEvent.webpage_mobile(n.islides[b].content)}catch(a){window.open(n.islides[b].content)}}else{n.showDetailed(n.islides[b].content);window.location.href="#/detailed"}};n.bannerReturnData=function(c){var a=[];var d=c.respData;var b={};for(var e=0,f=d.length;e<f;e++){b={iSlideImg:privateVerifictionObj.verifiction.imgLink(d[e].imgUrl),isToUrl:d[e].linkType,content:d[e].linkContent};a.push(b)}return a};n.newProInit_CallBack=function(a){p.setNewProData(n.newProReturnData(a));n.newProDatas=p.getNewProData();n.newProDatas.length===0?p.setNewProHide(true):p.setNewProHide(false);n.newProIsHide=p.getNewProHide();n.proBtnHide=false;p.setProBtnHide(false);w(function(){n.loadingImg()},500)};n.newProReturnData=function(d){var f=d.respData.dataList;var a;var c=[];var b=[];var g=[];var h=f.length;for(var e=0;e<h;e++){b.push({newProNum:f[e].prodNum,newProImg:privateVerifictionObj.verifiction.imgLink(f[e].firstProdImg)});if(e===1||h<2){g=b;b=[]}else{if((e-1)%3===0||e!==0&&e===h-1&&(h-2)%3!==0){c.push(b);b=[]}}}a={newIndexImgs:g,newProImgs:c};return a};n.morePro=function(){u.path("/product")};n.aboutBack=function(){if(u.url()==="/contact"){window.history.back(-1)}};n.showDetailed=function(a){if(a){u.path("/detailed").search({proNum:a})}};if(n.viewStates.getIndexState()===false){getOrPostRequestObj.indexConnect.getIndexBanner(n,r);getOrPostRequestObj.indexConnect.getIndexNewProduct(n,r);getOrPostRequestObj.productConnect.getProduct(n,r);n.viewStates.setIndexState(true)}else{n.newProDatas=p.getNewProData();var q=p.getSlider();var o=[];for(var v=0,t=q.length;v<t;v++){o.push({content:"<div class='bannerImg' ><img src='"+q[v].iSlideImg+"' onerror=this.src=errImg></div>"})}var x={type:"dom",data:o,dom:document.getElementById("indexSwiper"),duration:3000,isLooping:true,isDebug:false,isAutoplay:true,onslidechange:function(a){s.changeIndexDot()}};if(q.length>0){var s=new iSlider(x);var i={top:"105px",width:"100%",diameter:"0.8em",borderColor:"#00407a"};s.renderDot(i)}n.proDatas=p.getProData();t=false;w(function(){n.loadingImg()},500)}n.productInit_CallBack=function(a){p.setProData(n.productReturnData(a));n.proDatas=p.getProData();n.pageNum=2;p.setPageNum(2);w(function(){t=false},1000);w(function(){n.loadingImg()},500)};n.productLoadMore_CallBack=function(a){var b=n.productReturnData(a);n.proDatas.proLeftInfos=n.proDatas.proLeftInfos.concat(b.proLeftInfos);n.proDatas.proRightInfos=n.proDatas.proRightInfos.concat(b.proRightInfos);a.setProData(n.proDatas);n.pageNum++;a.setPageNum(n.pageNum);w(function(){t=false},1000);w(function(){n.loadingImg()},500)};n.productLoadMore=function(){if(n.noMoreHide&&t===false){t=true;n.loadHttp=u(function(){getOrPostRequestObj.productConnect.getProductMore(n,r);n.$broadcast("scroll.infiniteScrollComplete")},2000)}else{n.$broadcast("scroll.infiniteScrollComplete")}};n.proRefresh=function(){getOrPostRequestObj.productConnect.getProduct(n,r);n.noMoreHide=true;n.loadingHide=false;p.setMoreHide(true);p.setLoadingHide(false);n.pageNum=1;p.setPageNum(1)};n.productReturnData=function(h){var d,h,e=[],c=[],f=h.respData.dataList;for(var a=0,g=f.length;a<g;a+=2){d={proLeftNum:f[a].prodNum,proLeftImg:privateVerifictionObj.verifiction.imgLink(f[a].firstProdImg),proLeftName:f[a].prodName,proLeftPrice:"¥"+f[a].stdPrice};e.push(d);if(a+1<g){h={proRightNum:f[a+1].prodNum,proRightImg:privateVerifictionObj.verifiction.imgLink(f[a+1].firstProdImg),proRightName:f[a+1].prodName,proRightPrice:"¥"+f[a+1].stdPrice};c.push(h)}}var b={proLeftInfos:e,proRightInfos:c};if(f.length<14){n.noMoreHide=false;n.loadingHide=true;p.setMoreHide(false);p.setLoadingHide(true)}return b};n.proLeftClick=function(a){u.path("/detailed").search({proNum:n.proDatas.proLeftInfos[a].proLeftNum})};n.proRightClick=function(a){u.path("/detailed").search({proNum:n.proDatas.proRightInfos[a].proRightNum})}};imainCtrl.$inject=["$scope","$http","$location","$timeout","$ionicPopup","$ionicPopover","$ionicModal","$ionicBackdrop"];indexModule.controller("mainCtrl",imainCtrl);indexModule.service("aboutService",function(){var d={};var e="";var f="";d.getAboutImg=function(){return e};d.setAboutImg=function(a){e=a};d.getAboutText=function(){return f};d.setAboutText=function(a){f=a};return d});var aboutCtrt=function(f,g,h,e){f.aboutInit_CallBack=function(a){var b=f.aboutReturnData(a);f.iAboutImg=b.img;f.iAboutText=b.contentText;h.setAboutImg(b.img);h.setAboutText(b.contentText);e(function(){f.loadingImg()},500)};f.aboutReturnData=function(a){var b=a.respData,d="",i=b.introduction.replace(/\./g,"。").split("。");for(var c=0,l=i.length;c<l;c++){d+="<p>"+i[c]+"</p>"}return{contentText:d,img:privateVerifictionObj.verifiction.imgLink(b.ownerImg)}};if(f.viewStates.getAboutState()===false){getOrPostRequestObj.orderInfoConnect.getAboutInfo(f,g);f.viewStates.setAboutState(true)}else{f.iAboutImg=h.getAboutImg();f.iAboutText=h.getAboutText()}};indexCtrl.$inject=["$scope","$http","indexService","$timeout","$location"];var indexCtrlarr=["$scope","$http","indexService","$timeout","$location",indexCtrl];indexModule.controller("index",indexCtrlarr);indexModule.service("admClientService",function(){var j={};var k=false;var i=true;var m=true;var o=false;var l="";var n="";var p=2;j.getNameClick=function(){return k};j.setNameClick=function(a){k=a};j.getPhoneClick=function(){return i};j.setPhoneClick=function(a){i=a};j.getMoreHide=function(){return m};j.setMoreHide=function(a){m=a};j.getLoadingHide=function(){return o};j.setLoadingHide=function(a){o=a};j.getSearchKey=function(){return l};j.setSearchKey=function(a){l=a};j.getClients=function(){return n};j.setClients=function(a){n=a};j.getPageNum=function(){return p};j.setPageNum=function(a){p=a};return j});var adminClientCtrl=function(i,j,h,k,n){i.keyColor="keyColor-link";i.keyColors="keyColor-active";i.isNameClick=h.getNameClick();i.isPhoneClick=h.getPhoneClick();i.noMoreHide=h.getMoreHide();i.loadingHide=h.getLoadingHide();i.clientSearchEvt=null;i.pageNum=h.getPageNum();i.aClient={searchKey:h.getSearchKey()};var l=h.getSearchKey();var m=true;i.$on("$stateChangeStart",function(){n.cancel(i.loadHttp)});i.adminClientInit_CallBack=function(a){h.setClients(i.adminClientReturnData(a));i.iClients=h.getClients();i.pageNum=2;h.setPageNum(2);n(function(){m=false},1000)};i.adminClientLoadMore_CallBack=function(a){var b=i.adminClientReturnData(a);i.iClients=i.iClients.concat(b);h.setClients(i.iClients);i.pageNum++;h.setPageNum(i.pageNum);n(function(){m=false},1000)};i.adminClientLoadMore=function(){if(i.noMoreHide&&m===false){m=true;i.loadHttp=n(function(){getOrPostRequestObj.adminClientSearchConnect.adminUserInfoLoadMore(i,j);i.$broadcast("scroll.infiniteScrollComplete")},2000)}else{i.$broadcast("scroll.infiniteScrollComplete")}};i.adminClientReturnData=function(a){if(a.respData.dataList.length<9){i.noMoreHide=false;i.loadingHide=true;h.setMoreHide(false);h.setLoadingHide(true)}return a.respData.dataList};i.searchTextChange=function(){h.setSearchKey(i.aClient.searchKey)};i.searchUser=function(){if(l!==i.aClient.searchKey){getOrPostRequestObj.adminClientSearchConnect.searchName="";getOrPostRequestObj.adminClientSearchConnect.searchPhone="";i.pageNum=1;h.setPageNum(1);i.noMoreHide=true;i.loadingHide=false;if(i.isNameClick===false){getOrPostRequestObj.adminClientSearchConnect.searchName=i.aClient.searchKey}else{if(i.isPhoneClick===false){getOrPostRequestObj.adminClientSearchConnect.searchPhone=i.aClient.searchKey}}getOrPostRequestObj.adminClientSearchConnect.adminSearchUserInfo(i,j);m=true}l=i.aClient.searchKey};i.clickKey=function(a){i.isNameClick=true;i.isPhoneClick=true;switch(a){case 1:i.isNameClick=!i.isNameClick;break;case 2:i.isPhoneClick=!i.isPhoneClick;break;default:break}h.setNameClick(i.isNameClick);h.setPhoneClick(i.isPhoneClick)};i.searchUserOrder=function(a){i.viewStates.setHistoryOrderState(false);k.path("/historyOrder").search({custNum:i.iClients[a].custNum,custName:i.iClients[a].companyName})};if(i.viewStates.getAdmClientState()===false){getOrPostRequestObj.adminClientSearchConnect.adminSearchUserInfo(i,j);i.viewStates.setAdmClientState(true)}else{i.iClients=h.getClients();m=false}};aboutCtrt.$inject=["$scope","$http","aboutService","$timeout"];var aboutCtrlarr=["$scope","$http","aboutService","$timeout",aboutCtrt];indexModule.controller("about",aboutCtrlarr);var adminLoginCtrl=function(e,f,d){e.cancelHide=false;e.backHide=true;e.alogin={};e.adminloginStyle={"border-bottom":"none","box-shadow":"0 2px 3px rgba(0,0,0,.15)"};e.adminNameFocus=function(){e.anameStyle={color:"#ef575c"}};e.adminNameBlur=function(){e.anameStyle={color:"#294775"}};e.adminPassFocus=function(){e.apassStyle={color:"#ef575c"}};e.adminPassBlur=function(){e.apassStyle={color:"#294775"}};e.hideAdminLogin=function(){var a=d.url().split("?")[0];switch(a){case"/adminMenu":e.back();break;case"/adminModifyPass":case"/adminClient":case"/adminSelectOrder":case"/adminProManage":e.back(-2);break;case"/adminOrderInfo":case"/historyOrder":e.back(-3);break;default:e.adminLoginShowHide(false)}};e.toAdminMenu=function(){switch(d.url().split("?")[0]){case"/adminMenu":case"/adminModifyPass":case"/adminClient":case"/adminSelectOrder":case"/adminProManage":case"/adminOrderInfo":location.reload();break;default:d.path("/adminMenu");break}};e.adminLoginBtnEvt=function(){if(e.alogin.adminName===""||e.alogin.adminName===undefined){e.showAlert("提 示","账号不能为空!")}else{if(e.alogin.adminPass===""||e.alogin.adminPass===undefined){e.showAlert("提 示","密码不能为空!")}else{getOrPostRequestObj.userAndAdminSignIn.adminLogin(e,f)}}};e.adminLoginDone_CallBack=function(){e.toAdminMenu();e.alogin.adminPass=""}};adminClientCtrl.$inject=["$scope","$http","admClientService","$location","$timeout"];var adminClientarr=["$scope","$http","admClientService","$location","$timeout",adminClientCtrl];indexModule.controller("adminClient",adminClientarr);indexModule.service("adminMenuService",function(){var e={};var f="未登录";var d="";e.getCompany=function(){return f;0};e.setCompany=function(a){f=a};e.getName=function(){return d};e.setName=function(a){d=a};return e});var adminMenuCtrl=function(h,i,j,l,k,g){h.adminCompany=j.getCompany();h.adminName=j.getName();h.showConfirm=function(){l.confirm({title:"提 示",content:"您确定要退出登录吗?",buttons:[{text:"取 消",type:"alertCancel",onTap:function(a){return false}},{text:"确 定",type:"alertComfirm",onTap:function(a){return true}}]}).then(function(a){if(a){getOrPostRequestObj.userAndAdminSignIn.adminLoginOut(h,i);h.viewStates.setAdmMenuState(false);j.setCompany("未登录");j.setName("")}else{}})};h.adminInfo_CallBack=function(a){h.adminCompany=a.respData.companyName;h.adminName=a.respData.adminName;j.setCompany(a.respData.companyName);j.setName(a.respData.adminName);h.viewStates.setAdmMenuState(true)};h.adminOutLogin=function(){h.showConfirm()};h.admList=function(a){switch(a){case 0:k.path("/adminSelectOrder");break;case 1:k.path("/adminProManage");break;case 2:k.path("/adminClient");break;case 3:k.path("/adminModifyPass");break}};if(h.viewStates.getAdmMenuState()===false){g(function(){getOrPostRequestObj.adminInfoConnect.getAdminInfo(h,i)},500)}};adminLoginCtrl.$inject=["$scope","$http","$location"];indexModule.controller("adminLoginCtrl",adminLoginCtrl);var adminModifyPassCtrl=function(f,h,i){var j={color:"#ef575c"};var g={color:"#294775"};f.aupdatePass={};f.aoldPassFocus=function(){f.aoldPassStyle=j};f.aoldPassBlur=function(){f.aoldPassStyle=g};f.anewPassFocus=function(){f.anewPassStyle=j};f.anewPassBlur=function(){f.anewPassStyle=g};f.anewPassCFocus=function(){f.anewPassCStyle=j};f.anewPassCBlur=function(){f.anewPassCStyle=g};f.clearData=function(){f.aupdatePass.oldPass="";f.aupdatePass.newPass="";f.aupdatePass.newPassC=""};f.amodifyPassDone=function(){i.show({template:"<div>密码修改成功!</div>",delay:100,duration:1000})};f.amodifyPassDone_CallBack=function(){f.amodifyPassDone();window.history.back()};f.asendNewPass=function(){if(privateVerifictionObj.verifiction.isLetterAndNum(f.aupdatePass.oldPass)===false){f.showAlert("提 示","旧密码输入错误，只能由数字或字母组成!")}else{if(privateVerifictionObj.verifiction.isLetterAndNum(f.aupdatePass.newPass)===false||f.aupdatePass.newPass===undefined){f.showAlert("提 示","新密码输入错误，只能由数字或字母组成!")}else{if(f.aupdatePass.newPass!==f.aupdatePass.newPassC){f.showAlert("提 示","新密码两次输入不一致!")}else{getOrPostRequestObj.userAndAdminSignIn.isAdminLegality(f,h,f.aupdatePass.oldPass,f.aupdatePass.newPass)}}}}};adminMenuCtrl.$inject=["$scope","$http","adminMenuService","$ionicPopup","$location","$timeout"];var adminMenuCtrlarr=["$scope","$http","adminMenuService","$ionicPopup","$location","$timeout",adminMenuCtrl];indexModule.controller("adminMenu",adminMenuCtrlarr);var adminOrderInfoCtrl=function(f,g,h,e){f.iOrderId=h.search().orderId;f.toDetailed=function(a){h.path("/detailed").search({proNum:a,hisPage:1})};f.aOrderInfoInit_CallBack=function(c){var a=[],j={},d=[],b;for(var m=0,n=c.orderItemList.length;m<n;m++){j={proId:c.orderItemList[m].prodNum,img:privateVerifictionObj.verifiction.imgLink(c.orderItemList[m].whereimg),name:c.orderItemList[m].prodName,num:"订购数量 : "+c.orderItemList[m].cases,price:"¥"+c.orderItemList[m].custProdPrice};d.push(j)}b={orderNum:c.orderNum,userName:c.custName,proCount:c.orderItemList.length,proPrices:"¥"+c.custPriceTotal,cashState:c.cashStatusName,cashType:c.cashTypeName,deliveryState:c.deliverStatusName,date:c.createDate,iPros:d};a.push(b);f.aOrderInfos=a;e(function(){f.loadingImg()},500)};getOrPostRequestObj.adminSelectOrderConnect.adminGetOrderInfo(f,g)};adminModifyPassCtrl.$inject=["$scope","$http","$ionicLoading"];indexModule.controller("adminModifyPass",adminModifyPassCtrl);indexModule.service("admProManageService",function(){var i={};var l="";var m={};var j=true;var n=false;var k="";var h=2;i.getSearchText=function(){return l};i.setSearchText=function(a){l=a};i.getData=function(){return m};i.setData=function(a){m=a};i.getMoreHide=function(){return j};i.setMoreHide=function(a){j=a};i.getLoadingHide=function(){return n};i.setLoadingHide=function(a){n=a};i.getaEditPros=function(){return k};i.setaEditPros=function(a){k=a};i.getPageNum=function(){return h};i.setPageNum=function(a){h=a};return i});var adminProManageCtrl=function(j,k,o,l,m,i){j.aProManage={searchVal:o.getSearchText()};j.iProId="";j.iProVlaue="";j.pricePrompt="";j.numPrompt="";j.index=0;j.data=o.getData();j.noMoreHide=o.getMoreHide();j.loadingHide=o.getLoadingHide();j.manageSearchEvt=null;j.pageNum=o.getPageNum();var p=o.getSearchText();var n=true;j.$on("$stateChangeStart",function(){i.cancel(j.loadHttp)});j.toDetailed=function(a){l.path("/detailed").search({proNum:a,hisPage:1})};j.updatePrice=function(a){j.index=a;j.data.price=j.aEditPros[a].price.replace("¥","");m.prompt({title:"修改产品价格",template:"<div class='item-input-inset alertInputView'><label class='item-input-wrapper alertInput'><input ng-model='data.price' type='text' class='ng-pristine ng-valid text-center'></label></div><h3 class='text-center assertive errText' ng-bind='pricePrompt'></h3>",scope:j,buttons:[{text:"取 消",type:"alertCancel",onTap:function(b){return false}},{text:"确 定",type:"alertComfirm",onTap:function(b){if(j.data.price===""||j.data.price===undefined){j.pricePrompt="价格不能为空!";b.preventDefault()}else{if(privateVerifictionObj.verifiction.isFloat(j.data.price)===false){j.pricePrompt="价格输入有误!";b.preventDefault()}else{return true}}}}]}).then(function(b){if(b){j.iProId=j.aEditPros[a].proId;j.iProVlaue=j.data.price;getOrPostRequestObj.adminProManageConnect.updatePrice(j,k)}else{}j.pricePrompt=""});o.setData(j.data)};j.updateNum=function(a){j.index=a;j.data.num=j.aEditPros[a].num;m.prompt({title:"修改产品数量",template:"<div class='item-input-inset alertInputView'><label class='item-input-wrapper alertInput'><input ng-model='data.num' type='text' class='ng-pristine ng-valid text-center'></label></div><h3 class='text-center assertive errText' ng-bind='numPrompt'></h3>",scope:j,buttons:[{text:"取 消",type:"alertCancel",onTap:function(b){return false}},{text:"确 定",type:"alertComfirm",onTap:function(b){if(j.data.num===""||j.data.num===undefined){j.numPrompt="数量不能为空!";b.preventDefault()}else{if(privateVerifictionObj.verifiction.isInt(j.data.num)===false){j.numPrompt="数量输入有误!";b.preventDefault()}else{return true}}}}]}).then(function(b){if(b){j.iProId=j.aEditPros[a].proId;j.iProVlaue=j.data.num;getOrPostRequestObj.adminProManageConnect.updateNum(j,k)}else{}j.numPrompt=""});o.setData(j.data)};j.searchChange=function(){o.setSearchText(j.aProManage.searchVal)};j.aProManageSearch=function(){if(j.aProManage.searchVal!==p){getOrPostRequestObj.adminProManageConnect.adminGetProList(j,k);j.pageNum=1;o.setPageNum(1);j.noMoreHide=true;j.loadingHide=false;o.setMoreHide(true);o.setLoadingHide(false);n=true}p=j.aProManage.searchVal};j.adminProManageInit_CallBack=function(a){o.setaEditPros(j.adminProManageRetrunData(a));j.aEditPros=o.getaEditPros();j.pageNum=2;o.setPageNum(2);i(function(){n=false},1000);i(function(){j.loadingImg()},500)};j.adminProManageLoadMore_CallBack=function(a){var b=j.adminProManageRetrunData(a);j.aEditPros=j.aEditPros.concat(b);o.setaEditPros(j.aEditPros);j.pageNum++;o.setPageNum(j.pageNum);i(function(){n=false},1000);i(function(){j.loadingImg()},500)};j.adminProManageLoadMore=function(){if(j.noMoreHide&&n===false){n=true;j.loadHttp=i(function(){getOrPostRequestObj.adminProManageConnect.adminProListLoadMore(j,k);j.$broadcast("scroll.infiniteScrollComplete")},2000)}else{j.$broadcast("scroll.infiniteScrollComplete")}};j.adminProManageRetrunData=function(a){var e=[],b=a.respData.dataList,f={};for(var c=0,d=b.length;c<d;c++){f={name:b[c].prodName,proId:b[c].prodNum,img:privateVerifictionObj.verifiction.imgLink(b[c].firstProdImg),price:"¥"+b[c].stdPrice,num:b[c].dispStockBalance,date:"上架日期: "+b[c].createDate};e.push(f)}if(b.length<9){j.noMoreHide=false;j.loadingHide=true;o.setMoreHide(false);o.setLoadingHide(true)}return e};j.updatePriceDone_CallBack=function(){j.aEditPros[j.index].price="¥"+j.data.price.replace(/\b(0+)/gi,"")};j.updateNumDone_CallBack=function(){j.aEditPros[j.index].num=j.data.num.replace(/\b(0+)/gi,"")};if(j.viewStates.getAdmProManageState()===false){getOrPostRequestObj.adminProManageConnect.adminGetProList(j,k);j.viewStates.setAdmProManageState(true)}else{j.aEditPros=o.getaEditPros();n=false;i(function(){j.loadingImg()},500)}};adminOrderInfoCtrl.$inject=["$scope","$http","$location","$timeout"];indexModule.controller("adminOrderInfo",adminOrderInfoCtrl);var adminSelectOrderCtrl=function(h,i,j,g){h.adminOrder={searchVal:""};h.iCustNum="";h.keyColor="keyColor-link";h.keyColors="keyColor-active";h.isCompanyClick=false;h.isPhoneClick=true;h.noMoreHide=true;h.loadingHide=false;h.selSearchEvt=null;h.pageNum=2;var l="";var k=true;h.$on("$stateChangeStart",function(){g.cancel(h.loadHttp)});h.admSelRefresh=function(){g(function(){getOrPostRequestObj.adminSelectOrderConnect.adminShowOrderList(h,i);h.$broadcast("scroll.refreshComplete")},2000)};h.adminOrderInit_CallBack=function(a){h.aOrders=h.adminOrderReturnData(a);h.pageNum=2;g(function(){k=false},1000);g(function(){h.loadingImg()},500)};h.adminOrderLoadMore_CallBack=function(a){var b=h.adminOrderReturnData(a);h.aOrders=h.aOrders.concat(b);h.pageNum++;g(function(){k=false},1000);g(function(){h.loadingImg()},500)};h.adminOrderLoadMore=function(){if(h.noMoreHide&&k===false){k=true;h.loadHttp=g(function(){getOrPostRequest.adminSelectOrderConnect.adminSelOrderLoadMore(h,i);h.$broadcast("scroll.infiniteScrollComplete")},2000)}else{h.$broadcast("scroll.infiniteScrollComplete")}};h.adminOrderReturnData=function(e){var w=[],a=e.respData.dataList,y,x=[],b=[],z,v=true;for(var f=0,c=a.length;f<c;f++){for(var u=0,d=a[f].orderItemList.length;u<d;u++){y={proId:a[f].orderItemList[u].prodNum,img:privateVerifictionObj.verifiction.imgLink(a[f].orderItemList[u].whereimg),name:a[f].orderItemList[u].prodName,num:a[f].orderItemList[u].cases,price:"¥"+a[f].orderItemList[u].custProdPrice};if(u<3){x.push(y)}else{b.push(y);v=false}}z={orderNum:a[f].orderNum,userName:a[f].custName,proCount:a[f].orderItemList.length,proPrices:"¥"+a[f].custPriceTotal,cashState:a[f].cashStatusName,deliveryState:a[f].deliverStatusName,date:a[f].createDate,iPros:x,isHidePro:true,iHidePros:b,isHide:v,btnText:"显示全部"};v=true;b=[];x=[];w.push(z)}if(a.length<9){h.noMoreHide=false;h.loadingHide=true}return w};h.toDetailed=function(a){j.path("/detailed").search({proNum:a,hisPage:1})};h.toOrderDetailed=function(a){j.path("/adminOrderInfo").search({orderId:h.aOrders[a].orderNum})};h.clickKey=function(a){h.isCompanyClick=true;h.isPhoneClick=true;if(a===1){h.isCompanyClick=!h.isCompanyClick}else{h.isPhoneClick=!h.isPhoneClick}};h.hideShowPro=function(a){h.aOrders[a].isHidePro=!h.aOrders[a].isHidePro;h.aOrders[a].isHidePro?h.aOrders[a].btnText="显示全部":h.aOrders[a].btnText="隐藏部分"};h.orderSearch=function(){if(h.adminOrder.searchVal!==l){getOrPostRequestObj.adminSelectOrderConnect.aUserCompany="";getOrPostRequestObj.adminSelectOrderConnect.aUserPhoneNum="";h.pageNum=1;h.noMoreHide=true;h.loadingHide=false;if(h.isCompanyClick===false){getOrPostRequestObj.adminSelectOrderConnect.aUserCompany=h.adminOrder.searchVal}else{getOrPostRequestObj.adminSelectOrderConnect.aUserPhoneNum=h.adminOrder.searchVal}getOrPostRequestObj.adminSelectOrderConnect.adminShowOrderList(h,i);k=true}l=h.adminOrder.searchVal};getOrPostRequestObj.adminSelectOrderConnect.adminShowOrderList(h,i)};adminProManageCtrl.$inject=["$scope","$http","admProManageService","$location","$ionicPopup","$timeout"];var adminProManagearr=["$scope","$http","admProManageService","$location","$ionicPopup","$timeout",adminProManageCtrl];indexModule.controller("adminProManage",adminProManagearr);indexModule.service("categoryService",function(){var f={};var e="";var h="";var g=true;f.getMenuDatas=function(){return e};f.setMenuDatas=function(a){e=a};f.getCateSearchText=function(){return h};f.setCateSearchText=function(a){h=a};f.getClearBtnShow=function(){return g};f.setClearBtnShow=function(a){g=a};return f});var categoryCtrl=function(f,g,e,h){f.clearBtnShow=e.getClearBtnShow();f.catePro={searchText:e.getCateSearchText()};f.bodyHide=true;f.categoryBarIconState();f.$on("$stateChangeStart",function(){var a=h.url().split("?")[0];if(a==="/shoppingCar"&&(f.getPerSpCar()==3||f.getPerSpCar()==5)){var b=f.getPerSpCar()-1;f.setPerSpCar(b)}});f.OpenOrCloseMenu=function(a){if(f.menuDatas[a].menuBarOff===false&&f.menuDatas[a].menuBarOn===false){f.viewStates.setSearchResListState(false);h.path("/searchRes").search({name:f.menuDatas[a].itemDatas[0].itemData,id:f.menuDatas[a].itemDatas[0].itemId,type:0})}else{f.menuDatas[a].itemHide=!f.menuDatas[a].itemHide;f.menuDatas[a].menuBarOff=!f.menuDatas[a].menuBarOff;f.menuDatas[a].menuBarOn=!f.menuDatas[a].menuBarOn;if(f.menuDatas[a].itemDatas.length>0){f.menuDatas[a].menuHeaderShow=!f.menuDatas[a].menuHeaderShow;f.menuDatas[a].menuHeaderHide=!f.menuDatas[a].menuHeaderHide}}};f.cateSearchChange=function(){f.clearBtnShow=!(f.catePro.searchText!==""&&f.catePro.searchText!==undefined);e.setCateSearchText(f.catePro.searchText);e.setClearBtnShow(f.clearBtnShow)};f.clearData=function(){f.catePro.searchText="";f.clearBtnShow=true;e.setCateSearchText(f.catePro.searchText);e.setClearBtnShow(f.clearBtnShow)};f.searchPro=function(){if(f.catePro.searchText!==""&&f.catePro.searchText!==undefined){f.viewStates.setSearchResListState(false);h.path("/searchRes").search({name:f.catePro.searchText,id:"",type:"1"})}};f.searchCate=function(a,b){f.viewStates.setSearchResListState(false);h.path("/searchRes").search({name:a,id:b,type:0})};f.categoryInit_CallBack=function(a){f.menuDatas=f.categoryReturnData(a);e.setMenuDatas(f.menuDatas)};f.categoryReturnData=function(i){var t=[];var b=i.respData;var a={};var w="";var m=[];for(var d=0,c=b.length;d<c;d++){if(b[d].childProdCatHiers.length>0){for(var j=0,v=b[d].childProdCatHiers.length;j<v;j++){if(b[d].childProdCatHiers[j].childProdCatHiers.length>0){for(var u=0,x=b[d].childProdCatHiers[j].childProdCatHiers.length;u<x;u++){if(u===0){w=b[d].childProdCatHiers[j].prodCat.prodCatName}m.push({itemId:b[d].childProdCatHiers[j].childProdCatHiers[u].prodCat.prodCatId,itemData:b[d].childProdCatHiers[j].childProdCatHiers[u].prodCat.prodCatName})}a={itemHead:w,itemDatas:m,menuBarOff:true,menuBarOn:false,menuHeaderShow:false,menuHeaderHide:true,itemHide:true};t.push(a);w="";m=[];a={}}else{if(j===0){w=b[d].prodCat.prodCatName}m.push({itemId:b[d].childProdCatHiers[j].prodCat.prodCatId,itemData:b[d].childProdCatHiers[j].prodCat.prodCatName})}}a={itemHead:w,itemDatas:m,menuBarOff:true,menuBarOn:false,menuHeaderShow:false,menuHeaderHide:true,itemHide:true};t.push(a);w="";m=[];a={}}else{w=b[d].prodCat.prodCatName;a={itemHead:w,itemDatas:[{itemId:b[d].prodCat.prodCatId,itemData:b[d].prodCat.prodCatName}],menuBarOff:false,menuBarOn:false,menuHeaderShow:false,menuHeaderHide:true,itemHide:true};t.push(a)}}return t};if(f.viewStates.getCategoryState()===false){getOrPostRequestObj.proSearchConnec.proMenuIconLayout(f,g);f.viewStates.setCategoryState(true)}else{f.menuDatas=e.getMenuDatas()}};adminSelectOrderCtrl.$inject=["$scope","$http","$location","$timeout"];indexModule.controller("adminSelectOrder",adminSelectOrderCtrl);indexModule.service("contactService",function(){var m={};var p="";var l="";var n="";var q="";var r="";var j="";var k="";var o="javascript:void(0)";m.getCompanyName=function(){return p};m.setCompanyName=function(a){p=a};m.getAddress=function(){return l};m.setAddress=function(a){l=a};m.getWebSite=function(){return n};m.setWebSite=function(a){n=a};m.getContactPerson=function(){return q};m.setContactPerson=function(a){q=a};m.getPhoneNum=function(){return r};m.setPhoneNum=function(a){r=a};m.getLongiTude=function(){return j};m.setLongiTude=function(a){j=a};m.getLatiTude=function(){return k};m.setLatiTude=function(a){k=a};m.getPhoneNumBtn=function(){return o};m.setPhoneNumBtn=function(a){o=a};return m});var contcatCtrl=function(f,g,h,e){f.contactInit_CallBack=function(a){var b=f.contactReturnData(a);f.companyName=b.companyName;f.address=b.address;f.webSite=b.webSite;f.contactPerson=b.contactPerson;f.phoneNum=b.phoneNum;h.setCompanyName(b.companyName);h.setAddress(b.address);h.setWebSite(b.webSite);h.setContactPerson(b.contactPerson);h.setPhoneNum(b.phoneNum)};f.phoneBtn_CallBack=function(a){h.setPhoneNumBtn(a)};f.callPhone=function(){window.location.href=h.getPhoneNumBtn()};f.contactReturnData=function(a){var b=a.respData;e(function(){f.mapInit(b.longitude,b.latitudes)},500);h.setLongiTude(b.longitude);h.setLatiTude(b.latitudes);return{companyName:b.companyName,address:b.address,contactPerson:b.contactPerson,webSite:b.webSite,phoneNum:b.phoneNum}};f.mapInit=function(a,b){var c=new BMap.Map("contenttexts"),l=new BMap.Icon("img/icon.png",new BMap.Size(50,50),{anchor:new BMap.Size(30,28)}),n=new BMap.Point(a,b),m=new BMap.Marker(n,{icon:l});c.centerAndZoom(n,16);c.addControl(new BMap.ZoomControl());c.addOverlay(m);var d=new BMap.TrafficLayer();c.addTileLayer(d);c.setZoom(18)};if(f.viewStates.getContactState()===false){getOrPostRequestObj.orderInfoConnect.getContactInfo(f,g);if(privateVerifictionObj.verifiction.isMobile()===true){getOrPostRequestObj.indexConnect.initPhoneBtn(f,g)}f.viewStates.setContactState(true)}else{f.mapInit(h.getLongiTude(),h.getLatiTude());f.companyName=h.getCompanyName();f.address=h.getAddress();f.webSite=h.getWebSite();f.contactPerson=h.getContactPerson();f.phoneNum=h.getPhoneNum()}};categoryCtrl.$inject=["$scope","$http","categoryService","$location"];var categoryarr=["$scope","$http","categoryService","$location",categoryCtrl];indexModule.controller("category",categoryarr);var detailedCtrl=function(h,j,n,k){var i="";var l="";h.layerHide=true;h.moreCharHide=true;h.closeHide=true;h.ampImgHide=true;h.shoppingType=0;h.detailed={proNum:0};h.proNumber=0;h.isChangeHide=true;h.isToAlbb=true;var m=k.search().hisPage;h.cartHide=m==1;h.detailedInit_CallBack=function(g){var c=h.detailedReturnData(g);h.detailedDatas=c;h.isChangeHide=c.changePro;h.isToAlbb=c.toAlbb;for(var f=0,e=g.respData[0].prodExternals.length;f<e;f++){if(g.respData[0].prodExternals[f].externalName==="murl"){l=g.respData[0].prodExternals[f].externalValue}else{i=g.respData[0].prodExternals[f].externalValue}}var b=c.islides;var a=[];for(var u=0,x=b.length;u<x;u++){a.push({content:"<div class='detailed_bannerImg' ><img src='"+b[u].iSlideImg+"' onerror=this.src=errImg></div>"})}var v={type:"dom",data:a,dom:document.getElementById("detailedSwiper"),duration:3000,isLooping:true,isAutoplay:true,onslidechange:function(o){d.changeIndexDot()}};if(b.length>0){var d=new iSlider(v);var w={top:"42%",width:"100%",diameter:"0.8em",borderColor:"#365b88"};d.renderDot(w)}};h.detailedReturnData=function(a){var d,x=true,f=true,B=a.respData,D=[],g=[],C="",y="",A="";for(var b=0,e=B[0].prodImgs.length;b<e;b++){C=privateVerifictionObj.verifiction.imgLink(B[0].prodImgs[b].thumbUrl);g.push({iSlideImg:C})}for(var c=0,z=B[0].prodFeatures.length;c<z;c++){y=B[0].prodFeatures[c].featureName;A=B[0].prodFeatures[c].ifeatureValue;D.push({extFeatrue:y+": "+A})}if(B.externalSysCode==="1688"&&publicParameterObj.parameters.isComShopping===true){x=true;f=false}else{x=false;f=true}d={detailedTitle:B[0].prodName,islides:g,changePro:x,toAlbb:f,price:"¥"+B[0].stdPrice,balance:B[0].dispStockBalance,extFeatrue:D,data:B[0].createDate,remark:B[0].remark,external:B[0].prodExternals};return d};h.$on("$stateChangeStart",function(){getOrPostRequestObj.userAndAdminSignIn.isToShoppingCar=false;var a=k.url().split("?")[0];if(a==="/waitingAudit"||a==="/myOrder"||a==="/superPro"){h.setPerSpCar(0)}});if(k.search().proNum!==""){h.cqcsHide=false;getOrPostRequestObj.detailedConnect.getDetailed(k.search().proNum,h,j)}else{h.cqcsHide=true;h.detailedDatas={detailedTitle:"产品获取失败，请返回重新选择产品。"}}h.theZoom=function(b){h.layerHide=false;h.closeHide=false;h.ampImgHide=false;h.contentHide=true;h.cartHide=true;h.ampImg=h.detailedDatas.islides[b].iSlideImg;var a=document.getElementById("ampImgId");n(function(){var c=-(a.offsetWidth/2);var d=-(a.offsetHeight/2);h.ampImgStyle={"margin-left":c+"px","margin-top":d+"px",opacity:"1"}},0)};h.closeAmp=function(){h.ampImgStyle={opacity:"0"};h.layerHide=true;h.closeHide=true;h.closeHide=true;h.ampImgHide=true;h.cartHide=false;h.contentHide=false};h.iaddToShoppinCar=function(){h.shoppingType=1;getOrPostRequestObj.userAndAdminSignIn.isUserLogin(h,j);h.viewStates.setShoppingCarState(false)};h.iToShoppingCar=function(){h.shoppingType=2;getOrPostRequestObj.userAndAdminSignIn.isUserLogin(h,j)};h.isLogin_CallBack=function(a){if(a){if(h.shoppingType===1){publicEventsObj.operatingDatabaseEvent.insertData(k.search().proNum,1,h)}else{if(h.shoppingType===2){k.path("/shoppingCar")}}}else{if(h.shoppingType===1){h.userLogin.show()}else{if(h.shoppingType===2){getOrPostRequestObj.userAndAdminSignIn.isToShoppingCar=true;h.userLogin.show()}}}};h.toShopCar=function(){k.path("/shoppingCar")};h.iToAlbb=function(){if(privateVerifictionObj.verifiction.isMobile()){try{window.device.version.substr(0,1);publicEventsObj.mobileEvent.webpage_mobile(l)}catch(a){window.open(l)}}else{window.open(i)}};getOrPostRequestObj.userAndAdminSignIn.isUserLogin(h,j)};contcatCtrl.$inject=["$scope","$http","contactService","$timeout"];var contactarr=["$scope","$http","contactService","$timeout",contcatCtrl];indexModule.controller("contact",contactarr);var editMessage=function(d,f,e){d.charNum=80;d.editStyle={"border-bottom":"none","box-shadow":"0 2px 3px rgba(0,0,0,.15)"};d.toUserLogin=function(){d.userLoginShowHide(true)};d.hideEditMessage=function(){d.editMessageShowHide(false)};d.sendMessage=function(){d.iMeassage=angular.element(document.querySelector("#messageId")).val();if(d.iMeassage!==""&&d.iMeassage!==undefined){getOrPostRequestObj.messageConnect.sendMessage(d,f)}else{d.showAlert("提 示","留言内容不能为空!")}};d.sendMessageDone_CallBack=function(){var a={name:d.getSendMessageState()?publicParameterObj.parameters.userName.substr(0,5)+"******":"匿名账户",createData:"刚刚",messageContent:d.iMeassage};var b=d.getMessage();b.splice(0,0,a);d.setMessage(b.splice(0,b.length,a));d.iMeassage="";angular.element(document.querySelector("#messageId")).val("");e.setMessageDatas(d.iMessageDatas);d.editMessageShowHide(false);d.viewStates.setMessageState(false)}};indexModule.directive("eventVal",function(){return{require:"ngModel",scope:false,link:function(e,g,f,h){h.$parsers.push(function(a){e.charNum=80-a.length})}}});detailedCtrl.$inject=["$scope","$http","$timeout","$location"];indexModule.controller("detailed",detailedCtrl);indexModule.service("historyOrderService",function(){var f={};var g=false;var h=true;var e="";f.getMoreHide=function(){return g};f.setMoreHide=function(a){g=a};f.getLoadingHide=function(){return h};f.setLoadingHide=function(a){h=a};f.getHistoryOrder=function(){return e};f.setHistoryOrder=function(a){e=a};return f});var historyOrderCtrl=function(h,i,l,j,g){h.iCustNum="";h.noMoreHide=l.getMoreHide();h.loadingHide=l.getLoadingHide();var k=true;if(j.search().custNum){h.iCustNum=j.search().custNum;h.companyTitle=j.search().custName}h.adminOrderInit_CallBack=function(a){l.setHistoryOrder(h.adminOrderReturnData(a));h.histroyOrders=l.getHistoryOrder();publicParameterObj.parameters.loadingPage=2;g(function(){k=false},1000);g(function(){h.loadingImg()},500)};h.adminOrderLoadMore_CallBack=function(a){var b=h.adminOrderReturnData(a);h.histroyOrders=h.histroyOrders.concat(b);l.setHistoryOrder(h.histroyOrders);publicParameterObj.parameters.loadingPage++;g(function(){k=false},1000);g(function(){h.loadingImg()},500)};h.adminOrderLoadMore=function(){if(h.noMoreHide&&k===false){k=true;g(function(){getOrPostRequest.adminSelectOrderConnect.adminSelOrderLoadMore(h,i);h.$broadcast("scroll.infiniteScrollComplete")},2000)}else{h.$broadcast("scroll.infiniteScrollComplete")}};h.adminOrderReturnData=function(e){var w=[],a=e.respData.dataList,y,x=[],b=[],z,v=true;for(var f=0,c=a.length;f<c;f++){for(var u=0,d=a[f].orderItemList.length;u<d;u++){y={proId:a[f].orderItemList[u].prodNum,img:privateVerifictionObj.verifiction.imgLink(a[f].orderItemList[u].whereimg),name:a[f].orderItemList[u].prodName,num:a[f].orderItemList[u].cases,price:"¥"+a[f].orderItemList[u].custProdPrice};if(u<3){x.push(y)}else{b.push(y);v=false}}z={orderNum:a[f].orderNum,userName:a[f].custName,proCount:a[f].orderItemList.length,proPrices:"¥"+a[f].custPriceTotal,cashState:a[f].cashStatusName,deliveryState:a[f].deliverStatusName,date:a[f].createDate,iPros:x,isHidePro:true,iHidePros:b,isHide:v,btnText:"显示全部"};v=true;b=[];x=[];w.push(z)}if(a.length<9){h.noMoreHide=false;h.loadingHide=true;l.setMoreHide(false);l.setLoadingHide(true)}return w};h.toDetailed=function(a){j.path("/detailed").search({proNum:a,hisPage:1})};h.toOrderDetailed=function(a){j.path("/adminOrderInfo").search({orderId:h.histroyOrders[a].orderNum})};h.hideShowPro=function(a){h.histroyOrders[a].isHidePro=!h.histroyOrders[a].isHidePro;h.histroyOrders[a].isHidePro?h.histroyOrders[a].btnText="显示全部":h.histroyOrders[a].btnText="隐藏部分";l.setHistoryOrder(h.histroyOrders)};if(h.viewStates.getHistoryOrderState()===false){getOrPostRequestObj.adminSelectOrderConnect.adminShowOrderList(h,i);h.viewStates.setHistoryOrderState(true)}else{h.histroyOrders=l.getHistoryOrder();k=false;g(function(){h.loadingImg()},500)}};editMessage.$inject=["$scope","$http","messageService"];var editMessagearr=["$scope","$http","messageService",editMessage];indexModule.controller("editMessageCtrl",editMessagearr);indexModule.service("messageService",function(){var g={};var i=[];var h=true;var j=false;var f=1;g.getMessageDatas=function(){return i};g.setMessageDatas=function(a){i=a};g.getMoreHide=function(){return h};g.setMoreHide=function(a){h=a};g.getLoadingHide=function(){return j};g.setLoadingHide=function(a){j=a};g.getPageNum=function(){return f};g.setPageNum=function(a){f=a};return g});var messageCtrl=function(n,j,h,i,k,m){n.editMessageIsLogin=false;n.noMoreHide=h.getMoreHide();n.loadingHide=h.getLoadingHide();n.pageNum=h.getPageNum();n.pageNum=h.getPageNum();var l=true;n.$on("$stateChangeStart",function(){n.editMessageShowHide(false);m.cancel(n.loadHttp)});n.messageInit_CallBack=function(a){h.setMessageDatas(n.messageReturnData(a));n.setMessage(h.getMessageDatas());n.pageNum=2;h.setPageNum(2);m(function(){l=false},1000)};n.messageLoadMore_CallBack=function(a){var b=n.messageReturnData(a);n.setMessage(n.getMessage().concat(b));n.pageNum++;h.setPageNum(n.pageNum);h.setMessageDatas(n.getMessage());m(function(){l=false},1000)};n.showEditMessage=function(){n.editMessageShowHide(true)};n.messageLoadMore=function(){if(n.noMoreHide&&l===false){l=true;n.loadHttp=m(function(){getOrPostRequestObj.messageConnect.messageLoadMore(n,j);n.$broadcast("scroll.infiniteScrollComplete")},2000)}else{n.$broadcast("scroll.infiniteScrollComplete")}};n.messageReturnData=function(b){var f=[],c=b.respData.dataList,a;for(var d=0,e=c.length;d<e;d++){a={name:c[d].createBy===""||c[d].createBy===undefined?"匿名账户":c[d].createBy.substr(0,5)+"******",createData:c[d].createDate.replace("T"," "),messageContent:c[d].content};f.push(a)}if(c.length<14){n.noMoreHide=false;n.loadingHide=true;h.setMoreHide(false);h.setLoadingHide(true)}return f};if(n.viewStates.getMessageState()===false){getOrPostRequest.messageConnect.getMessage(n,j);n.viewStates.setMessageState(true)}else{n.setMessage(h.getMessageDatas());l=false}};historyOrderCtrl.$inject=["$scope","$http","historyOrderService","$location","$timeout"];var histroryOrderarr=["$scope","$http","historyOrderService","$location","$timeout",historyOrderCtrl];indexModule.controller("historyOrder",histroryOrderarr);var myOrderCtrl=function(g,h,i,f){g.custName="未登录";g.noMoreHide=true;g.loadingHide=false;g.pageNum=2;var j=true;g.$on("$stateChangeStart",function(){f.cancel(g.loadHttp)});g.myOrderRefresh=function(){f(function(){getOrPostRequestObj.myOrderConnect.userShowOrderList(g,h);g.$broadcast("scroll.refreshComplete")},2000)};g.myOrderInit_CallBack=function(a){g.oLists=g.myOrderReturnData(a);g.pageNum=2;f(function(){j=false},1000);f(function(){g.loadingImg()},500)};g.myOrderLoadMore_CallBack=function(a){var b=g.myOrderReturnData(a);g.oLists=g.oLists.concat(b);g.pageNum++;f(function(){j=false},1000);f(function(){g.loadingImg()},500)};g.myOrederLoadMore=function(){if(g.noMoreHide&&j===false){g.loadHttp=f(function(){j=true;getOrPostRequestObj.myOrderConnect.userMyOrderLoadMore(g,h);g.$broadcast("scroll.infiniteScrollComplete")},2000)}else{g.$broadcast("scroll.infiniteScrollComplete")}};g.isLogin_CallBack=function(a){if(a===true){g.custName=publicParameterObj.parameters.userName}else{g.custName="未登录"}};g.myOrderReturnData=function(c){var F={};var a=[];var z=[];var A={};var E=[];var B=[];var G=c.respData.dataList;var e=true;var D=true;var b,I,H;for(var d=0,J=G.length;d<J;d++){e=true;D=true;b=false;I=false;H=false;for(var y=0,C=G[d].orderItemList.length;y<C;y++){A={proId:G[d].orderItemList[y].prodNum,proImg:privateVerifictionObj.verifiction.imgLink(G[d].orderItemList[y].whereimg),proName:G[d].orderItemList[y].prodName,proNum:"订购数量: "+G[d].orderItemList[y].cases,proPrice:"¥"+G[d].orderItemList[y].custProdPrice};if(y<3){a.push(A)}else{e=true;D=false;z.push(A)}A={}}switch(G[d].deliverStatus){case 0:b=true;break;case 1:I=true;break;case 2:H=true;break}F={orderId:G[d].orderNum,isProHide:e,isHide:D,oItems:E,oPros:a,oHidePro:z,orderState:G[d].deliverStatusName,date:G[d].createDate,oCountNum:G[d].orderItemList.length,oCountPrice:"¥"+G[d].custPriceTotal,btnText:"显示全部",stateRed:b,stateBlue:I,stateGray:H};B.push(F);E=[];a=[];z=[]}if(G.length<9){g.noMoreHide=false;g.loadingHide=true}return B};g.toDetailed=function(b){var a=g.getPerSpCar()+4;g.setPerSpCar(a);i.path("/detailed").search({proNum:b})};g.hideShowPro=function(a){g.oLists[a].isProHide=!g.oLists[a].isProHide;g.oLists[a].isProHide?g.oLists[a].btnText="显示全部":g.oLists[a].btnText="隐藏部分"};f(function(){getOrPostRequestObj.userAndAdminSignIn.isUserLogin(g,h)},450);getOrPostRequestObj.myOrderConnect.userShowOrderList(g,h)};messageCtrl.$inject=["$scope","$http","messageService","$ionicModal","$location","$timeout"];var messageCtrlarr=["$scope","$http","messageService","$ionicModal","$location","$timeout",messageCtrl];indexModule.controller("message",messageCtrlarr);indexModule.service("perService",function(){var e={};var f="未登录";var d="";e.getUserName=function(){return f};e.setUserName=function(a){f=a};e.getUserCompany=function(){return d};e.setUserCompany=function(a){d=a};return e});var personalCtrl=function(h,i,j,l,g,k){h.useriName=j.getUserName();h.useriCompany=j.getUserCompany();h.showConfirm=function(){l.confirm({title:"提 示",content:"您确定要退出登录吗?",buttons:[{text:"取 消",type:"alertCancel",onTap:function(a){return false}},{text:"确 定",type:"alertComfirm",onTap:function(a){return true}}]}).then(function(a){if(a){h.viewStates.setPersonalState(false);j.setUserName("未登录");j.setUserCompany("");getOrPostRequestObj.userAndAdminSignIn.userLoginOut(h,i)}else{}})};h.perList=function(a){switch(a){case 0:k.path("/shoppingCar").search("");h.setPerSpCar(2);break;case 1:k.path("/waitingAudit").search("");h.setPerSpCar(0);break;case 2:k.path("/myOrder").search("");h.setPerSpCar(0);break;case 3:k.path("/superPro").search("");h.setPerSpCar(0);break;case 4:k.path("/modifyPass").search("");h.setPerSpCar(0);break;case 5:k.path("/modifyInfo").search("");h.setPerSpCar(0);break}};h.userLoginOut=function(){h.showConfirm()};h.infoInit_CallBack=function(a){h.useriName=a.respData.custName;h.useriCompany=a.respData.companyName;j.setUserName(a.respData.custName);j.setUserCompany(a.respData.companyName);h.viewStates.setPersonalState(true)};if(h.viewStates.getPersonalState()===false){g(function(){getOrPostRequestObj.registConnect.userLoginInfo(h,i)},500)}};myOrderCtrl.$inject=["$scope","$http","$location","$timeout"];indexModule.controller("myOrder",myOrderCtrl);indexModule.service("productService",function(){var i={};var j=true;var k=false;var l="";var n=1;var h={};var m="";i.getMoreHide=function(){return j};i.setMoreHide=function(a){j=a};i.getLoadingHide=function(){return k};i.setLoadingHide=function(a){k=a};i.getSearchText=function(){return l};i.setSearchText=function(a){l=a};i.getPageNum=function(){return n};i.setPageNum=function(a){n=a};i.getProData=function(){return h};i.setProData=function(a){h=a};i.getSearchTextSave=function(){return m};i.setSearchTextSave=function(a){m=a};return i});var productCtrl=function(i,k,j,l,p,o){i.bodyHide=true;i.noMoreHide=j.getMoreHide();i.loadingHide=j.getLoadingHide();i.searchEvt=null;i.pageNum=j.getPageNum();i.iPro={searchText:j.getSearchText()};var m=j.getSearchTextSave();var n=true;i.$on("$stateChangeStart",function(){o.cancel(i.loadHttp)});i.toProList=function(){l.path("/proList")};i.productInit_CallBack=function(a){j.setProData(i.productReturnData(a));i.proDatas=j.getProData();i.pageNum=2;j.setPageNum(2);o(function(){n=false},1000);o(function(){i.loadingImg()},500)};i.productLoadMore_CallBack=function(a){var b=i.productReturnData(a);i.proDatas.proLeftInfos=i.proDatas.proLeftInfos.concat(b.proLeftInfos);i.proDatas.proRightInfos=i.proDatas.proRightInfos.concat(b.proRightInfos);j.setProData(i.proDatas);i.pageNum++;j.setPageNum(i.pageNum);o(function(){n=false},1000);o(function(){i.loadingImg()},500)};i.searchResLoadMore_CallBack=function(a){i.productInit_CallBack(a)};i.productLoadMore=function(){if(i.noMoreHide&&n===false){n=true;i.loadHttp=o(function(){getOrPostRequestObj.productConnect.getProductMore(i,k);i.$broadcast("scroll.infiniteScrollComplete")},2000)}else{i.$broadcast("scroll.infiniteScrollComplete")}};i.proRefresh=function(){o(function(){getOrPostRequestObj.productConnect.getProduct(i,k);i.$broadcast("scroll.refreshComplete");i.noMoreHide=true;i.loadingHide=false;j.setMoreHide(true);j.setLoadingHide(false);i.pageNum=1;j.setPageNum(1);i.iPro.searchText="";j.setSearchText("")},2000)};i.productReturnData=function(g){var a,e,b=[],s=[],c=g.respData.dataList;for(var f=0,d=c.length;f<d;f+=2){a={proLeftNum:c[f].prodNum,proLeftImg:privateVerifictionObj.verifiction.imgLink(c[f].firstProdImg),proLeftName:c[f].prodName,proLeftPrice:"¥"+c[f].stdPrice};b.push(a);if(f+1<d){e={proRightNum:c[f+1].prodNum,proRightImg:privateVerifictionObj.verifiction.imgLink(c[f+1].firstProdImg),proRightName:c[f+1].prodName,proRightPrice:"¥"+c[f+1].stdPrice};s.push(e)}}var h={proLeftInfos:b,proRightInfos:s};if(c.length<14){i.noMoreHide=false;i.loadingHide=true;j.setMoreHide(false);j.setLoadingHide(true)}return h};i.proSearchTextChange=function(){j.setSearchText(i.iPro.searchText)};i.iProSearch=function(){if(i.iPro.searchText!==m){i.pageNum=1;j.setPageNum(1);i.loadingHide=false;i.noMoreHide=true;j.setMoreHide(true);j.setLoadingHide(false);getOrPostRequestObj.proSearchConnec.userSearchMore(i.iPro.searchText,"",i,k);j.setSearchText(i.iPro.searchText);m=i.iPro.searchText;j.setSearchTextSave(i.iPro.searchText);n=true}};i.proLeftClick=function(a){l.path("/detailed").search({proNum:i.proDatas.proLeftInfos[a].proLeftNum})};i.proRightClick=function(a){l.path("/detailed").search({proNum:i.proDatas.proRightInfos[a].proRightNum})};i.toggleLeft=function(){p.toggleLeft()};if(i.viewStates.getProductState()===false){getOrPostRequestObj.productConnect.getProduct(i,k);i.viewStates.setProductState(true)}else{i.proDatas=j.getProData();n=false;o(function(){i.loadingImg()},500)}};personalCtrl.$inject=["$scope","$http","perService","$ionicPopup","$timeout","$location"];var personalarr=["$scope","$http","perService","$ionicPopup","$timeout","$location",personalCtrl];indexModule.controller("personal",personalarr);indexModule.service("proListService",function(){var i={};var k=false;var j=true;var n=1;var h="";var l="";var m="";i.getLoadingHide=function(){return k};i.setLoadingHide=function(a){k=a};i.getMoreHide=function(){return j};i.setMoreHide=function(a){j=a};i.getPageNum=function(){return n};i.setPageNum=function(a){n=a};i.getProListDatas=function(){return h};i.setProListDatas=function(a){h=a};i.getSearchText=function(){return l};i.setSearchText=function(a){l=a};i.getSearchTextSave=function(){return m};i.setSearchTextSave=function(a){m=a};return i});var proListCtrl=function(h,j,i,k,n){h.bodyHide=true;h.loadingHide=i.getLoadingHide();h.noMoreHide=i.getMoreHide();h.pageNum=i.getPageNum();h.iPro={searchText:i.getSearchText()};var l=i.getSearchTextSave();var m=true;h.$on("$stateChangeStart",function(){n.cancel(h.loadHttp)});h.productInit_CallBack=function(a){i.setProListDatas(h.proListReturnData(a));h.proListDatas=i.getProListDatas();i.setPageNum(2);h.pageNum=2;n(function(){m=false},1000);n(function(){h.loadingImg()},500)};h.productLoadMore_CallBack=function(a){var b=h.proListReturnData(a);h.proListDatas=h.proListDatas.concat(b);i.setProListDatas(h.proListDatas);h.pageNum++;i.setPageNum(h.pageNum);n(function(){m=false},1000);n(function(){h.loadingImg()},500)};h.searchResLoadMore_CallBack=function(a){h.productInit_CallBack(a)};h.proListLoadMore=function(){if(h.noMoreHide&&m===false){m=true;h.loadHttp=n(function(){getOrPostRequestObj.productConnect.getProductMore(h,j);h.$broadcast("scroll.infiniteScrollComplete")},2000)}else{h.$broadcast("scroll.infiniteScrollComplete")}};h.proListRefresh=function(){n(function(){getOrPostRequestObj.productConnect.getProduct(h,j);h.$broadcast("scroll.refreshComplete");h.noMoreHide=true;h.loadingHide=false;h.pageNum=1;h.iPro.searchText="";i.setSearchText("");i.setPageNum(1);i.setMoreHide(true);i.setLoadingHide(false)},2000)};h.proListReturnData=function(a){var f=[],b=a.respData.dataList,g,c="";for(var d=0,e=b.length;d<e;d++){if(b[d].featureName===null||b[d].featureName===undefined){c=""}else{c=b[d].featureName}g={proNum:b[d].prodNum,proName:b[d].prodName,proModel:"型号: "+c,proPrice:"¥"+b[d].stdPrice,proListImg:privateVerifictionObj.verifiction.imgLink(b[d].firstProdImg)};f.push(g)}if(b.length<14){h.noMoreHide=false;h.loadingHide=true;i.setMoreHide(false);i.setLoadingHide(true)}return f};h.proSearchTextChange=function(){i.setSearchText(h.iPro.searchText)};h.iProSearch=function(){if(h.iPro.searchText!==l){h.pageNum=1;i.setPageNum(1);h.noMoreHide=true;h.loadingHide=false;i.setMoreHide(true);i.setLoadingHide(false);getOrPostRequestObj.proSearchConnec.userSearchMore(h.iPro.searchText,"",h,j);l=h.iPro.searchText;i.setSearchTextSave(h.iPro.searchText);m=true}};h.proItemClick=function(a){k.path("/detailed").search({proNum:h.proListDatas[a].proNum})};if(h.viewStates.getProListState()===false){getOrPostRequestObj.productConnect.getProduct(h,j);h.viewStates.setProListState(true)}else{h.proListDatas=i.getProListDatas();m=false;n(function(){h.loadingImg()},500)}};productCtrl.$inject=["$scope","$http","productService","$location","$ionicSideMenuDelegate","$timeout"];var productarr=["$scope","$http","productService","$location","$ionicSideMenuDelegate","$timeout",productCtrl];indexModule.controller("product",productarr);indexModule.service("searchResService",function(){var g={};var f="";var h=true;var i=false;var j=2;g.getProResList=function(){return f};g.setProResList=function(a){f=a};g.getMoreHide=function(){return h};g.setMoreHide=function(a){h=a};g.getLoadingHide=function(){return i};g.setLoadingHide=function(a){i=a};g.getPageNum=function(){return j};g.setPageNum=function(a){j=a};return g});var searchResCtrl=function(j,m,l,p,r){var q=p.search().name,k=p.search().id,n=p.search().type;j.bodyHide=true;j.noMoreHide=l.getMoreHide();j.loadingHide=l.getLoadingHide();j.resTitle=q;j.pageNum=l.getPageNum();var o=true;j.$on("$stateChangeStart",function(){r.cancel(j.loadHttp)});j.showSearchResInit_CallBack=function(a){l.setProResList(j.proResReturnData(a));j.proResList=l.getProResList();j.pageNum=2;l.setPageNum(2);r(function(){o=false},1000);r(function(){j.loadingImg()},500)};j.searchResLoadMore_CallBack=function(a){var b=j.proResLoadMore(a);j.proResList=j.proResList.concat(b);j.pageNum++;l.setPageNum(j.pageNum);l.setProResList(j.proResList);r(function(){o=false},1000);r(function(){j.loadingImg()},500)};j.proResLoadMore=function(){if(j.noMoreHide&&o===false){o=true;j.loadHttp=r(function(){if(n===0){getOrPostRequestObj.proSearchConnec.userSearchMore("",k,j,m)}else{getOrPostRequestObj.proSearchConnec.userSearchMore(q,"",j,m)}j.$broadcast("scroll.infiniteScrollComplete")},2000)}else{j.$broadcast("scroll.infiniteScrollComplete")}};j.proResReturnData=function(a){var e=[],b=a.respData.dataList,f,g="";for(var c=0,d=b.length;c<d;c++){if(b[c].featureName===null||b[c].featureName===undefined){g=""}else{g=b[c].featureName}f={proId:b[c].prodNum,proListImg:privateVerifictionObj.verifiction.imgLink(b[c].firstProdImg),proName:b[c].prodName,proModel:"产品型号: "+g,proPrice:b[c].stdPrice};e.push(f)}if(b.length<9){j.noMoreHide=false;j.loadingHide=true;l.setMoreHide(false);l.setLoadingHide(true)}return e};if(j.viewStates.getSearchResListState()===false){if(n==0){getOrPostRequestObj.proSearchConnec.userSearchPro("",k,j,m)}else{getOrPostRequestObj.proSearchConnec.userSearchPro(q,"",j,m)}j.viewStates.setSearchResListState(true)}else{j.proResList=l.getProResList();o=false;r(function(){j.loadingImg()},500)}j.resItemClick=function(a){p.path("/detailed").search({proNum:j.proResList[a].proId})}};proListCtrl.$inject=["$scope","$http","proListService","$location","$timeout"];var proListarr=["$scope","$http","proListService","$location","$timeout",proListCtrl];indexModule.controller("proList",proListarr);var register=function(g,i,k,j){var l={color:"#ef575c"};var h={color:"#294775"};g.registerStyle={"border-bottom":"none","box-shadow":"0 2px 3px rgba(0,0,0,.15)"};g.register={};g.rphoneFocus=function(){g.registerPhone=l};g.rphoneBlur=function(){g.registerPhone=h};g.rpassFocus=function(){g.registerPass=l};g.rpassBlur=function(){g.registerPass=h};g.rpasscFocus=function(){g.registerPassC=l};g.rpasscBlur=function(){g.registerPassC=h};g.rnameFocus=function(){g.registerName=l};g.rnameBlur=function(){g.registerName=h};g.rcompanyFocus=function(){g.registerCompany=l};g.rcompanyBlur=function(){g.registerCompany=h};g.registerSend=function(){if(privateVerifictionObj.verifiction.iphonever(g.register.rPhone)===false){g.showAlert("提 示","手机号码格式输入错误!")}else{if(privateVerifictionObj.verifiction.isLetterAndNum(g.register.rPass)===false){g.showAlert("提 示","用户密码只能由字母或数字组成!")}else{if(g.register.rPass===""||g.register.rPass===undefined||g.register.rPassC===""||g.register.rPassC===undefined){g.showAlert("提 示","密码不能为空!")}else{if(g.register.rPass!==g.register.rPassC){g.showAlert("提 示","两次用户密码输入不正确!")}else{if(g.register.rName===""||g.register.rName===undefined){g.showAlert("提 示","姓名不能为空!")}else{if(g.register.rCompany===""||g.register.rCompany===undefined){g.showAlert("提 示","商家名/公司名不能为空!")}else{getOrPostRequestObj.registConnect.userRegist(g,i)}}}}}}};g.userLoginDone_CallBack=function(a){localStorage.setItem("userName",a+"");publicParameterObj.parameters.userName=localStorage.userName.replace(/\"/g,"");publicEventsObj.operatingDatabaseEvent.crateTable();getOrPostRequestObj.userAndAdminSignIn.userLoginState=true;getOrPostRequestObj.userAndAdminSignIn.testSetJushTagNalias(g,i)};g.registerDone_CallBack=function(b,a){getOrPostRequestObj.userAndAdminSignIn.userLogin(g,i,b,a);k.show({template:"<div>恭喜您注册成功!</div>",delay:100,duration:1000});g.register.rPhone="";g.register.rPass="";g.register.rPassC="";g.register.rName="";g.register.rCompany="";j.path("/personal")}};searchResCtrl.$inject=["$scope","$http","searchResService","$location","$timeout"];var searchResarr=["$scope","$http","searchResService","$location","$timeout",searchResCtrl];indexModule.controller("searchRes",searchResarr);var rightMenus=function(e,d,f){e.isUserLogin=function(){getOrPostRequestObj.userAndAdminSignIn.isUserLogin(e,d),e.isLogin_CallBack=function(a){e.isToLogin(a)}},e.isAdminLogin=function(){getOrPostRequestObj.userAndAdminSignIn.isAdminLogin(e,d)},e.isToLogin=function(a){a?f.path("/personal"):(e.userLogin.show(),e.rightMenu.hide())},e.isaLogin_CallBack=function(a){a?f.path("/adminMenu"):(e.adminLogin.show(),e.rightMenu.hide())}};register.$inject=["$scope","$http","$ionicLoading","$location"],indexModule.controller("registerCtrl",register);indexModule.service("shoppingCarService",function(){var g={};var l=true;var j=true;var k=false;var h=0;var i=[];g.getSendBtnHide=function(){return l};g.setSendBtnHide=function(a){l=a};g.getIsNone=function(){return j};g.setIsNone=function(a){j=a};g.getOpenEditPrice=function(){return k};g.setOpenEditPrice=function(a){k=a};g.getCountNum=function(){return h};g.setCountNum=function(a){h=a};g.getSpList=function(){return i};g.setSpList=function(a){i=a};return g});var shoppingCarCtrl=function(i,k,l,o,m,p,n){i.sendjson=[];i.sendBtnHide=l.getSendBtnHide();i.isNone=l.getIsNone();i.openEditPrice=l.getOpenEditPrice();i.countNum=l.getCountNum();i.closeEditPrice=false;i.editPriceHide=false;i.editBtn=true;i.iProNum=[];var j=0;i.spBackHide=i.getPerSpCar()==0;i.shoppingCarIconState();i.showConfirm=function(a){o.confirm({title:"提 示",content:"是否将该产品从购物车中删除?",buttons:[{text:"取 消",type:"alertCancel",onTap:function(b){return false}},{text:"确 定",type:"alertComfirm",onTap:function(b){return true}}]}).then(function(c){if(c){var b=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName)).reverse();i.countNum=i.countNum-b[a].mynumber*i.spLists[a].price;if(privateVerifictionObj.verifiction.isInt(i.countNum)===false){i.countNum=privateVerifictionObj.verifiction.subNum(i.countNum,2)}publicEventsObj.operatingDatabaseEvent.deleteItemData(i.spLists[a].id);i.deletePro(a)}})};i.sendOrderConfirm=function(){o.confirm({title:"提 示",content:"是否提交订单?",buttons:[{text:"取 消",type:"alertCancel",onTap:function(a){return false}},{text:"确 定",type:"alertComfirm",onTap:function(a){return true}}]}).then(function(a){if(a){var e=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));var b={};for(var c=0,d=e.length;c<d;c++){if(c===0){b="{'prodNum':'"+e[c].myid+"','cases':"+e[c].mynumber+"}"}else{b="{'prodNum':'"+e[c].myid+"','cases':"+e[c].mynumber+"}"}i.sendjson.push(b)}i.sendjson="["+i.sendjson+"]";getOrPostRequestObj.shoppingCarConnect.sendOrder(i,k)}})};i.shoppingCarInit_CallBack=function(a,b){l.setSpList(i.shoppingCharReturnData(a,b));i.spLists=l.getSpList();p(function(){i.loadingImg()},500)};i.shoppingCharReturnData=function(a){var b=a.respData;var e=[];var f;var g=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName)).reverse();for(var c=0,d=b.length;c<d;c++){f={name:b[c].prodName,img:privateVerifictionObj.verifiction.imgLink(b[c].firstProdImg),id:b[c].prodNum,price:b[c].stdPrice,num:g[c].mynumber,border2x:false,boderNone:false};e.push(f);f={};i.countNum=i.countNum+b[c].stdPrice*g[c].mynumber;if(privateVerifictionObj.verifiction.isInt(i.countNum)===false){i.countNum=privateVerifictionObj.verifiction.subNum(i.countNum,2)}}l.setCountNum(i.countNum);return e};i.isLogin_CallBack=function(c){if(c){if(localStorage.getItem(publicParameterObj.parameters.userName)==="[]"||localStorage.getItem(publicParameterObj.parameters.userName)===undefined){i.isNone=false;i.sendBtnHide=true;l.setSendBtnHide(true);l.setIsNone(false)}else{var a=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName));for(var b=0,d=a.length;b<d;b++){i.iProNum.push(a[b].myid);if(b===d-1){i.sendBtnHide=false;i.editBtn=false;l.setSendBtnHide(false)}}i.isNone=!(a.length===0);l.setIsNone(i.isNone);getOrPostRequestObj.shoppingCarConnect.getShoppingInfo(i,k)}}else{p(function(){i.userLoginShowHide(true)},500)}};i.changeProNumber=function(b,c){var a=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName)).reverse();if(b==="add"){++i.spLists[c].num}else{if(i.spLists[c].num>1){--i.spLists[c].num}}i.countNum=i.countNum-a[c].mynumber*i.spLists[c].price+i.spLists[c].num*i.spLists[c].price;if(privateVerifictionObj.verifiction.isInt(i.countNum)===false){i.countNum=privateVerifictionObj.verifiction.subNum(i.countNum,2)}publicEventsObj.operatingDatabaseEvent.updateData(i.spLists[c].id,i.spLists[c].num);l.setCountNum(i.countNum);l.setSpList(i.spLists)};i.changeVal=function(b){var a=JSON.parse(localStorage.getItem(publicParameterObj.parameters.userName)).reverse();if(privateVerifictionObj.verifiction.isInt(i.spLists[b].num)){i.spLists[b].boderNone=false;i.spLists[b].border2x=false;j<=0?j=0:j--;i.countNum=i.countNum-a[b].mynumber*i.spLists[b].price+i.spLists[b].num*i.spLists[b].price;if(privateVerifictionObj.verifiction.isInt(i.countNum)===false){i.countNum=privateVerifictionObj.verifiction.subNum(i.countNum,2)}publicEventsObj.operatingDatabaseEvent.updateData(i.spLists[b].id,i.spLists[b].num);l.setCountNum(i.countNum)}else{i.spLists[b].border2x=true;j++}l.setSpList(i.spLists)};i.deletePro=function(a){i.spLists.splice(a,1);if(i.spLists.length===0){i.sendBtnHide=true;i.editBtn=true;i.isNone=false;l.setSendBtnHide(true);l.setIsNone(false)}l.setCountNum(i.countNum);l.setSpList(i.spLists)};i.openOrCloseEditPrice=function(){if(i.editPriceHide){if(j!==0){i.showAlert("提 示","请填写正确的商品数量!")}else{i.editPriceHide=false;i.closeEditPrice=true;i.openEditPrice=false;l.setOpenEditPrice(false)}}else{i.closeEditPrice=false;i.openEditPrice=true;i.editPriceHide=true;l.setOpenEditPrice()}};i.sendOrder=function(){i.sendOrderConfirm()};i.sendOrder_CallBack=function(){publicEventsObj.operatingDatabaseEvent.deleteallData();i.spLists=[];l.setSpList(i.spLists);i.viewStates.setWaitingState(false);i.viewStates.setShoppingCarState(false);n.show({template:"<div>订单提交成功!</div>",delay:100,duration:2000});m.path("/waitingAudit").replace()};i.showDetailed=function(a){if(i.editPriceHide===false){m.path("/detailed").search({proNum:a,hisPage:1})}};i.toProd=function(){m.path("/product")};if(i.viewStates.getShoppingCarState()===false){l.setCountNum(0);i.countNum=0;getOrPostRequestObj.userAndAdminSignIn.isUserLogin(i,k);i.viewStates.setShoppingCarState(true)}else{i.spLists=l.getSpList();p(function(){i.loadingImg()},500);if(i.spLists.length>0){i.editBtn=false}}};rightMenus.$inject=["$scope","$http","$location"];indexModule.controller("rightMenuCtrl",rightMenus);var superProCtrl=function(g,h,i,f){g.bodyHide=true;g.noMoreHide=true;g.loadingHide=false;g.pageNum=2;var j=true;g.$on("$stateChangeStart",function(){f.cancel(g.loadHttp)});g.superOrderRefresh=function(){f(function(){getOrPostRequestObj.superProConnect.superProList(g,h);g.$broadcast("scroll.refreshComplete")},2000)};g.superInit_CallBack=function(a){g.sproDatas=g.superReturnData(a);g.pageNum=2;f(function(){j=false},1000);f(function(){g.loadingImg()},500)};g.superLoadMore_CallBack=function(a){var b=g.superReturnData(a);g.sproDatas.proLeftInfos=g.sproDatas.proLeftInfos.concat(b.proLeftInfos);g.sproDatas.proRightInfos=g.sproDatas.proRightInfos.concat(b.proRightInfos);g.pageNum++;f(function(){j=false},1000);f(function(){g.loadingImg()},500)};g.superLoadMore=function(){if(g.noMoreHide&&j===false){j=true;g.loadHttp=f(function(){getOrPostRequestObj.superProConnect.superProListLoadMore(g,h);g.$broadcast("scroll.infiniteScrollComplete")},2000)}else{g.$broadcast("scroll.infiniteScrollComplete")}};g.superReturnData=function(q){var a,e,b=[],s=[],c=q.respData.dataList;for(var p=0,d=c.length;p<d;p+=2){a={proLeftNum:c[p].prodNum,proLeftImg:privateVerifictionObj.verifiction.imgLink(c[p].firstProdImg),proLeftName:c[p].prodName,proLeftPrice:"¥"+c[p].stdPrice};b.push(a);if(p+1<d){e={proRightNum:c[p+1].prodNum,proRightImg:privateVerifictionObj.verifiction.imgLink(c[p+1].firstProdImg),proRightName:c[p+1].prodName,proRightPrice:"¥"+c[p+1].stdPrice};s.push(e)}}var r={proLeftInfos:b,proRightInfos:s};if(c.length<14){g.noMoreHide=false;g.loadingHide=true}return r};g.proLeftClick=function(b){var a=g.getPerSpCar();g.setPerSpCar(a+4);i.path("/detailed").search({proNum:g.sproDatas.proLeftInfos[b].proLeftNum})};g.proRightClick=function(b){var a=g.getPerSpCar();if(a>0){g.setPerSpCar(a+4)}else{g.setPerSpCar(4)}i.path("/detailed").search({proNum:g.sproDatas.proRightInfos[b].proRightNum})};getOrPostRequestObj.superProConnect.superProList(g,h)};shoppingCarCtrl.$inject=["$scope","$http","shoppingCarService","$ionicPopup","$location","$timeout","$ionicLoading"];var shoppingCararr=["$scope","$http","shoppingCarService","$ionicPopup","$location","$timeout","$ionicLoading",shoppingCarCtrl];indexModule.controller("shoppingCar",shoppingCararr);var userLoginCtrl=function(e,f,d){e.login={};e.loginStyle={"border-bottom":"none","box-shadow":"0 2px 3px rgba(0,0,0,.15)"};e.iuserLogin=function(){getOrPostRequestObj.userAndAdminSignIn.userLogin(e,f,e.login.userName,e.login.userPass);e.login.userPass=""};e.userLoginDone_CallBack=function(a){localStorage.setItem("userName",a+"");publicParameterObj.parameters.userName=localStorage.userName.replace(/\"/g,"");publicEventsObj.operatingDatabaseEvent.crateTable();getOrPostRequestObj.userAndAdminSignIn.userLoginState=true;getOrPostRequestObj.userAndAdminSignIn.testSetJushTagNalias(e,f);e.toPersonal()};e.hideUserLogin=function(){var a=d.url().split("?")[0];switch(a){case"/personal":e.back();break;case"/modifyInfo":case"/modifyPass":case"/superPro":case"/myOrder":case"/waitingAudit":e.back(-2);break;case"/detailed":case"/message":e.pageHide();break;case"/shoppingCar":e.viewStates.setShoppingCarState(false);if(e.perSpCar!==0){e.back(-e.perSpCar)}else{e.back()}break;default:e.back();break}};e.toPersonal=function(){switch(d.url().split("?")[0]){case"/personal":case"/modifyInfo":case"/modifyPass":case"/superPro":case"/myOrder":case"/waitingAudit":case"/shoppingCar":e.pageHide();location.reload();break;case"/detailed":if(getOrPostRequestObj.userAndAdminSignIn.isToShoppingCar===true){d.path("/shoppingCar").search("")}else{e.pageHide()}break;case"/message":if(d.search().page==="editMessage"){e.userLogin.hide();e.editMessageShowHide(false)}else{d.path("/personal")}break;default:d.path("/personal")}};e.userNameFocus=function(){e.nameStyle={color:"#ef575c"}};e.userNameBlur=function(){e.nameStyle={color:"#294775"}};e.userPassFocus=function(){e.passStyle={color:"#ef575c"}};e.userPassBlur=function(){e.passStyle={color:"#294775"}}};superProCtrl.$inject=["$scope","$http","$location","$timeout"];indexModule.controller("superPro",superProCtrl);indexModule.service("modifyInfoService",function(){var h={};var i="未登录";var j="";var g="";var k="";var l="";h.getPerNameInfo=function(){return i};h.setPerNameInfo=function(a){i=a};h.getCompanyInfo=function(){return j};h.setCompanyInfo=function(a){j=a};h.getUserNameInfo=function(){return g};h.setUserNameInfo=function(a){g=a};h.getPhoneInfo=function(){return k};h.setPhoneInfo=function(a){k=a};h.getAddressInfo=function(){return l};h.setAddressInfo=function(a){l=a};return h});var modifyInfoCtrl=function(h,j,n,m,k){h.iInfoName=n.getPerNameInfo();var l={color:"#ef575c"};var i={color:"#294775"};h.modify={userCompany:n.getCompanyInfo(),userName:n.getUserNameInfo(),userPhone:n.getPhoneInfo(),userAddress:n.getAddressInfo()};h.muserCompanyFocus=function(){h.mCompany=l};h.muserCompanyBlur=function(){h.mCompany=i};h.muserNameFocus=function(){h.mName=l};h.muserNameBlur=function(){h.mName=i};h.muserPhoneFocus=function(){h.mPhone=l};h.muserPhoneBlur=function(){h.mPhone=i};h.muserAddressFocus=function(){h.mAddress=l};h.muserAddressBlur=function(){h.mAddress=i};h.userInfoInit_CallBack=function(a){h.iInfoName="用户名: "+a.respData.custName;h.modify.userCompany=a.respData.companyName;h.modify.userName=a.respData.contactPerson;h.modify.userPhone=a.respData.phoneNum;h.modify.userAddress=a.respData.address;h.updateInfo()};h.updateUserInfo=function(){if(h.modify.userCompany===""||h.modify.userCompany===undefined){h.showAlert("提 示","公司名不能为空!")}else{if(h.modify.userName===""||h.modify.userName===undefined){h.showAlert("提 示","联系人不能为空!")}else{if(h.modify.userPhone===""||h.modify.userPhone===undefined){h.showAlert("提 示","手机号码不能为空!")}else{if(privateVerifictionObj.verifiction.iphonever(h.modify.userPhone)===false){h.showAlert("提 示","手机号码格式不正确!")}else{getOrPostRequestObj.registConnect.userUpdateInfo(h,j)}}}}};h.updateUserInfoDone_CallBack=function(){k.show({template:"<div>个人信息修改完成!</div>",delay:100,duration:1000});h.updateInfo();window.history.back()};h.updateInfo=function(){n.setPerNameInfo(h.iInfoName);n.setCompanyInfo(h.modify.userCompany);n.setUserNameInfo(h.modify.userName);n.setPhoneInfo(h.modify.userPhone);n.setAddressInfo(h.modify.userAddress)};if(h.viewStates.getModifyState()===false){m(function(){getOrPostRequestObj.registConnect.userGetInfo(h,j)},450);h.viewStates.setModifyState(true)}};userLoginCtrl.$inject=["$scope","$http","$location"];indexModule.controller("userLoginCtrl",userLoginCtrl);var modifyPassCtrl=function(f,h,i){var j={color:"#ef575c"};var g={color:"#294775"};f.updatePass={};f.oldPassFocus=function(){f.oldPassStyle=j};f.oldPassBlur=function(){f.oldPassStyle=g};f.newPassFocus=function(){f.newPassStyle=j};f.newPassBlur=function(){f.newPassStyle=g};f.newPassCFocus=function(){f.newPassCStyle=j};f.newPassCBlur=function(){f.newPassCStyle=g};f.clearData=function(){f.updatePass.oldPass="";f.updatePass.newPass="";f.updatePass.newPassC=""};f.modifyPassDone=function(){i.show({template:"<div>密码修改成功!</div>",delay:100,duration:1000})};f.modifyPassDone_CallBakc=function(){f.modifyPassDone();window.history.back()};f.sendNewPass=function(){if(privateVerifictionObj.verifiction.isLetterAndNum(f.updatePass.oldPass)===false){f.showAlert("提 示","旧密码输入错误，只能由数字或字母组成!")}else{if(privateVerifictionObj.verifiction.isLetterAndNum(f.updatePass.newPass)===false||f.updatePass.newPass===undefined){f.showAlert("提 示","新密码输入错误，只能由数字或字母组成!")}else{if(f.updatePass.newPass!==f.updatePass.newPassC){f.showAlert("提 示","新密码两次输入不一致!")}else{getOrPostRequestObj.userAndAdminSignIn.userModifyPass(f,h,f.updatePass.oldPass,f.updatePass.newPass)}}}}};modifyInfoCtrl.$inject=["$scope","$http","modifyInfoService","$timeout","$ionicLoading"];var modifyInfoarr=["$scope","$http","modifyInfoService","$timeout","$ionicLoading",modifyInfoCtrl];indexModule.controller("modifyInfo",modifyInfoarr);var waitingAuditCtrl=function(g,h,i,f){g.custName="未登录";g.noMoreHide=true;g.loadingHide=false;g.pageNum=2;var j=true;g.$on("$stateChangeStart",function(){f.cancel(g.loadHttp)});g.userWaitingRefresh=function(){f(function(){getOrPostRequestObj.userWaitingAuditConnect.userShowWaitingList(g,h);g.$broadcast("scroll.refreshComplete")},2000)};g.waOrderInit_CallBack=function(a){g.waoLists=g.waitingAuditRetrunData(a);g.pageNum=2;f(function(){j=false},1000);f(function(){g.loadingImg()},500)};g.waOrderLoadMore_CallBack=function(a){var b=g.waitingAuditRetrunData(a);g.waoLists=g.waoLists.concat(b);g.pageNum++;f(function(){j=false},1000);f(function(){g.loadingImg()},500)};g.isLogin_CallBack=function(a){if(a===true){g.custName=publicParameterObj.parameters.userName}else{g.custName="未登录"}};g.waitingAuditLoadMore=function(){if(g.noMoreHide&&j===false){j=true;g.loadHttp=f(function(){getOrPostRequestObj.userWaitingAuditConnect.userWaitingListLoadMore(g,h);g.$broadcast("scroll.infiniteScrollComplete")},2000)}else{g.$broadcast("scroll.infiniteScrollComplete")}};g.waitingAuditRetrunData=function(c){var C,b=[],w=[],x,B=[],y=[],D=c.respData.dataList,e=true,A=true;for(var d=0,a=D.length;d<a;d++){e=true;A=true;B.push({orderItem:"产品总数: "+D[d].origOrderItemList.length});B.push({orderItem:"成交总价: "+D[d].priceTotal});B.push({orderItem:"下单日期: "+D[d].createDate});for(var v=0,z=D[d].origOrderItemList.length;v<z;v++){x={proId:D[d].origOrderItemList[v].prodNum,proImg:privateVerifictionObj.verifiction.imgLink(D[d].origOrderItemList[v].whereimg),proName:D[d].origOrderItemList[v].prodName,proNum:"订购数量 : "+D[d].origOrderItemList[v].cases,proPrice:"¥"+D[d].origOrderItemList[v].prodPrice};if(v<3){b.push(x)}else{e=true;A=false;w.push(x)}x={}}C={waorderId:D[d].origOrderNum,isProHide:e,isHide:A,waoItems:B,waoPros:b,date:D[d].createDate,waiCountNum:w.length+b.length,waoHidePro:w,waiCountPrice:"¥"+D[d].priceTotal,btnText:"显示全部"};y.push(C);B=[];b=[];w=[]}if(D.length<9){g.noMoreHide=false;g.loadingHide=true}return y};g.toDetailed=function(b){var a=g.getPerSpCar()+4;g.setPerSpCar(a);i.path("/detailed").search({proNum:b})};g.hideShowPro=function(a){g.waoLists[a].isProHide=!g.waoLists[a].isProHide;g.waoLists[a].isProHide?g.waoLists[a].btnText="显示全部":g.waoLists[a].btnText="隐藏部分"};f(function(){getOrPostRequestObj.userAndAdminSignIn.isUserLogin(g,h)},450);getOrPostRequestObj.userWaitingAuditConnect.userShowWaitingList(g,h)};modifyPassCtrl.$inject=["$scope","$http","$ionicLoading"];indexModule.controller("modifyPass",modifyPassCtrl);waitingAuditCtrl.$inject=["$scope","$http","$location","$timeout"];indexModule.controller("waitingAudit",waitingAuditCtrl);
